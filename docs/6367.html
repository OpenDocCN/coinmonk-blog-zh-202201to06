<html>
<head>
<title>Uniswap V3 Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Uniswap V3解释</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/uniswap-v3-explained-57e0cdf86719?source=collection_archive---------0-----------------------#2022-05-08">https://medium.com/coinmonks/uniswap-v3-explained-57e0cdf86719?source=collection_archive---------0-----------------------#2022-05-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="3daf" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">关于Uniswap V3，您需要了解的所有信息</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/47f02890bf9d7061733ca83ff209e7b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vk9znWaXEeNdTdsZxzWOA.jpeg"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap V3</figcaption></figure><p id="1af0" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap，世界上最受欢迎的<a class="ae ku" href="https://blog.cryptostars.is/what-are-decentralized-exchanges-how-do-dexs-work-4e54fd477e0e" rel="noopener ugc nofollow" target="_blank"><strong class="ka hu">dex</strong>，</a>之一，是超越中央集权机构竞赛中的领先者。在获得所有DeFi项目中最高tvl之一后，Uniswap团队推出了这一著名DEX的新版本——unis WAP v3。在这篇文章中，我将解释你们都需要知道的<strong class="ka hu"> Uniswap V3 </strong>！</p><p id="e41f" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">让我们从Uniswap开始…</p><h1 id="c48b" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">什么是Uniswap？</h1><p id="fdaf" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap是以太坊上用于交换<strong class="ka hu"> ERC20 </strong>令牌的协议。与大多数旨在收取费用的交易所不同，Uniswap旨在作为一种公共产品发挥作用，即社区在没有平台费或中间人的情况下进行代币交易的工具。此外，与大多数匹配买家和卖家以确定价格和执行交易的交易所不同，Uniswap使用一个简单的数学方程以及令牌和ETH池来做同样的工作。</p><h1 id="f1dd" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">Uniswap v1与v2</h1><p id="8b4f" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">在我们看一看<strong class="ka hu"> Uniswap v3 </strong>之前，我们必须提醒自己它的进化之路以及<strong class="ka hu"> v1 </strong>和<strong class="ka hu"> v2 </strong>的区别。这将有助于我们理解为什么Uniswap成为DeFi领域的领导者是理所当然的事情。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ls"><img src="../Images/45f09538ee8299aec313d62d7f06b7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8xiilf4Jw6LjvYj3yLPe_g.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap V1 &amp; V2</figcaption></figure><h1 id="3e69" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">Uniswap v1</h1><p id="335c" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap v1于2018年11月2日首次在以太坊mainnet上线。尽管它不是第一个DEX，但它肯定是第一个吸引密码爱好者眼球的。</p><p id="c658" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap基于<strong class="ka hu">自动做市商(AMM) </strong>模式。这个模型依靠一个数学公式来给资产定价。资产管理公司不下订单，而是依靠<strong class="ka hu">流动性提供者</strong><strong class="ka hu">【LPs】</strong>，他们投资流动性池中的交易对。</p><p id="690b" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap是一家<strong class="ka hu">恒定功能做市商</strong>，或者更具体地说，是一家恒定产品做市商。这意味着每个流动性池中交易对的比率必须遵循常数乘积公式:</p><p id="99a4" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated"><em class="lt"> x*y=k </em></p><p id="624b" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">其中<strong class="ka hu"> <em class="lt"> k </em> </strong> <em class="lt"> </em>为常数，<strong class="ka hu"> <em class="lt"> x </em> </strong>为第一项资产的储备，<strong class="ka hu"> <em class="lt"> y </em> </strong>为第二项资产的储备。</p><p id="564e" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这意味着所有的<strong class="ka hu">LP</strong>都要以不改变<strong class="ka hu"> <em class="lt"> k </em> </strong>的方式提供额外的流动性。此外，每个交易者都必须知道锁定的资金总量，以避免高滑点。</p><p id="d7e1" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap v1只支持<strong class="ka hu"> ETH-ERC20 </strong>交易对，所以你只能用<strong class="ka hu"> ETH </strong>换一个<strong class="ka hu"> ERC20令牌</strong>。所以，如果你想把换成戴，你必须把换成ETH，然后去ETH-DAI池得到戴。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff lu"><img src="../Images/e0e677523afc6c791ec5a5b06fa6d78a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yy6xQO80JfLsxqwce9J7DQ.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap V1: DAI to USDC Swap</figcaption></figure><p id="25fd" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap v1引入的另一个特性是<strong class="ka hu"> LP令牌</strong>。每个流动性提供者将获得与他们增加的总流动性的百分比成比例的LP令牌的数量。这些LP代币代表LP对池的贡献，并且可以被出售/交易或燃烧以赎回存放的代币。此外，Uniswap上的每笔交易都会产生0.30%的交易费。这些费用作为对提供流动性的有限合伙人的奖励被自动发送到流动性准备金。</p><h1 id="e1a1" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">Uniswap v2</h1><p id="abfa" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap v1是一种新型分散市场的概念验证。它的初步成功是团队立即重申更好的解决方案的信号。Uniswap v2于2020年5月推出。</p><p id="e3b1" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">简而言之，Uniswap v2是Uniswap v1的一个更好、更方便用户的版本。这个新版本中解决的v1的主要问题是缺少ERC20-ERC20令牌池。对于想要将一个ERC20令牌换成另一个的用户来说，这导致了更高的成本和延误。</p><h2 id="c2e6" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">ERC20-ERC20池</h2><p id="255c" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap v2引入了ERC20-ERC20流动性池来解决这个所谓的“<strong class="ka hu"> ETH桥接</strong>”问题。他们甚至在核心合同中使用包装ETH而不是本地ETH。然而，最终用户仍然可以通过帮助者合同使用ETH。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mj"><img src="../Images/f4b928a3467bb8f1ed0bd4cc72ae8107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yOmD3eO9XFe7SSDTJ5MBow.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap V2: DAI to USDC Swap with Router</figcaption></figure><h2 id="9805" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">神谕</h2><p id="fd3a" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap的第二个版本还实现了一个新的功能，能够实现高度分散和抗操纵的链上价格馈送。</p><h2 id="31cd" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">闪存互换</h2><p id="abf3" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">v2推出的另一个突破性特性是<a class="ae ku" href="https://uniswap.org/docs/v2/core-concepts/flash-swaps/" rel="noopener ugc nofollow" target="_blank">闪存交换</a>。这些Flash Swaps允许用户从Uniswap上的任何<strong class="ka hu"> ERC20 </strong>令牌中提取他们想要的金额，而无需任何前期成本，并且可以对其做任何他们想做的事情(执行任意代码)，前提是在交易执行结束时。</p><p id="f032" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">即使在v2推出后Uniswap v1依然存在，但没过多久，LPs就将大部分流动性从一个版本转移到了另一个版本。Uniswap v2取得了巨大的成功，日交易量甚至超过了一些最著名的中央交易所。这一成功使Uniswap v2成为最分叉的项目之一——sushi swap是其最大的竞争对手，被创建为分叉。</p><h1 id="0ade" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">什么是Uniswap V3？</h1><p id="47aa" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap v3是即将推出的新的和改进的<strong class="ka hu"> DEX </strong>，将在以太坊区块链上运行，由与v2相同的<strong class="ka hu">自动做市商(AMM) </strong>模型驱动，但装载了旨在最大化交易商和流动性提供商的回报、最小化价格滑动和管理下行风险的新开发。</p><h1 id="d438" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">Uniswap为什么要推出另一个版本？</h1><p id="8242" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap一直是其自身成功的受害者，受到严厉批评，称其受欢迎程度正在减缓以太坊网络的速度，并导致交易汽油费飙升。此外，Uniswap的代码被竞争对手如Sushiswap和币安智能链反复利用和复制。</p><p id="7fe5" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap v3提高了其<strong class="ka hu"> AMM </strong>型号的效率，这是在比较<strong class="ka hu"> DEXs </strong>时要观察的最重要的特征之一。</p><p id="7a60" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">通过引入<strong class="ka hu">集中流动性</strong>概念，流动性提供者有能力在确定的价格范围内供应其资产，并为此存放流动性。此外，他们根据自己在任何特定资金池中承担的风险程度，给予不同等级的奖励。这可以激励更多的流动性提供者参与进来，因为回报可能有助于抵消他们在更广泛的价格范围内提供流动性的一些潜在损失。</p><p id="c793" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这些功能的结合提高了支持Uniswap v3指数的AMM模型的效率，这将使交易者受益于更多的流动性。此外，流动性提供者也可能以高达4000倍的效率获得更高的资本回报。</p><h1 id="d46e" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">Uniswap V3有什么新功能？</h1><p id="2062" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap v3于<strong class="ka hu">2021年5月5日</strong>在以太坊主网上发布。Uniswap V3中引入了一些主要的功能更新:</p><ol class=""><li id="b74d" class="mk ml ht ka b kb kc ke kf kh mm kl mn kp mo kt mp mq mr ms dt translated">更多权力下放</li><li id="66f8" class="mk ml ht ka b kb mt ke mu kh mv kl mw kp mx kt mp mq mr ms dt translated">集中流动性</li><li id="d954" class="mk ml ht ka b kb mt ke mu kh mv kl mw kp mx kt mp mq mr ms dt translated">更好的安全性</li><li id="5e46" class="mk ml ht ka b kb mt ke mu kh mv kl mw kp mx kt mp mq mr ms dt translated">新费用等级</li><li id="5616" class="mk ml ht ka b kb mt ke mu kh mv kl mw kp mx kt mp mq mr ms dt translated">Oracle feed开发</li><li id="4415" class="mk ml ht ka b kb mt ke mu kh mv kl mw kp mx kt mp mq mr ms dt translated">范围订单</li><li id="b0d5" class="mk ml ht ka b kb mt ke mu kh mv kl mw kp mx kt mp mq mr ms dt translated">不可替代的流动性</li><li id="d9ae" class="mk ml ht ka b kb mt ke mu kh mv kl mw kp mx kt mp mq mr ms dt translated">许可证</li></ol><p id="efeb" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这些功能将共同为平台的交易者实现更好的资本效率，并为流动性提供者实现更好的风险管理。</p><h1 id="6efb" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">Uniswap v3功能</h1><p id="57f7" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">现在，让我们逐一查看Uniswap V3的一些功能，以便更好地理解它们。</p><h2 id="96db" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">集中流动性</h2><p id="f99a" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">集中的流动性是V3背后的主要概念。</p><p id="dddd" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">当有限合伙人向V2池提供流动性时，流动性沿着价格曲线均匀分布。虽然这允许处理0和<strong class="ka hu"> ∞ </strong>之间的所有价格范围，但这使得资本的效率相当低。这是因为大多数资产通常在一定的价格范围内交易。这在资产稳定、交易范围非常窄的资产池中尤其明显。例如，Uniswap戴/USDC资金池仅使用大约0.5% 的资金在<strong class="ka hu">【0.99】美元</strong>和<strong class="ka hu"/>美元【1.01】美元之间进行交易——绝大多数交易量都在这个价格区间内完成。这也是有限合伙人交易费用的主要来源。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff my"><img src="../Images/18e3217ba2dc6a960840a6a7343a52a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8MW4w2vsCLoELSM7XkpLjg.gif"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Liquidity price curve</figcaption></figure><p id="4831" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这意味着在这个特殊的例子中，剩余资本的<strong class="ka hu"> 99.5% </strong>几乎从未使用过。</p><p id="399b" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">在V3中，有限合伙人在提供流动性时可以选择一个定制的价格范围。这使得资本集中在大多数交易活动发生的范围内。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ls"><img src="../Images/545408eabbc8a18e4dc712aaf11ba9fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-FSe-cBrAZgj1lWOdLq7w.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Liquidity price curve</figcaption></figure><p id="3ab7" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">为了实现这一点，V3为每个流动性提供者创建了个性化的价格曲线。</p><p id="f309" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">在V3之前，允许LP拥有单独曲线的唯一方法是为每条曲线创建一个单独的池。如果交易必须在多个池之间进行，这些池如果不聚集在一起会导致高的天然气成本。</p><p id="eb15" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">重要的是，用户根据在某一价位可获得的组合流动性进行交易。这种组合流动性来自于在这个特定价格点重叠的所有价格曲线。</p><p id="60f4" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">有限合伙人赚取的交易费用与他们在一定范围内的流动性贡献成正比。</p><h2 id="de0b" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">资本效率</h2><p id="76a7" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">集中流动性为流动性提供者提供了更好的资本效率。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff my"><img src="../Images/25914d26a63ac6f910d7861ad4069428.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Rmg4qoEsCfvnWL1SVy-bZw.gif"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Liquidity Capital efficiency graph</figcaption></figure><p id="ac10" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">为了更好地理解它，让我们快速看一个例子。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff lu"><img src="../Images/e5f0d70ecd378d6179b6ac88c552983f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OoQHqswAgKpM_Zk6dxdc3A.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap liquidity capital efficiency example</figcaption></figure><p id="0465" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Alice和Bob都决定在Uniswap V3上的ETH/DAI池中提供流动性。他们每人有10，000美元，ETH的当前价格是<strong class="ka hu">1，750美元</strong>。</p><p id="30f9" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Alice将其全部资本在ETH和DAI之间分割，并在整个价格范围内进行配置(类似于V2)。她存了5000戴伊和2.85埃特。</p><p id="9cbe" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Bob没有使用他的全部资本，而是决定集中他的流动性，并在1500到2500的价格范围内提供资本。他存了600 DAI和0.37 ETH——总共1200美元，剩下的8800美元留着作他用。</p><p id="66f9" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">有意思的是，只要ETH/DAI价格保持在1500到2500区间，两者赚取的交易费用是一样的。这意味着Bob只能提供Alice资本的12%,但仍能获得相同的回报——这使得他的资本比Alice的资本效率高8.34倍。</p><p id="88ce" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">最重要的是，Bob将更少的总资本置于风险之中。在ETH跌至0美元的可能性极小的情况下，Bob和Alice的全部流动性将转入ETH。虽然他们都将失去他们的全部资本，但Bob的风险要小得多。</p><p id="a946" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">更稳定池中的有限合伙人最有可能在特别窄的范围内提供流动性。如果Uniswap v2 DAI/USDC池中目前持有的2500万美元集中在v3的0.99-1.01价格区间，那么只要价格保持在该区间内，它将提供与Uniswap v2中50亿美元相同的深度。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff lu"><img src="../Images/f7c2142ad5a6a69496737ef0fff444d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PKJ622mPUb70BnXKLSvb8A.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Capital efficiency example</figcaption></figure><p id="1b71" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">当V3推出时，与V2相比，最大资本效率为<strong class="ka hu">4000倍</strong>。当在单一的0.1%价格范围内提供流动性时，这是可以实现的。最重要的是，V3 pool工厂将能够支持精确到<strong class="ka hu"> 0.02% </strong>的范围——这相当于相对于V2的最大<strong class="ka hu"> 20，000倍</strong>的资本效率。</p><h2 id="d5c2" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">活跃流动性</h2><p id="284f" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">V3还引入了<strong class="ka hu">主动流动性</strong>的概念。如果特定流动性池中的资产交易价格超出了有限合伙人的价格范围，有限合伙人的流动性将被有效地从该池中移除，并停止赚取费用。当这种情况发生时，有限合伙人的流动性完全转向其中一种资产，他们最终只持有其中一种资产。在这一点上，有限合伙人可以等待，直到市场价格回到他们指定的价格范围，或者他们可以决定更新他们的范围，以说明当前的价格。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ls"><img src="../Images/d53e7de09581f2a24d9034e3446b206d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qjjuNXDE7VkhpzAhu9TlHQ.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Active liquidity graph</figcaption></figure><p id="30e7" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">尽管完全有可能在特定的价格范围内没有流动性，但在实践中，这将为流动性提供者创造一个巨大的机会，让他们真正为该价格范围提供流动性，并开始收取所有交易费用。从博弈论的角度来看，我们应该能够看到资本的合理分布，一些有限合伙人专注于狭窄的价格范围，另一些专注于可能性较小但更有利可图的范围，还有一个选择在价格超出之前的范围时更新价格范围。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff my"><img src="../Images/fcb8979644bb71ffacfdba9ef7b4a059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-w9xBHqMIjCjAWnZVcqZ7Q.gif"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap LPs price ranges</figcaption></figure><h2 id="880a" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">范围限制订单</h2><p id="71d0" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">区间限价单是集中流动性带来的下一个特征。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mz"><img src="../Images/9177859866943777f27375c018da81ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TeR4gDCcJ6gU1cArGr9bWQ.png"/></div></div></figure><p id="c47d" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这使得有限合伙人可以在高于或低于当前市场价格的定制价格范围内提供单一令牌作为流动性。当市场价格进入指定范围时，一种资产会沿着一条平滑的曲线被出售给另一种资产——同时在这个过程中仍能赚取互换费用。</p><p id="4f8b" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">当与一个狭窄的范围一起使用时，该特征允许实现与可以以特定价格设置的标准限价单相似的目标。</p><p id="d5f0" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">例如，让我们假设戴和在1.001以下交易。LP可以决定将他们的DAI存放在1.001和1.002之间的一个狭窄范围内。一旦戴交易超过1.002戴/USDC，整个LP的流动性被转换成USDC。此时，LP必须收回其流动性，以避免一旦戴/USDC回到低于1.002的交易时自动转换回戴。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff na"><img src="../Images/bba69cefffd95a07f0c5fc487b2629f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eRX-DbjvIlRRFtsscP4JLw.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Range order @ 1.001–1.002 DAI/ USDC</figcaption></figure><h2 id="1bda" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">不可替代的流动性</h2><p id="c822" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">由于每个LP基本上都可以创建自己的价格曲线，因此流动性头寸不再是可替代的，也不能用众所周知的ERC20 LP令牌来表示。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ls"><img src="../Images/dfd53b9e4834e4c0509a3cf5272b5365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*85PmUASThzm0xWaz2Vyglg.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Non-Fungible Liquidity</figcaption></figure><p id="b406" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">相反，假设流动性由不可替代的<strong class="ka hu"> ERC721 </strong>代币跟踪。尽管如此，看起来处于相同价格范围内的LP头寸将能够通过外围合约或其他合作伙伴协议由ERC20令牌来表示。</p><p id="fbfe" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">最重要的是，交易费用不再代表有限合伙人自动再投资到流动性池中。相反，可以创建外围契约来提供这样的功能。</p><h2 id="d747" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">灵活收费</h2><p id="f46a" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap v3为LP提供每对三个单独的<strong class="ka hu">费用等级</strong>—<strong class="ka hu">0.05%</strong>、<strong class="ka hu"> 0.30% </strong>和<strong class="ka hu"> 1.00% </strong>。这一系列选项确保有限合伙人根据预期的货币对波动性调整他们的利润:有限合伙人在不相关的货币对(如ETH/DAI)中承担更多风险，相反，在相关的货币对(如USDC/DAI)中承担最小风险。</p><p id="14ec" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">虽然不同的费用等级可能会导致某种程度的流动性分散，但我们认为大多数组合将调整到一个“明显”的费用等级，然后作为规范市场。我们预计同类资产对将聚集在<strong class="ka hu"> 0.05% </strong>费用层附近，ETH/DAI等资产对将使用<strong class="ka hu"> 0.30% </strong>，而外来资产可能会发现<strong class="ka hu"> 1.00% </strong>互换费用更合适。治理可以根据需要增加额外的费用等级。</p><p id="e1a8" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap v2引入了一个协议费用开关，该开关允许由治理开启统一的5个基点(LP费用的16.66%)费用。Uniswap v3协议费用要灵活得多。费用在默认情况下是关闭的，但可以由治理基于每个池打开，并设置在LP费用的<strong class="ka hu"> 10% </strong>和<strong class="ka hu"> 25% </strong>之间。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ls"><img src="../Images/5d5048481caf46b571615d4c2f8580a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g1cw3m2JcTnzZFWpRQnN7Q.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap v3 LPs Fee Tiers</figcaption></figure><h2 id="9e3e" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">高级神谕</h2><p id="9329" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">Uniswap v2推出了<strong class="ka hu">时间加权平均价格(TWAP) </strong>甲骨文。这些神谕作为DeFi基础设施的关键部分，已经集成到几十个项目中，包括Compound和Reflexer。</p><p id="b52f" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">V2 Oracle通过每秒存储Uniswap对价格的累积和来工作。这些价格总和可以在一个周期开始时检查一次，在一个周期结束时检查一次，以计算该周期内的准确TWAP。</p><p id="dce1" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">V3使得在单个链上调用中计算过去9天内的任何最近的TWAP成为可能。</p><p id="914b" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">最重要的是，与V2相比，保持oracles最新的成本已经降低了大约50%。</p><p id="ccea" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这些几乎是Uniswap V3背后的所有主要功能。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nb"><img src="../Images/82c4fb7babf6c724f1e2fd8eed1a3a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k89lutehJBDCRB3Cn-KYNA.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap v3 TWAP Oracles</figcaption></figure><p id="43a6" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">有趣的是，所有这些功能并没有导致汽油成本的增加。恰恰相反，这是最常见的特征——简单的互换比V2的同类产品便宜30%左右。</p><h2 id="32b2" class="lv kw ht bd kx lw lx ly lb lz ma mb lf kh mc md lh kl me mf lj kp mg mh ll mi dt translated">许可证—防止Uniswap v3抄袭</h2><p id="c774" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">这可以被视为与区块链的开源哲学形成对比。该团队宣布了Uniswap v3的延时许可。这意味着Uniswap v3 Core已在<a class="ae ku" href="https://github.com/Uniswap/uniswap-v3-core/blob/main/LICENSE" rel="noopener ugc nofollow" target="_blank">商业源许可1.1 </a>下发布。这限制了Uniswap v3源代码在长达两年的商业或生产使用中的使用。</p><p id="3a50" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">他们决定这样做是为了防止未来潜在的模仿者，比如SushiSwap。然而，外部集成所需的所有代码不受本许可证的影响。</p><h1 id="0e1b" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">包裹</h1><p id="3406" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">自成立以来，<strong class="ka hu"> Uniswap </strong>一直是<strong class="ka hu">领先的</strong> <a class="ae ku" href="https://blog.cryptostars.is/what-are-decentralized-exchanges-how-do-dexs-work-4e54fd477e0e" rel="noopener ugc nofollow" target="_blank"> <strong class="ka hu"> DEX </strong> </a>和全球最受欢迎的<strong class="ka hu"> DeFi </strong>平台之一。每一次新的迭代都带来了创新。</p><p id="83f2" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated"><strong class="ka hu"> Uniswap v3 </strong>不仅为其用户带来了更高的资本回报，还为开发者社区带来了围绕其构建生态系统的新可能性。</p><p id="703b" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">当谈到AMMs时，Uniswap V3似乎可以成为游戏规则的改变者。它基本上结合了标准AMM的优点和资产稳定的AMM的优点——同时使资本更加有效。这使得V3成为一个超级灵活的协议，能够适应各种不同的资产。</p><p id="0ea1" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">凭借<strong class="ka hu"> V3 </strong>的超高资本效率，即使现有流动性基于<strong class="ka hu">乐观主义在V2、V3和V3之间分割，</strong>也应该足以促进所有这3种协议的低滑点交易。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mz"><img src="../Images/a0dbb17bbc906abf7ddda04a9adf1e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RXa2jtpx8DAQcxceiyJquA.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Uniswap v1, v2, v3</figcaption></figure><p id="e95c" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Uniswap V3的一个挑战是提供流动性可能会变得有点困难，尤其是对于不太老练的用户。选择错误的价格区间可能会扩大受到非永久性损失影响的机会，而且看到第三方服务的发展会有助于选择分配流动性的最佳策略，这将是一件有趣的事情。继续阅读更多的故事。在Linkedin上关注我，保持联系→<a class="ae ku" href="https://www.linkedin.com/in/ishanshahzad/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/ishanshahzad/</a></p></div><div class="ab cl nc nd hb ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hm hn ho hp hq"><p id="e3a1" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">也读了，</p><div class="nj nk fm fo nl nm"><a href="https://blog.cryptostars.is/what-are-decentralized-exchanges-how-do-dexs-work-4e54fd477e0e" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab ej"><div class="no ab np cl cj nq"><h2 class="bd hu fv z el nr eo ep ns er et hs dt translated">什么是去中心化交易所？dex是如何工作的？</h2><div class="nt l"><h3 class="bd b fv z el nr eo ep ns er et ek translated">分散交易所终极指南(DEX)</h3></div><div class="nu l"><p class="bd b gc z el nr eo ep ns er et ek translated">blog.cryptostars.is</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa js nm"/></div></div></a></div><div class="nj nk fm fo nl nm"><a rel="noopener follow" target="_blank" href="/coinmonks/what-are-token-swaps-how-do-they-work-3af70a04ec7c"><div class="nn ab ej"><div class="no ab np cl cj nq"><h2 class="bd hu fv z el nr eo ep ns er et hs dt translated">什么是令牌交换&amp;它们是如何工作的？</h2><div class="nt l"><h3 class="bd b fv z el nr eo ep ns er et ek translated">令牌交换简要指南</h3></div><div class="nu l"><p class="bd b gc z el nr eo ep ns er et ek translated">medium.com</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa js nm"/></div></div></a></div><div class="nj nk fm fo nl nm"><a href="https://blog.cryptostars.is/how-to-build-a-decentralized-exchange-dex-like-uniswap-e31bb03062b3" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab ej"><div class="no ab np cl cj nq"><h2 class="bd hu fv z el nr eo ep ns er et hs dt translated">如何建立一个像Uniswap这样的分散式交易所(DEX)</h2><div class="nt l"><h3 class="bd b fv z el nr eo ep ns er et ek translated">构建像Uniswap一样的DEX的分步教程</h3></div><div class="nu l"><p class="bd b gc z el nr eo ep ns er et ek translated">blog.cryptostars.i</p></div></div><div class="nv l"><div class="oc l nx ny nz nv oa js nm"/></div></div></a></div></div></div>    
</body>
</html>