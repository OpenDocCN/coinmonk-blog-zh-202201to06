<html>
<head>
<title>Immutable Metadata</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不可变元数据</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/immutable-metadata-4b1ba369db77?source=collection_archive---------13-----------------------#2022-02-08">https://medium.com/coinmonks/immutable-metadata-4b1ba369db77?source=collection_archive---------13-----------------------#2022-02-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="5405" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">21毫米像素如何不变地收缩决定了瓷砖的位置</h2></div><p id="5663" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><a class="ae ke" href="https://21mmpixels.com" rel="noopener ugc nofollow" target="_blank">21mp xels</a>契约的一个特性是，可以用<a class="ae ke" href="https://etherscan.io/address/0x7dd7aa4b560692c882d982312c0b53b24c51523a#code" rel="noopener ugc nofollow" target="_blank">契约查看函数</a>、<em class="kf"> tileDescriptionArray </em>或其更友好的对应物<em class="kf"> tileDescription </em>来确定每个图块的位置。与大多数具有托管元数据文件的NFT项目不同，2100万像素图像中的图块位置无法更改，它是真正不可变的。</p><p id="e771" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这个问题的简单解决方案是将图块1放在左上角，图块编号按行或列顺序增加。这个解决方案似乎太简单了，而且不符合奖励2100万像素瓷砖早期购买者的精神。我们决定按对角线顺序发布图块，这样最左边的图块(x坐标= 0)将是1，2，4，7，11…，最上面的图块(y坐标= 0)将是1，3，6，10，15…</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kg"><img src="../Images/e1a59d4321d28954d988026e69373f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4qvAgfCAlfRrEHcd43C27w.png"/></div></div></figure><p id="7a02" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">第二组数字对一些人来说可能很熟悉，因为它们代表三角形的数字，即等边三角形中物体的数量。不幸的是，对于由70×120个图块组成的网格的矩形图像，该序列仅适用于前2485个图块(序列中的第70个三角形编号)，此时y坐标为0的顶部图块以70的增量增加，直到我们得到另一组具有三角形编号属性的图块。</p><p id="92b8" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">除非你边读边画一个70 x 120的格子，否则这可能会有些混乱。我觉得实际的代码更容易理解，所以我将在上面概述的三个部分中介绍它(加上Tile 1的特例)。</p><p id="9186" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">平铺1 </strong></p><p id="275d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在我们的逻辑中是一个特例，位于X: 0，Y: 0，<em class="kf">行</em>等于0，<em class="kf">列</em>等于0。</p><p id="df66" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">图块2–2485</strong></p><p id="230f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">对于这些图块，我们使用while循环来查找大于图块数减1的数(<em class="kf"> tempId </em>)。这个循环修改两个变量，<em class="kf"> ind </em>和<em class="kf"> bigger </em>，两个变量都被初始化为0。对于每个循环，我们首先将<em class="kf"> ind </em>加1，然后将<em class="kf"> bigger </em>计算为<em class="kf"> ind </em>加上<em class="kf"> bigger </em>(我们计算的是三角形数减去行数加1)。当<em class="kf">大于</em>小于<em class="kf"> tempId </em>时，我们继续循环。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ks"><img src="../Images/f65d3f3a3752d139748cec0b01989407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_4HVd9Bsr1Mmagk-ss_Mg.png"/></div></div></figure><p id="0d6f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">此时，如果<em class="kf">大于</em>等于<em class="kf"> tempId </em>我们知道<em class="kf">行</em>等于<em class="kf"> ind、</em>和<em class="kf">列</em>为零。否则，<em class="kf">行</em>等于<em class="kf">大</em>减<em class="kf"> tempId </em>减1，<em class="kf">列</em>等于<em class="kf"> tempId </em>加<em class="kf"> ind </em>减<em class="kf">大</em>。</p><p id="ec58" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">瓷砖2486–5985</strong></p><p id="d495" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是简单的部分，直接的人工。我们使用Solidity进行整数运算的方式将<em class="kf"> ind </em>计算为(图块数减1减2485) / 70。在其他编程语言中，这相当于上下限或下舍入计算。然后我们计算出<em class="kf">大于</em>为2485加上<em class="kf"> ind </em> * 70。如果<em class="kf">大于</em>等于瓦片数减1，<em class="kf">行</em>为69，<em class="kf">列</em>等于<em class="kf"> ind </em>加1。否则，列等于块号减<em class="kf">大</em>加<em class="kf">小</em>，行等于<em class="kf">大</em>加69减块号减1<em class="kf">。</em></p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kt"><img src="../Images/2b6fcb5e085ba52d4935521abc641a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vUNApOW0M-nbKcM7ob04dw.png"/></div></div></figure><p id="8425" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">瓷砖5486–8400</strong></p><p id="aa16" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们又回到了三角数。我们再次使用变量<em class="kf"> ind </em>和<em class="kf"> bigger </em>，初始值分别为0和5985。在我们的循环中，我们再次增加<em class="kf"> ind </em>，然后将bigger计算为<em class="kf">bigger</em>plus(70—<em class="kf">ind</em>),而<em class="kf"> bigger </em>小于图块编号减1 ( <em class="kf"> tempId </em>)。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ku"><img src="../Images/92b7dd24bcc0e8d00ac1e3e31541852c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nSdzE_GtkkEvV8PytWOFQQ.png"/></div></div></figure><p id="ca1a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果<em class="kf">大于</em>等于<em class="kf"> tempId </em>，则列等于<em class="kf"> ind </em>加51，<em class="kf">行等于</em>69。否则，列等于120加上<em class="kf"> tempId </em>减去<em class="kf"> bigger </em>，而<em class="kf">行</em>等于<em class="kf"> bigger </em>加上<em class="kf"> ind </em>减去<em class="kf"> tempId </em>减1。</p><p id="5580" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">瓷砖10，001–18，396(如果存在)</strong></p><p id="7af8" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们从瓷砖数中减去10，000，并使用上面的数学方法。您会注意到编号为18，397–18，400的分块是不存在的，我们将在详细介绍查找相邻分块和合并分块功能时讨论这一点。</p><p id="00b1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">瓷砖20，001–28，376(如果存在)</strong></p><p id="956f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们从图块编号中减去20，000，并使用函数来确定图块1–8，400的位置。像瓷砖18，397–18，400一样，瓷砖编号28，377及以上不能存在。</p><p id="c588" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">确定坐标和尺寸</strong></p><p id="b167" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了确定图块的(x，y)坐标，我们将行和列都乘以50。图块编号1-8，400的尺寸为50 x 50像素，图块编号10，001-18，396的尺寸为100 x 100像素，图块编号20，000以上的尺寸为200 x 200像素。</p><p id="cd9f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">最终注释</strong></p><p id="81b1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">正如您可能注意到的，函数<em class="kf"> tileDescriptionArray </em>中的循环不是气体最优的。由于这只是作为一个视图函数使用，我们选择在这个函数中保持简单的逻辑。在<a class="ae ke" href="https://21mmpixels.com" rel="noopener ugc nofollow" target="_blank">21mp xels</a>合同中的<em class="kf"> _adjacentTiles </em>函数既用于视图函数，也用于<em class="kf">合并Tiles </em>和<em class="kf">取消合并Tiles </em>函数。虽然查找相邻图块的逻辑类似于确定图块的位置，但我们做了某些更改，以便最大限度地减少气体使用，并使气体使用在整个图块编号范围内更加一致。我们将在下一篇文章中讨论<em class="kf"> _adjacentTiles </em>的确定。</p><blockquote class="kv"><p id="dcf2" class="kw kx ht bd ky kz la lb lc ld le kd ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="87e7" class="lf lg ht bd lh li lj lk ll lm ln lo lp jr lq lr ls jv lt lu lv jz lw lx ly lz dt translated">另外，阅读</h2><ul class=""><li id="5c1c" class="ma mb ht jk b jl mc jo md jr me jv mf jz mg kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/3commas-review-an-excellent-crypto-trading-bot-2020-1313a58bec92">3商业评论</a> | <a class="ae ke" href="https://coincodecap.com/pionex-review-exchange-with-crypto-trading-bot" rel="noopener ugc nofollow" target="_blank"> Pionex评论</a> | <a class="ae ke" rel="noopener" href="/coinmonks/coinrule-review-2021-a-beginner-friendly-crypto-trading-bot-daf0504848ba"> Coinrule评论</a></li><li id="5e23" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/ledger-vs-ngrave-zero-7e40f0c1d694">莱杰vs n rave</a>|<a class="ae ke" rel="noopener" href="/coinmonks/ledger-nano-s-vs-x-battery-hardware-price-storage-59a6663fe3b0">莱杰nano s vs x </a> | <a class="ae ke" rel="noopener" href="/coinmonks/binance-review-ee10d3bf3b6e">币安评论</a></li><li id="d367" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/bybit-exchange-review-dbd570019b71"> Bybit Exchange审查</a> | <a class="ae ke" href="https://coincodecap.com/bityard-reivew" rel="noopener ugc nofollow" target="_blank"> Bityard审查</a> | <a class="ae ke" href="https://coincodecap.com/jet-bot-review" rel="noopener ugc nofollow" target="_blank"> Jet-Bot审查</a></li><li id="f819" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/3commas-vs-pionex-vs-cryptohopper-best-crypto-bot-6a98d2baa203">3 commas vs crypto hopper</a>|<a class="ae ke" rel="noopener" href="/coinmonks/earn-crypto-interest-b10b810fdda3">赚取加密利息</a></li><li id="41d3" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated">最好的比特币<a class="ae ke" rel="noopener" href="/coinmonks/hardware-wallets-dfa1211730c6">硬件钱包</a> | <a class="ae ke" rel="noopener" href="/coinmonks/bitbox02-review-your-swiss-bitcoin-hardware-wallet-c36c88fff29"> BitBox02回顾</a></li><li id="ea87" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/blockfi-vs-celsius-vs-hodlnaut-8a1cc8c26630">BlockFi vs Celsius</a>|<a class="ae ke" rel="noopener" href="/coinmonks/hodlnaut-review-best-way-to-hodl-is-to-earn-interest-on-your-bitcoin-6658a8c19edf">Hodlnaut点评</a> | <a class="ae ke" href="https://coincodecap.com/kucoin-review" rel="noopener ugc nofollow" target="_blank"> KuCoin点评</a></li><li id="89d7" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/bitsgap-review-a-crypto-trading-bot-that-makes-easy-money-a5d88a336df2"> Bitsgap审查</a> | <a class="ae ke" rel="noopener" href="/coinmonks/quadency-review-a-crypto-trading-automation-platform-3068eaa374e1"> Quadency审查</a> | <a class="ae ke" rel="noopener" href="/coinmonks/bitbns-review-38256a07e161"> Bitbns审查</a></li><li id="b4ed" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a> | <a class="ae ke" rel="noopener" href="/coinmonks/coinmama-review-ace5641bde6e"> Coinmama审核</a></li><li id="fb36" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度的加密交易所</a> | <a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-savings-account-e65b13f92451">比特币储蓄账户</a></li><li id="0c1a" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" href="https://coincodecap.com/okex-kucoin" rel="noopener ugc nofollow" target="_blank"> OKEx vs KuCoin </a> | <a class="ae ke" href="https://coincodecap.com/celsius-alternatives" rel="noopener ugc nofollow" target="_blank">摄氏替代品</a> | <a class="ae ke" href="https://coincodecap.com/buy-vechain" rel="noopener ugc nofollow" target="_blank">如何购买VeChain </a></li><li id="e31b" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" href="https://coincodecap.com/binance-futures-trading" rel="noopener ugc nofollow" target="_blank">币安期货交易</a>|<a class="ae ke" href="https://coincodecap.com/mudrex-3commas-etoro" rel="noopener ugc nofollow" target="_blank">3 commas vs Mudrex vs eToro</a></li><li id="2801" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" href="https://coincodecap.com/buy-monero" rel="noopener ugc nofollow" target="_blank">如何购买Monero </a> | <a class="ae ke" href="https://coincodecap.com/idex-review" rel="noopener ugc nofollow" target="_blank"> IDEX评论</a> | <a class="ae ke" href="https://coincodecap.com/bitkan-trading-bot" rel="noopener ugc nofollow" target="_blank"> BitKan交易机器人</a></li><li id="777e" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/coindcx-review-8444db3621a2"> CoinDCX评论</a> | <a class="ae ke" href="https://coincodecap.com/crypto-margin-trading-exchanges" rel="noopener ugc nofollow" target="_blank">加密保证金交易交易所</a></li><li id="df3d" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" href="https://coincodecap.com/red-dog-casino-review" rel="noopener ugc nofollow" target="_blank">红狗赌场评论</a> | <a class="ae ke" href="https://coincodecap.com/swyftx-review" rel="noopener ugc nofollow" target="_blank"> Swyftx评论</a> | <a class="ae ke" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank"> CoinGate评论</a></li><li id="b6fa" class="ma mb ht jk b jl ml jo mm jr mn jv mo jz mp kd mh mi mj mk dt translated"><a class="ae ke" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap点评</a> | <a class="ae ke" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li></ul></div></div>    
</body>
</html>