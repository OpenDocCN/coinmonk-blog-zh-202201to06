<html>
<head>
<title>How to improve algorithmic trading’s win rate by machine learning: Labeling Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过机器学习提高算法交易的胜率:标记数据</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-improve-algorithmic-tradings-win-rate-by-machine-learning-labeling-data-9186017b5c61?source=collection_archive---------1-----------------------#2022-02-08">https://medium.com/coinmonks/how-to-improve-algorithmic-tradings-win-rate-by-machine-learning-labeling-data-9186017b5c61?source=collection_archive---------1-----------------------#2022-02-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><blockquote class="iq ir is"><p id="ec1c" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">如果您想最大限度地提高性能，请在开始开发之前阅读1DES博客上的这些"<a class="ae js" href="https://1des.com/blog/topics/how-to" rel="noopener ugc nofollow" target="_blank"> How to </a>"文章。</p></blockquote><p id="5a56" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">在交易自动化的时代，算法交易已经成为各种人和公司获取利润的流行方法。好处是，你可以运行一个基于算法的机器人来为你执行交易，并在多个市场中赚取利润。然而，由于市场上出现的不同情况，许多算法的胜率可能很低，这使得你的算法效率低下，毫无用处。这时，机器学习可能有助于解决这个问题，并实现潜在利润的最大化。</p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div class="fe ff jw"><img src="../Images/6b1df5f480af6dedd59bf06f834dc254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*QcBJUrUoYuFtsBJZVKSjfQ.jpeg"/></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">Algorithmic Trading</figcaption></figure><p id="2091" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">在来自<a class="ae js" href="https://1des.com/" rel="noopener ugc nofollow" target="_blank"> 1DES </a>的这一系列文章中，我们将检验机器学习是否能够提高算法策略在币安BTC/USDT市场上的胜率。</p><p id="0fe5" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">这将通过使用1H OHLC历史数据来完成。</p><p id="791c" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">首先，我们使用Python回溯测试库来计算算法策略的胜率。接下来，我们在相同的数据和时间线上使用机器学习模型来提高我们的胜率。</p><p id="751d" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">在本实验中，我们将关注这3个方面:</p><p id="1b9c" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">第1部分:标签数据</p><p id="0b51" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">第2部分:特性选择</p><p id="497d" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">第3部分:比较回溯测试结果和训练</p><h1 id="ac20" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">第1部分:标记数据</h1><p id="69a6" class="pw-post-body-paragraph it iu ht iw b ix lg iz ja jb lh jd je jt li jh ji ju lj jl jm jv lk jp jq jr hm dt translated">谈到加密货币市场，可能有许多算法策略需要考虑。我们将使用被称为“移动平均交叉”的简单而流行的策略来简化问题。当短期SMA在长期SMA上方交叉时，这是买入信号，因为它表明趋势在向上移动。与此同时，当短期均线穿过长期均线下方时，这是卖出信号，因为它表明趋势正在向下变化。在这个例子中使用了币安BTC/USDT 1小时时间框架的收盘价的SMA9和SMA20。</p><p id="5e65" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">我们的实验将在Jupyterlab环境中实现。克隆<a class="ae js" href="https://github.com/the1des/crypto_labeling_data" rel="noopener ugc nofollow" target="_blank"> crypto_labeling_data </a>库并运行<a class="ae js" href="https://github.com/the1des/crypto_labeling_data/blob/main/labeling_data.ipynb" rel="noopener ugc nofollow" target="_blank"> labeling_data.ipynb </a>以便更好地理解。</p><p id="3be8" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated"><strong class="iw hu">模块[1–3]</strong></p><p id="b989" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">首先，我们来探究一下数据。除了2017年8月17日至2021年11月10日的币安1小时OHLCV数据，我们还增加了几个指标</p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff ll"><img src="../Images/8b8c92a64349e016b72a8989fb402344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yrqWrlBpIsWGZNGu"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">data</figcaption></figure><p id="2f58" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated"><strong class="iw hu">模块[4–8]</strong></p><p id="1668" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">现在，让我们根据SMA交叉策略来标记我们的数据。为了证明当SMA9 &gt; SMA20时是买入信号，所以我们将数据标记为“target_long ”,另一方面，当SMA9 &lt; SMA20时是卖出信号，所以我们将数据标记为“target_short”。</p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff lq"><img src="../Images/d05f5395ea133b1cf0866ddbda6c4019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0c8fbsscWSJtW3Iq"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">crossover strategy</figcaption></figure><p id="4e5d" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">然后我们将使用pyplot库可视化数据。长标签在绿点上，短标签在红点上。SMA9和SMA20分别是蓝色和黄色的线。因此，我们对数据的分布有了很好的了解。下图显示了部分情节。</p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div class="fe ff lr"><img src="../Images/a5235e9c30455f52748431a10396053c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/0*DiKgZK0cF1L7Viql"/></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">result plot</figcaption></figure><p id="1d89" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated"><strong class="iw hu">区块[9–13]</strong></p><p id="afad" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">回溯测试库提供了一个名为Strategy的类，允许您创建自己的策略来打开和关闭多头和空头头寸。我们的策略是当我们到达一个“牛市”目标时开仓，当我们到达一个“熊市”点时平仓。对于空头头寸，应该反过来做。我们的数据集有两个额外的列，称为“bull”和“bear ”,与交叉策略中的“target_long”和“target_short”相同，但是如果您希望使用不同的标注策略，您可以将数据标记为bull或bear。这样，每当我们改变我们的标记策略时，我们不必改变我们的回溯测试策略。</p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/714c1fd5fa3ca7eead74da70efa09dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/0*LvuFzdDb-C0DA-0C"/></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">strategy</figcaption></figure><p id="04fa" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">准备好回溯测试函数和标记数据后，让我们运行回溯测试来计算我们的交叉策略胜率:</p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div class="fe ff lt"><img src="../Images/bf7309a101d7ce851f8c290f6d69bc5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/0*nC1al_ZS4hvWLUKF"/></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">backtest</figcaption></figure><p id="b0d9" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">根据1394笔交易，我们的胜率是36.08%，没有你想象的那么高。我们想发现的是机器学习如何提高我们的胜率。一种方法是将这些标签和一些特征直接输入机器学习模型，看看是否有助于改进它们。但问题是，当我们在标签中有这么多错误时，这意味着我们正在向我们的模型输入错误的数据，我们不能期望更好的结果。</p><p id="5972" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated"><strong class="iw hu">第14-19街区</strong></p><p id="5aa1" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">为了修正我们的标签，我们应该去掉那些在我们开仓买入或卖出时给我们带来损失的标签。这是通过逐个迭代我们的标签，模拟我们的回溯测试策略，并在标签给我们带来损失时改变标签来实现的。</p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/6635055f11f6d28b8d3016702788ba4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/0*_W83xX59nghakCkR"/></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">changing the label</figcaption></figure><p id="86de" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">一旦错误的标签被移除，我们应该能够以100%的成功率再次运行回溯测试。为了验证这一点，我们准备了校正后的数据集，并重复了与主策略相同的过程。</p><p id="dc69" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">如你所见，我们的标签已被成功更正。这给了我们一个很好的干净的数据集来输入我们的机器学习模型。</p><p id="fcce" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je jt jg jh ji ju jk jl jm jv jo jp jq jr hm dt translated">在下一篇文章中，我们将讨论如何根据我们的策略找到合适的特征，然后在这些特征上训练我们的模型，看看我们是否可以提高胜率。</p><blockquote class="lv"><p id="eb61" class="lw lx ht bd ly lz ma mb mc md me jr ek translated">加入Coinmonks <a class="ae js" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae js" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="594f" class="mf kj ht bd kk mg mh mi ko mj mk ml ks jt mm mn kw ju mo mp la jv mq mr le ms dt translated">也阅读</h2><div class="mt mu fm fo mv mw"><a href="https://coincodecap.com/top-3-gaming-tokens-to-look-out-for-in-february-2022" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">2022年2月值得关注的三大游戏代币| CoinCodeCap</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">排名前3位的游戏也占交易总量的85%以上。Defi王国、Axie Infinity和Pegaxy…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">coincodecap.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk kc mw"/></div></div></a></div><div class="mt mu fm fo mv mw"><a href="https://coincodecap.com/best-swap-platforms" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">2022年最佳加密交换平台| CoinCodeCap</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">随着时间的推移，我们大多数人将转向dex以获得更好的安全性和隐私。因此。在这里，我们将讨论…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">coincodecap.com</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk kc mw"/></div></div></a></div><div class="mt mu fm fo mv mw"><a href="https://coincodecap.com/best-online-casinos" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">10大最佳在线赌场|赢得并赢取免费BTC 2022 | CoinCodeCap</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">接收、支付和赚取加密货币| |有各种各样的最佳在线赌场可供选择，有可能…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">coincodecap.com</p></div></div><div class="nf l"><div class="nm l nh ni nj nf nk kc mw"/></div></div></a></div><div class="mt mu fm fo mv mw"><a rel="noopener follow" target="_blank" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">2021年最佳加密借贷平台| 6大比特币借贷平台</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">获得比特币和其他加密货币的最佳贷款利率</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">medium.com</p></div></div><div class="nf l"><div class="nn l nh ni nj nf nk kc mw"/></div></div></a></div><div class="mt mu fm fo mv mw"><a rel="noopener follow" target="_blank" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">2021年6大最佳硬件钱包|顶级加密硬件钱包[更新]</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">最好的加密货币硬件钱包是绝对必要的。我们将在NGRAVE、Ledger Nano X和…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">medium.com</p></div></div><div class="nf l"><div class="no l nh ni nj nf nk kc mw"/></div></div></a></div><div class="mt mu fm fo mv mw"><a rel="noopener follow" target="_blank" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">加密交易机器人——19款最佳免费加密交易机器人</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">2022年币安、比特币基地、库币和其他密码交易所的最佳密码交易机器人。四进制，位间隙…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">medium.com</p></div></div><div class="nf l"><div class="np l nh ni nj nf nk kc mw"/></div></div></a></div><div class="mt mu fm fo mv mw"><a rel="noopener follow" target="_blank" href="/coinmonks/best-crypto-signals-telegram-5785cdbc4b2b"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">最佳4个加密交易信号电报通道</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">这是乏味的找到正确的加密交易信号提供商。因此，在本文中，我们将讨论最好的…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">medium.com</p></div></div><div class="nf l"><div class="nq l nh ni nj nf nk kc mw"/></div></div></a></div><div class="mt mu fm fo mv mw"><a href="https://coincodecap.com/bitsgap-review" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd hu fv z el nb eo ep nc er et hs dt translated">Bitsgap评论-交易机器人加密信号和套利2022</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">这篇文章的重点是Bitsgap审查，这是一个最终的交易解决方案，并提供交易机器人，信号…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">coincodecap.com</p></div></div><div class="nf l"><div class="nr l nh ni nj nf nk kc mw"/></div></div></a></div></div></div>    
</body>
</html>