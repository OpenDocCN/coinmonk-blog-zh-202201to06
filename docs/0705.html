<html>
<head>
<title>The Basics of Public Key Cryptography</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">公钥加密的基础</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/the-basics-of-public-key-cryptography-3f7a8732a072?source=collection_archive---------8-----------------------#2022-02-15">https://medium.com/coinmonks/the-basics-of-public-key-cryptography-3f7a8732a072?source=collection_archive---------8-----------------------#2022-02-15</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="1fa7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要在以太网上发送事务，您需要一个签名的事务:一个由私钥签名的事务。无论您使用哪种类型的wallet(例如，硬件wallet、秘密恢复短语、密钥库文件)，都始终使用私钥对事务进行签名，该私钥来自您的硬件wallet、秘密恢复短语或密钥库文件(除非您已经在使用普通私钥)。</p><p id="74c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">除了私钥，你还需要一个公钥，因为以太坊使用的是非对称加密(也称为公钥加密<em class="jo"> - </em>)。这是一种加密技术，你有一对密钥:一个私钥和一个公钥。但是，当你想向某人发送资金时，你需要他们的<em class="jo">地址</em>，这不同于公钥(或私钥)。在本文中，我将解释私钥、公钥和地址之间的区别，以及它们是如何联系在一起的。</p><h1 id="e22a" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">不同类型的加密技术</h1><p id="8bc2" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">让我们从密码学的基础知识开始。本质上有三种不同的类型:</p><ul class=""><li id="d031" class="ks kt ht is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la dt translated">对称加密(或密钥加密)</li><li id="f343" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">非对称加密(或公钥加密)</li><li id="1510" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">加密哈希函数(我们不会在本文中详细讨论这种类型的加密，但是如果你感兴趣，我推荐你阅读<a class="ae lg" href="https://en.wikipedia.org/wiki/Cryptographic_hash_function" rel="noopener ugc nofollow" target="_blank">维基百科页面</a>。)</li></ul><p id="c170" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">使用对称加密，您只有一个(秘密)密钥。您可以使用该密钥加密数据，然后使用同一密钥解密该数据。要与其他人共享数据，您和接收者都必须能够访问同一个密钥。对称加密的一个用例是保护您的敏感数据，例如，通过使用BitLocker 对您的计算机驱动器进行<a class="ae lg" href="https://support.mycrypto.com/staying-safe/encrypting-your-windows-pc-with-bitlocker" rel="noopener ugc nofollow" target="_blank">加密。重要的是要将这个密钥保密(顾名思义)，否则任何知道它的人都可以访问您的敏感数据。</a></p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lh"><img src="../Images/e85ed6cc7c5584ba6dc5989034494148.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sAVNPqd1UZUE86Bwo9-Y_g.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Symmetric encryption: Encrypting and decrypting data using a single secret key.</figcaption></figure><p id="ef5f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与对称加密相比，非对称加密涉及一对密钥:一个私钥和一个公钥。数据使用公钥加密，只能用相应的私钥解密。换句话说，发送者只需要接收者的公钥，接收者就可以用他们的私钥解密数据。你只需要把私钥保密，把公钥分享给别人就可以了。</p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lh"><img src="../Images/1fb9f0e2a5c4158bbb14d2b6ae6a7963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ewt78XmKUavgPj8pCrjYFw.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Asymmetric encryption: Encrypting and decrypting data with separate public and private keys.</figcaption></figure><p id="5f94" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">例如，非对称加密可用于在双方之间共享敏感信息。事实上，您用来阅读本文的网站使用了非对称加密技术:HTTPS是基于非对称加密技术的。在以太坊中，它更常用于签署数据，而不是加密数据。这使得有人可以在不暴露私钥本身的情况下验证您是否拥有私钥。</p><h1 id="eb9c" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">非对称加密和以太坊</h1><p id="ebe4" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">正如上面简要解释的，非对称加密在以太坊中用于发送交易和签署消息。当您向网络发送事务时，您不希望在事务中包含您的私钥。因此，相反，该事务包括一些证明您可以访问私钥的证据。这是为了让网络在不暴露您的私钥的情况下验证您的余额(或特定消息)。</p><p id="890c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊使用椭圆曲线加密(ECC):基于椭圆曲线的加密，特别是使用椭圆曲线数字签名算法(ECDSA)和secp256k1椭圆曲线。ECDSA是一种专门用于签名和验证数据以及从签名中恢复公钥的算法。</p><p id="b4e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当您想要发送一个事务时，首先对整个事务进行签名，产生一个签名<code class="eh lx ly lz ma b">{r, s, v}</code>。该签名被添加到交易中，然后可以被广播到网络。交易不包括发送地址<em class="jo">。</em>相反，使用ECDSA从签名中恢复地址。</p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lh"><img src="../Images/0668e39b2a083cfac7ebf1c6165becaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xuFPHOTZ9xfqkzfhZ5W4ow.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Asymmetric cryptography in Ethereum: A transaction is signed with a private key, and the public key is recovered from the signature (simplified).</figcaption></figure><p id="1b91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这样，我们可以在以太坊上安全地发送交易(或签署消息)，而不会暴露我们的私钥。</p><h1 id="2415" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">如何创建密钥</h1><p id="7ee8" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">私钥可以从其他来源(如秘密恢复短语或硬件钱包)获得，也可以使用强大的<a class="ae lg" href="https://en.wikipedia.org/wiki/Cryptographically-secure_pseudorandom_number_generator" rel="noopener ugc nofollow" target="_blank">密码安全伪随机数发生器(CSPRNG) </a>随机生成。私钥本质上是一个随机的32字节(256位)数。但是，它确实有一些要求:</p><ul class=""><li id="45d7" class="ks kt ht is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la dt translated">私钥不能为0。</li><li id="c85d" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">私钥必须小于曲线的阶数(<code class="eh lx ly lz ma b">n</code>)。这基本上是椭圆曲线上的最大点数。</li></ul><p id="bbc5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要生成私钥，您可以简单地取一个随机的32字节数(由强CSPRNG生成)，并检查上面的要求。如果满足了这些要求，您现在就拥有了一个有效的私钥。</p><p id="b977" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">获取公钥涉及椭圆曲线数学，基于私钥。公钥不是随机生成的，而是通过将私钥与椭圆曲线上的基点(<code class="eh lx ly lz ma b">G</code>)相乘来计算的。这在椭圆曲线上产生了一个新的点，这就是公钥。这种乘法是单向运算，所以不可能从公钥计算出私钥。</p><h2 id="7922" class="mb jq ht bd jr mc md me jv mf mg mh jz jb mi mj kd jf mk ml kh jj mm mn kl mo dt translated">公钥和地址</h2><p id="0e27" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">一个常见的误解是，公钥与以太坊中的地址相同。然而，它们是两码事，并且地址是从公钥导出的。</p><p id="7b42" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">未压缩公钥的长度为65字节(<code class="eh lx ly lz ma b">0x04 || uncompressed public key</code>)，压缩公钥的长度为33字节(<code class="eh lx ly lz ma b">0x02 or 0x03 || compressed public key</code>)。不同的是，未压缩的公钥包含椭圆曲线上该点的<code class="eh lx ly lz ma b">y</code>值，压缩的公钥不包含。使用未压缩的公钥可以加快计算速度，但代价是增加存储空间。第一个字节是公钥头，它决定了密钥是压缩的还是未压缩的。对于压缩的公钥，第一个字节也决定了奇偶性，因为一个<code class="eh lx ly lz ma b">x</code>坐标在椭圆曲线上有多个<code class="eh lx ly lz ma b">y</code>值。</p><p id="32f3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了从公钥到地址，我们采用压缩的公钥，省略第一个头字节(以获得32字节长的公钥)，并使用Keccak-256对其进行散列。然后，取最后20个字节，就是地址。</p><p id="d612" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">给定以下私钥:</p><p id="a2b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh lx ly lz ma b">0xeaf2c50dfd10524651e7e459c1286f0c2404eb0f34ffd2a1eb14373db49fceb6</code></p><p id="5e95" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">使用椭圆曲线点乘，我们得到以下(未压缩的)公钥:</p><p id="751c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh lx ly lz ma b">0x04b884d0c53b60fb8aafba20ca84870f20428082863f1d39a402c36c2de356cb0c6c0a582f54ee29911ca6f1823d34405623f4a7418db8ebb0203bc3acba08ba64</code></p><p id="fb52" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后我们用Keccak-256对此进行哈希运算，结果是:</p><p id="75e4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh lx ly lz ma b">0xf0d03901469804f101fd1c62c6d5a3c98ec9073b54fa0969957bd582e8d874bf</code></p><p id="606c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最后，我们取最后20个字节(40个字符)，得到以下地址:</p><p id="1f12" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh lx ly lz ma b">0xc6D5a3c98EC9073B54FA0969957Bd582e8D874bf</code></p><p id="9a93" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">地址比公钥短，但仍然为在以太坊上发送交易提供足够的唯一性和安全性。</p><h2 id="608a" class="mb jq ht bd jr mc md me jv mf mg mh jz jb mi mj kd jf mk ml kh jj mm mn kl mo dt translated">私钥与硬件钱包、秘密恢复短语和密钥库文件</h2><p id="d6f3" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">当使用硬件钱包、秘密恢复短语或密钥库文件时，仍然使用私钥对事务进行签名。您不能直接使用类似秘密恢复短语的东西来签署交易。在这些情况下，私钥是从硬件钱包、秘密恢复短语或密钥库文件中派生出来的，而密钥库文件本身就包含一系列加密函数。</p><p id="8872" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当使用类似于<a class="ae lg" href="https://mycrypto.com/" rel="noopener ugc nofollow" target="_blank"> MyCrypto </a>或硬件钱包的东西时，这个推导步骤总是在幕后完成。在硬件钱包的情况下，派生发生在设备本身，因此私钥(或秘密恢复短语)永远不会离开设备。对于秘密恢复短语，派生由MyCrypto根据您选择的派生路径在本地完成。最后，您将总是得到一个由私钥和公钥组成的密钥对，以及相应的地址。</p><h1 id="de0f" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">结论</h1><p id="442d" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">要在以太坊上发送交易，您需要一个密钥对，由一个私钥和一个公钥组成。访问帐户的其他方法也可以用于在以太坊上发送交易，但在幕后，需要一个私钥(和公钥，地址)来签署交易。</p><p id="89b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">使用非对称加密(公钥加密)，我们可以通过包含签名来安全地发送事务，而不会暴露私钥本身。通过使用椭圆曲线加密恢复公钥来验证交易，然后可以对公钥进行进一步哈希处理以获得实际的以太坊地址。</p><p id="a155" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对称加密和非对称加密的主要区别在于，前者只有一个密钥:秘密密钥。虽然不(通常)用于以太坊，但它有很多其他的可能性，比如保护敏感数据或在使用相同密钥的人之间共享数据。</p><blockquote class="mp"><p id="c1fc" class="mq mr ht bd ms mt mu mv mw mx my jn ek translated">加入Coinmonks <a class="ae lg" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae lg" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><ul class=""><li id="fd30" class="ks kt ht is b it mz ix na jb nb jf nc jj nd jn kx ky kz la dt translated"><a class="ae lg" href="https://coincodecap.com/huobi-trading-bot" rel="noopener ugc nofollow" target="_blank">火币交易机器人</a> | <a class="ae lg" href="https://coincodecap.com/buy-ada-cardano" rel="noopener ugc nofollow" target="_blank">如何购买ADA </a> | <a class="ae lg" href="https://coincodecap.com/geco-one-review" rel="noopener ugc nofollow" target="_blank"> Geco？一次审查</a></li><li id="6f16" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated"><a class="ae lg" href="https://coincodecap.com/binance-vs-bitstamp" rel="noopener ugc nofollow" target="_blank">币安vs比特邮票</a> | <a class="ae lg" href="https://coincodecap.com/bitpanda-coinbase-coinsbit" rel="noopener ugc nofollow" target="_blank">比特熊猫vs比特币基地vs Coinsbit </a></li><li id="037d" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated"><a class="ae lg" href="https://coincodecap.com/buy-ripple-india" rel="noopener ugc nofollow" target="_blank">如何购买Ripple (XRP) </a> | <a class="ae lg" href="https://coincodecap.com/crypto-exchange-africa" rel="noopener ugc nofollow" target="_blank">非洲最好的加密交易所</a></li><li id="3bbc" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated"><a class="ae lg" href="https://coincodecap.com/crypto-exchange-africa" rel="noopener ugc nofollow" target="_blank">非洲最佳密码交易所</a> | <a class="ae lg" href="https://coincodecap.com/hoo-exchange-review" rel="noopener ugc nofollow" target="_blank">胡交易所评论</a></li><li id="3dd4" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated"><a class="ae lg" href="https://coincodecap.com/etoro-robinhood" rel="noopener ugc nofollow" target="_blank">eToro vs robin hood</a>|<a class="ae lg" href="https://coincodecap.com/bybit-bityard-moonxbt" rel="noopener ugc nofollow" target="_blank">MoonXBT vs Bybit vs Bityard</a></li><li id="c239" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated"><a class="ae lg" href="https://coincodecap.com/stormgain-review" rel="noopener ugc nofollow" target="_blank">风暴增益评论</a> | <a class="ae lg" href="https://coincodecap.com/probit-review" rel="noopener ugc nofollow" target="_blank">普罗比特评论</a> | <a class="ae lg" rel="noopener" href="/coinmonks/kraken-review-6165fc1056ac">北海巨妖评论</a></li></ul></div></div>    
</body>
</html>