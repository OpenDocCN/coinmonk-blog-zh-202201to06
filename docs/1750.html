<html>
<head>
<title>IPFS in-depth</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IPFS深度</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ipfs-in-depth-87cfef633f2b?source=collection_archive---------14-----------------------#2022-03-05">https://medium.com/coinmonks/ipfs-in-depth-87cfef633f2b?source=collection_archive---------14-----------------------#2022-03-05</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="c303" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">首先，什么是IPFS？</h1><p id="e340" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">星际文件系统(IPFS)是由<strong class="jq hu">协议实验室和</strong> IPFS的项目驱动的一系列子协议，旨在提高网络的效率，使网络<strong class="jq hu">更加分散</strong>和有弹性。</p><p id="efdc" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS使用基于内容的寻址，内容不是通过位置而是通过其内容来寻址。IPFS利用其重复数据消除属性存储和寻址数据，从而实现数据的高效存储。它还可以用作补充区块链的存储服务，在IPFS的基础上实现不同的应用。</p><p id="7a10" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu">为什么它被称为星际文件系统？它产生的原因是什么？</strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff kr"><img src="../Images/93052bb53b3edef1d72be2c46e59a655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XSZDqgztMvDheII3"/></div></div></figure><p id="a472" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS最初是为了允许从任何地方访问文件而创建的——无论是火星还是任何其他星球</p><p id="0f12" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">好的，所以从火星到地球的通信是非常困难的，而且非常耗时，请求一个维基百科页面可能需要48分钟，非常耗时。(<a class="ae ld" href="https://blog.kalvad.com/myths-about-ipfs/Source%20https://marspedia.org/Internet" rel="noopener ugc nofollow" target="_blank">来源</a>)</p><p id="5646" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">所以这是创造IPFS的第一个原因，因为它的分布式存储系统可以弥补行星之间的差距。</p><p id="7461" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">例如，如果一个同事已经请求了Wiki页面Mars，你可以很容易地从他们那里下载，就像在地球上一样快。</p><h1 id="086a" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">首先，我们需要理解几个概念:</h1><p id="5da6" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated"><strong class="jq hu"> 1/集中式与分散式网络</strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff le"><img src="../Images/88f064fa5de0aaf635caea044ed92bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kt_tgTjxgHpoQm_G"/></div></div></figure></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><p id="2389" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu"> 2/基于位置的寻址</strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lm"><img src="../Images/fa8095a3ceb3b1bbd6e2bb7150901d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IU39GZD6FN7SzJ3m.png"/></div></div></figure><p id="7894" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu"> 3/基于内容的寻址:</strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff ln"><img src="../Images/46f03c45b7044997273d1699d42f63fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jrOG74g__OliMQwY.png"/></div></div></figure><p id="df43" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS是如何工作的？你到底是如何获取IPFS上的内容的？</p><p id="162e" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS是用于在分布式文件系统上存储内容的对等网络。</p><p id="23ae" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">称为<strong class="jq hu">节点</strong>的一组计算机/服务器，使用公共寻址系统存储和中继内容。</p><p id="dc46" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS节点使用点对点(P2P)架构通过互联网进行通信，<strong class="jq hu">防止一个节点成为单点故障。</strong></p><p id="31a2" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">libp2p是一个由<em class="lo">协议</em>、<em class="lo">规范</em>和<em class="lo">库</em>组成的模块化系统，支持开发对等网络应用<a class="ae ld" href="https://docs.libp2p.io/introduction/what-is-libp2p/" rel="noopener ugc nofollow" target="_blank"> — libp2p文档</a>。</p><p id="2bba" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">这正是四个IPFS节点连接到IPFS网络所需要的。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lp"><img src="../Images/e635107d258a19504f2377ab0cc0d456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cO6V6W6XPsN3fCpn.png"/></div></div></figure><p id="da51" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">我们与之保持连接的任何节点都是对等节点。</p><ul class=""><li id="f437" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated">任何对等节点<strong class="jq hu">都可以问它们的对等节点</strong>，它们想要一个番茄🍅内容。</li><li id="dae1" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">所以，如果你有，<strong class="jq hu">你会给</strong>🍅<strong class="jq hu">交给他们</strong>。</li><li id="2845" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">否则<strong class="jq hu">你可以给出一些关于网络</strong>的元数据来帮助他们找到可能拥有它的另一个对等点。</li><li id="ae11" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">注意，每个节点选择它们想要保存和存储的资源<strong class="jq hu">。</strong></li><li id="7332" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">示例:🍅将在不同的对等节点上可用，这些节点<strong class="jq hu">专用资源来存储它</strong>。</li><li id="f035" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">A🥔较少存在于网络中。所以，只有几个节点会提供它。</li></ul><p id="a354" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu">介绍IPFS网关</strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff kr"><img src="../Images/453e8cae94e3c23729c6c0d24f6b0a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*okrET8wGaWHhong0.png"/></div></div></figure><ul class=""><li id="0374" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated">网关是到IPFS节点的HTTP接口。</li><li id="f7c8" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">在我们的网关上，我们将允许任何用户从IPFS网络检索任意内容。</li><li id="07c5" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">如果用户要求一个<strong class="jq hu"> </strong>🍅内容，节点用<strong class="jq hu">与</strong>🍅会提供。同样的例子也适用于🥔。</li></ul><p id="2875" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu"> IPFS天体</strong></p><p id="b40d" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">链接结构有三个数据字段:</p><ul class=""><li id="fa5f" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated"><strong class="jq hu"> <em class="lo">名称</em> </strong> —链接的名称。</li><li id="1f68" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated"><strong class="jq hu"> <em class="lo">哈希</em> </strong> —链接的IPFS对象的哈希。</li><li id="1f95" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated"><strong class="jq hu"> <em class="lo">大小</em> </strong> —链接的IPFS对象的累积大小</li></ul><p id="e63c" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS对象通常通过它们的Base58编码哈希来引用。</p><p id="2152" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">例如:带hash的IPFS对象<strong class="jq hu">qmeksf 9 pmph 4 lajyg 3 fcbqddjckuefc 8 lhs 67 wrg 59d 51</strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff me"><img src="../Images/be16f338cf736a133a39acb12549021c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kRxYLUAFjfoxu0eA.png"/></div></div></figure></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="3039" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">发生了什么事？</h1><p id="e122" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">正如我们在下图中看到的，我们的Kalvad照片将被转换成一个二进制文件，然后使用IPFS技术这个二进制文件将被分割成不同的块。</p><p id="f234" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">每个块都有自己的哈希，称为CID(内容标识符)，按基本CID分组。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff kr"><img src="../Images/51bb5e139c7bd5e7dfda203347b874ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BHvBpKOpFqJy3Iuu.png"/></div></div></figure></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="96d8" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">让我们动手吧，安装步骤:</h1><p id="8224" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">所有的安装说明都可以在这里找到:<a class="ae ld" href="https://docs.ipfs.io/install/command-line/#official-distributions" rel="noopener ugc nofollow" target="_blank">https://docs . ipfs . io/install/command-line/# official-distributions</a></p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="034d" class="mp ir ht ml b fv mq mr l ms mt">wget <a class="ae ld" href="https://dist.ipfs.io/go-ipfs/v0.10.0/go-ipfs_v0.10.0_linux-amd64.tar.gz" rel="noopener ugc nofollow" target="_blank">https://dist.ipfs.io/go-ipfs/v0.10.0/go-ipfs_v0.10.0_linux-amd64.tar.gz</a></span></pre><p id="3afd" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">解压缩文件:</p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="f8f4" class="mp ir ht ml b fv mq mr l ms mt">tar -xvzf go-ipfs_v0.10.0_linux-amd64.tar.gz</span></pre><p id="8710" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">移动到go-ipfs文件夹并运行安装脚本:</p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="e5b1" class="mp ir ht ml b fv mq mr l ms mt">cd go-ipfs</span><span id="121e" class="mp ir ht ml b fv mu mr l ms mt">sudo bash install.sh</span></pre><p id="5dd2" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">测试IPFS安装是否正确:</p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="d3b5" class="mp ir ht ml b fv mq mr l ms mt">ipfs --version<br/>&gt; ipfs version 0.10.0</span></pre><h1 id="1a47" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">创造我们的第一个IPFS物体</h1><p id="7cb8" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">让我们介绍一下我们的文件夹:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff mv"><img src="../Images/710d50d9bbb651b99d7a532bf6bc2ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DkXuv-NpuWHpAxYr.png"/></div></div></figure><p id="1555" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">pizza.jpg复制的位置(在food文件夹和ipfs-data文件夹中</p><p id="1314" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">要将文件夹添加到IPFS网络中，我们必须运行以下命令:</p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="1159" class="mp ir ht ml b fv mq mr l ms mt">ipfs add ipfs-data -r</span></pre><p id="c6c3" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">标志-r进行递归相加，结果应该是这样的:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff kr"><img src="../Images/45ad82d10b109d138d03fa4ee32c495b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wLV4ZYuEhZNE--T7.png"/></div></div></figure><p id="2c17" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">qmp 4 fhpbgpnnaddlzgksfqd 9g 7 cagkoz 8 x 8y 3 TT 1 str GCF是ipfs-data/food/pizza.jpg的hash。</p><p id="6943" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">我们可以看到，两个pizza.jpg文件具有相同的哈希，这是因为我们使用基于内容的寻址，而不是基于位置的寻址，由于两张图片具有相同的内容，因此它们将具有相同的哈希。</p><p id="035d" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">让我们得到整个文件夹的IPFS对象:</p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="4694" class="mp ir ht ml b fv mq mr l ms mt">ipfs object get QmQG1gw59EhQ1PSTxjYrQuv5xhsWBpqwyH5VuBcVQZCxC6 |jq</span></pre><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff mw"><img src="../Images/614afba933d13c284593eb41fbc697ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kGDSPlR1mrk0c5gT.png"/></div></div></figure><p id="eb47" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">让我们深入了解我们的块是如何被分割的以及它们之间的联系，为此我们将使用graphmd。</p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="1f4d" class="mp ir ht ml b fv mq mr l ms mt">graphmd QmbFrXkhkYrgVSTTi6C4GbCofiyuDf2f8tMkxwrnyfHyfD | dot -Tpng &gt; tree.png</span></pre><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff mx"><img src="../Images/0a7c1563541486f9aeaf347f06e76259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ycb5jatebfKAv9jP.png"/></div></div></figure><p id="e44f" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">从前面的模式中，我们可以看到两个pizza.jpg文件都有指向相同散列的链接，这证实了它们具有相同的内容。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff my"><img src="../Images/92ebdba5f45291f1d45b4e9b5a9b9cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lKgrzf6lOpBarSw6.png"/></div></div></figure><p id="3729" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">现在让我们导航并查看我们的图片space.jpg，它具有哈希:<strong class="jq hu">qmqkwvtvdtxvt 9h 51 midmhqjqxdedsa 3 rot 3 tr 6 srso 9 pg</strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff mz"><img src="../Images/a2ead6be3db5e83e8b6b688463374e1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xw4h2B4FWQS1RDNu.png"/></div></div></figure><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="e7a5" class="mp ir ht ml b fv mq mr l ms mt">ipfs object get QmQkwvTvdtxVt9H51MidmhQJqXDEDSa3roT3Tr6Srso9pG | jq</span></pre><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff na"><img src="../Images/fd35b6150eb793413db192d9568fdffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SNJZQzRLVtb0x_wg.png"/></div></div></figure><p id="43d0" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">因此，space.jpg被分成5个256kb的块，第6个块中有142kb。</p><p id="a921" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">让我们使用ipfs cat只获取第一个带有hash的块<strong class="jq hu">qmnudn 3 azr 2 mqqz 4 e 77 nu 6 qwzgj 3 dlbv 768 fpoplggdgdh</strong>，并将其保存到space-part1.jpg:</p><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="7450" class="mp ir ht ml b fv mq mr l ms mt">ipfs cat QmNuDn3azR2mQQZ4e77NU6qwZgJ3dLbV768fPopLGgdGDh &gt; space-part1.jpg</span></pre><p id="8f38" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">当我们想象space-part1.jpg时，我们可以看到图像的一小部分，其余部分是空白的:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff kr"><img src="../Images/0640b9ad0dff7629406275223da20a02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DTgTaPzYJZUu9EMb.png"/></div></div></figure><h1 id="e921" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">IPFS集群</h1><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff nb"><img src="../Images/c80d207572e8ad68f27f10a6cf64101f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ozBJzbN68wJv-jax"/></div></div></figure><p id="f9ca" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS集群并不充当传统概念的集群，因为所有IPFS对等体都是独立的，而IPFS集群软件通过一致协议同步数据。</p><p id="744f" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">IPFS集群通过分配、复制和跟踪分布在多个对等体中的全局pin集，跨一大群IPFS守护进程提供数据协调。</p><p id="a06e" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">ipfs集群使用一个名为<em class="lo"> ipfs-cluster-service </em>的恶魔，它作为一个独立的服务运行，与IPFS守护进程的API进行交互。</p><p id="56d6" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">以一种<em class="lo">火&amp;忘记</em>的方式处理数百万个管脚到数百个IPFS守护进程的复制:异步跟踪管脚寿命</p><p id="cd1a" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">集群对等体负责要求IPFS以可持续的速率锁定cid，并在失败时重试锁定。</p><p id="1164" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">集群附带了一个全功能的API和CLI，<em class="lo"> ipfs-cluster-ctl </em>为全功能的集群HTTP REST API提供了一个命令行客户端。</p><p id="5608" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">集群对等体形成一个分布式网络，并维护一个全局的、复制的、无冲突的pin列表。</p><p id="0e68" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">群集还带有内置权限，提供了一个嵌入式权限模型，支持标准对等端(具有更改群集pin集的权限)和追随者对等端(按照指示存储内容，但不能修改pin集)。</p><p id="b203" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">请注意，每个引脚都支持自定义复制因子、名称和任何其他自定义元数据。</p></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="5abe" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">什么是Bitswap？</h1><p id="97da" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">Bitswap是IPFS的一个核心模块，用于交换数据块。它指导向网络中的其他对等体请求数据块和从网络中的其他对等体发送数据块。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/42eeba49088adffa17c62f9d93d43eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/0*2_znVqirfXCMde6y"/></div></figure><p id="e8bc" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">Bitswap是一个基于<em class="lo">消息的协议</em>，其中所有消息都包含<a class="ae ld" href="https://docs.ipfs.io/concepts/bitswap/#want-list" rel="noopener ugc nofollow" target="_blank">需求列表</a>或块。Bitswap有一个<a class="ae ld" href="https://github.com/ipfs/go-bitswap" rel="noopener ugc nofollow" target="_blank"> Go实现</a></p><p id="630c" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu"> Bitswap有两个主要工作:</strong></p><ul class=""><li id="f03e" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated">从网络获取客户端请求的块。</li><li id="9355" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">将它拥有的块发送给需要它们的其他对等体。</li></ul></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="0b79" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">误会！</h1><p id="6c88" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">IPFS不是一个你上传文件的地方，它是一个网络，你是其中的一部分，同时在IPFS上传文件会神奇地让互联网永远保存这些文件。</p><p id="2965" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu"> IPFS是永久网:</strong>你不应该把“永久”读成“永恒”，而应该读成“非临时”，和“永久地址”或“永久雇佣”是一个意思。<br/> HTTP是<em class="lo">临时的</em>，从这个意义上来说，你依靠一台服务器来<em class="lo">主动</em>继续为一个文件提供服务，使其保持可用。IPFS是永久的，因为只要文件存在于网络中的某个地方，每个人都可以使用它。#</p><p id="7e82" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu"> IPFS是web 3.0，将取代HTTP: </strong>首先，没有用户愿意设置一个完整的节点。IPFS网络上的人们现在是技术爱好者，然而，没有用户会想要处理散列。</p><p id="ff05" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu">在IPFS托管一个网站:</strong>用IPNS在IPFS托管一个网站简直太可怕了，而且一点也不用户友好。即使所有节点都锁定了我的站点，像Cloudflare这样的CDN服务也会更加有效和高效。</p><p id="ff13" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu">私人数据的IPFS:</strong>虽然你当然没有理由不能在IPFS上存储加密数据，但加密数据无法消除重复，也无法智能缓存，因为只有它的所有者知道它是什么。</p><p id="3fbd" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">结果是，在IPFS上访问加密数据并不比带有一些简单缓存的HTTP高效多少。</p><ul class=""><li id="6c28" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated">保证可用性</li><li id="583a" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">表演</li><li id="8a42" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">安全性</li></ul><h1 id="5217" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">同行说我有什么吗？</h1><p id="ca42" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">从一个节点请求被广告的内容的对等体可以检索该内容，并看到该节点具有该内容。</p><ul class=""><li id="5cc1" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated">网络上的每个IPFS节点都有一个唯一的公共标识符，称为<strong class="jq hu"> PeerID </strong>。</li><li id="9d5f" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">由于PeerID是长期存在的身份，因此有人可能会在存储公共IPFS元数据的分布式哈希表(DHT)中查找您的peer id。</li><li id="1975" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">DHT包含关于PeerIDs请求或提供的内容的元数据，</li></ul></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="1e39" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">IPFS集群的成本</h1><p id="266a" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">区块链上的存储非常昂贵。</p><p id="33e0" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu"> <em class="lo">复制:</em> </strong>我们希望复制因子为3，这意味着每个事务在3个不同的节点上至少有3个副本。</p><p id="6bff" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">我们将使用<a class="ae ld" href="https://www.scaleway.com/en/" rel="noopener ugc nofollow" target="_blank"> Scaleway </a>作为我们的云提供商。<br/>要为区块链配置专用IPFS集群，我们将需要3个节点:</p><ul class=""><li id="90a4" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated">3个虚拟机作为节点</li><li id="af83" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">专用负载平衡器</li><li id="cfeb" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">公共负载平衡器</li></ul><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff nd"><img src="../Images/12c171b2a26f77e9c113905fd0bacddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kei4Zo7mtIWEfL1O"/></div></div></figure><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff ne"><img src="../Images/3a866b99154fba932571ed3e63822ee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y5pWizE7sawiKG3c"/></div></div></figure><p id="4de6" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu">因此，1TB的存储成本将为每月99.25欧元，此后为每月255欧元。</strong></p></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="12a5" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">安全风险</h1><p id="0c18" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">不要通过基于路径的网关访问IPFS托管的网站，因为这完全绕过了同源策略。</p><p id="7462" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">不要被公开的<a class="ae ld" href="https://ipfs.github.io/public-gateway-checker/" rel="noopener ugc nofollow" target="_blank"> IPFS网关检查列表</a>上闪亮的✅误导。</p><p id="5674" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">CORS旁边的✅意味着网关通配符允许所有的CORS访问。这可能是一个安全问题。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff nf"><img src="../Images/0fc43ea1a931f443047e7c57ccd6c8ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6SNXafhnoreIMDt4"/></div></div></figure><p id="b7b0" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">请注意，公共网关可能默认为所有域启用CORS，允许一个CID与另一个CID的资源(以及为该CID存储的潜在数据)进行交互。</p><p id="03f8" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><strong class="jq hu">您信任网关会交付您请求的内容。</strong> - &gt;您的浏览器无法验证收到的内容是否存储在IPFS分布式文件系统中。</p><ul class=""><li id="3ca1" class="lq lr ht jq b jr km jv kn jz ls kd lt kh lu kl lv lw lx ly dt translated">您相信网关在将CID发送给您之前不会更改它。因此，我们只能<strong class="jq hu">推荐运行自托管网关</strong>。</li><li id="05d1" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">网关可能会保留您的连接详细信息和您请求的数据的协议。</li></ul></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="f57a" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">主要IPFS用户</h1><ul class=""><li id="9c3b" class="lq lr ht jq b jr js jv jw jz ng kd nh kh ni kl lv lw lx ly dt translated"><a class="ae ld" href="https://developers.cloudflare.com/distributed-web/ipfs-gateway" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hu"> Cloudflare </strong> </a> <strong class="jq hu">，</strong>运行分布式web网关，无需本地节点即可加速并安全访问IPFS。</li><li id="0665" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae ld" href="https://techcommunity.microsoft.com/t5/identity-standards-blog/ion-booting-up-the-network/ba-p/1441552" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hu">微软ION </strong> </a>，数字身份系统建立在比特币和IPFS的基础上，其目标是建立一种技术，允许在全球范围内创建一个安全且可扩展的数字身份系统。</li><li id="28cd" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae ld" href="https://brave.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jq hu"/></a>搜索引擎使用Origin协议和IPFS来托管其分散的商品商店。</li><li id="7804" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae ld" href="https://blog.ipfs.io/2020-03-30-ipfs-in-opera-for-android/" rel="noopener ugc nofollow" target="_blank"><strong class="jq hu">Opera para Android</strong></a>默认支持ipfs，允许移动用户通过ipfs: //链接访问IPFS网络上的数据。</li><li id="226c" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated">维基百科使用IPFS他们开发了一个他们网站的镜像，允许他们从被审查的司法管辖区访问维基百科。</li><li id="d8bf" class="lq lr ht jq b jr lz jv ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae ld" href="https://filecoin.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hu"> Filecoin </strong> </a>，使用IPFS创建基于IPFS的协同存储云。</li></ul></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="c632" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">在IPFS网络上部署卡尔瓦德的网站</h1><pre class="ks kt ku kv fq mk ml mm mn aw mo dt"><span id="b539" class="mp ir ht ml b fv mq mr l ms mt">ipfs add -r ./sample_website<br/>added QmaYZE5QQVR3TqQSL5WDcwuxUwBqczbMkmbHeoeNEAumbe sample_website/index.cssadded Qme5TzVW4en8HWP49N9nLHwUkAMhCn6zvWteoknmFDhwJg sample_website/index.htmladded QmThzr7LgYmUz6tfTArJK5tbrtidXSA12ZCL4ESy6HB8P2 sample_website/index.jsadded QmSYDncaMte6GPx5jC7kqeXWnrKsCp4nkLfQXPxiAKtECU sample_website/something.htmladded QmQ6HiGM7ikKgdyVuzfL7VukzaMCyxtNRnsnPu4nTPG9X3 sample_website 1.01 KiB / 1.01 KiB [=================================================] 100.00%</span></pre><p id="128f" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">最后一行打印的散列是整个目录的CID，因此也是我们网站的CID。我们可以看到托管在<br/><a class="ae ld" href="https://ipfs.io/ipfs/QmeUG2oZvyx4NzfpP9rruKbmV5UNDmTQ8MoxuhTJGVZVTW/" rel="noopener ugc nofollow" target="_blank">https://ipfs.io/ipfs/</a>QM ucf 47 vhn 8 pfuvjyfel 2 mwuaekn 2 twrqsfi 8 I 4 shcu 8 dz上的样本网站</p><p id="939f" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">我们已经完成了，请在IPFS网络中找到Kalvad的网站:</p><p id="c73c" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated"><a class="ae ld" href="https://ipfs.io/ipfs/QmUCF47VHN8PfUVjYfeL2MWUaeKN2twrQSfi8i4Shcu8dz/" rel="noopener ugc nofollow" target="_blank">https://ipfs . io/ipfs/QM ucf 47 vhn 8 pfuvjyfel 2 mwuaekn 2 twrqsfi 8 I 4 shcu 8 dz</a></p></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><h1 id="af6b" class="iq ir ht bd is it mf iv iw ix mg iz ja jb mh jd je jf mi jh ji jj mj jl jm jn dt translated">结论</h1><p id="0b4b" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">在这篇文章中，我们讨论了IPFS是什么，它是如何工作的，以及它产生的原因和代价。</p><p id="9b2c" class="pw-post-body-paragraph jo jp ht jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hm dt translated">无论你是否是IPFS的粉丝，这都是一个新的去中心化互联网基础设施的雄心勃勃的愿景，它可以用于许多不同的领域，如区块链。</p></div></div>    
</body>
</html>