<html>
<head>
<title>NFT Flashloan — — Ape coin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NFT闪贷— —猿币</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/nft-flashloan-ape-coin-d6065c7dd956?source=collection_archive---------5-----------------------#2022-06-01">https://medium.com/coinmonks/nft-flashloan-ape-coin-d6065c7dd956?source=collection_archive---------5-----------------------#2022-06-01</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/7b0551745a27a89c046f001ee1605b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zM4oe9M29xvws-7maaKZxA.jpeg"/></div></div></figure><p id="47c1" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">区块链和去中心化金融(DeFi)是相对较新的技术。这意味着两者在安全成熟度上都有一定的欠缺。最近，针对Defi项目的黑客攻击已经变得司空见惯，通常会给攻击者带来大量的加密货币。Flashloan攻击是一种有利于黑客充分利用DeFi world的流行方法。</p><p id="b606" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">5月30日，一只很有吸引力的NFT无聊猿以10 ETH的价格售出。买方在同一笔交易中以71便士的价格出售了猿猴，但最终只放弃了20便士。为什么他们的利润如此之低，他们是如何做到的？</p><p id="4b74" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> 0x01首先让我们回顾一下闪贷攻击</strong></p><p id="75e0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">简而言之，这是一种不用拿自己的钱冒险就有可能获得可观收益的方式。</p><p id="ce94" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">有时，前所未闻的快速贷款是有道理的。</p><p id="ae29" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">快速贷款可用于:</p><ul class=""><li id="849b" class="jz ka ht jd b je jf ji jj jm kb jq kc ju kd jy ke kf kg kh dt translated"><strong class="jd hu">套利</strong>:交易员可以通过寻找多个不同交易所的价格差异来赚钱。假设两个市场对披萨饼的定价不同。它在交易所A的定价为1美元，在交易所b的定价为2美元。用户可以使用闪贷，并调用一个单独的智能合约，在交易所A以100美元购买100个pizzacoins，然后在交易所b以200美元出售它们。然后借款人偿还贷款，并将差额装入口袋。</li><li id="97f3" class="jz ka ht jd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated"><strong class="jd hu">抵押品互换</strong>:快速将支持用户贷款的抵押品换成另一种类型的抵押品。</li><li id="f566" class="jz ka ht jd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated">更低的交易费用:从某种意义上说，快速贷款将通常需要几笔交易合并成一笔。每笔交易都要收费，因此快速贷款可能意味着更低的费用。</li><li id="7e91" class="jz ka ht jd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated"><strong class="jd hu">自我清算</strong></li></ul><p id="507f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> 0x02这是怎么回事？</strong></p><p id="a053" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">根据受害者说，他试图在105列表，非常不幸的是，这种情况发生了，但在一天结束时，在加密的世界里，有很多未知的危险，如果你不小心无情的地方。</p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div class="fe ff kn"><img src="../Images/e319afa30788dc602fe516d83fc8cfc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*sdTXT41NcYlcZdKgLHUn9g.png"/></div></figure><p id="37cd" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">下面是交易明细显示:</p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ks"><img src="../Images/e0c8dfe0554cb35d88972f23fc2a1900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96lUkTam21WaW55UUoTEGA.png"/></div></div></figure><p id="3ed0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">这里有很多信息，所以让我们来分解一下，看看发生了什么。</strong></p><p id="718e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><a class="ae kt" href="https://etherscan.io/tx/0x841c2ebe79887f86246354297298e3ef6d156d1e78a0965019556e7c32c41e41" rel="noopener ugc nofollow" target="_blank">https://ethers can . io/tx/0x 841 C2 ebe 79887 f 86246354297298 E3 ef 6d 156 D1 e 78 a 0965019556 e 7c 32 c 41 e 41</a></p><p id="c493" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">为了更清楚，让我们注意这些代表什么</p><ul class=""><li id="dd78" class="jz ka ht jd b je jf ji jj jm kb jq kc ju kd jy ke kf kg kh dt translated">0x9fb274 <strong class="jd hu"> : </strong>才是真正的买家</li><li id="2b08" class="jz ka ht jd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated">0x6c830a:是他们用来在一个事务中执行所有操作的契约</li><li id="6fd7" class="jz ka ht jd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated">dydx:是一个基于以太坊的去中心化借贷平台。它为加密用户提供借贷和赌博工具。</li><li id="5190" class="jz ka ht jd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated">F2是一个采矿池</li></ul><p id="ea27" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">首先，他们试图从dydx获得一笔快速贷款。因为闪贷是在同一笔交易中借了又还的贷款。它们经常被用于MEV进行无风险套利，并且只有在使用智能合约时才有可能。MEV:即使区块生产商根据最高天然气价格订购交易，也可以提取MEV。然而，MEV可以被视为区块生产者可以提取多少价值的上限，因为他们最终控制着区块内的最终交易排序。</p><p id="184a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">买家从dydx拿了48 wETH的闪贷(用0x6C8)。</p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ku"><img src="../Images/ef50ec1b80c0c358f36182f05000b1eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M0LOdJGLs40ZPpZG"/></div></div></figure><p id="469d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">买方随后通过智能合同将wet转换为ETH。然后合同将48 ETH转移到他们实际的钱包里。然后他们以10埃特的价格买下了这只无聊的猿猴。</p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div class="fe ff kv"><img src="../Images/04ffbddb9afa99bc4081a46217546b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*YNlr9kSJaCXiEDO5EynJQA.png"/></div></figure><p id="e0d8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在这之后，他们通过LooksRare以71 wETH的价格将这只无聊的猿卖给了出价最高的人。买方将wETH转换为ETH。</p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kw"><img src="../Images/4dddbf4f72f7a9dd6af456956d817d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjaD9OfhnYalDfUAsyNYgg.png"/></div></div></figure><p id="1077" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在所有这些交易之后，买方有106个ETH (48个快速贷款-10个购买+ 68个LR销售)。然后，他们将68个ETH移回他们的智能合约(0x6C8 ),并将剩余的38个ETH转移到F2Pool。你可能会问他们为什么要转移38个ETH？</p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div class="fe ff kx"><img src="../Images/10afda7e484dbba6300d2b90002e5d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*fC9G8OEOYU6EREkNSR-l9A.png"/></div></figure><p id="707b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">F2Pool是一个采矿池，这是一个矿工的协作，每个人都贡献一些计算机能力来发现区块。F2Pool又名Discus Fitch，于2013年推出，目前是全球五大矿池之一。</p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ky"><img src="../Images/275bd5cdb1aedbe0464881d8fd747c63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qd2c44YeSlc1gAFz1BxbwQ.png"/></div></div></figure><p id="804b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">通过贿赂矿商，买方可以保证他们的交易是该区块中执行的第一笔交易。</p><p id="6920" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">眼下，用户的钱包现在有0 ETH，他们的智能合约有68。他们通过将48 ETH转换为wETH并偿还dydx来完成快速贷款。这给SC留下了20个ETH，然后他们将这些ETH转移到另一个钱包中</p><p id="136c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><a class="ae kt" href="https://etherscan.io/address/0xb13744aea4f68ac3c8a6e640055b6b285c925d1c" rel="noopener ugc nofollow" target="_blank">https://ethers can . io/address/0xb 13744 aea4 f 68 AC 3c 8 a6 e 640055 b 6 b 285 c 925 D1 c</a></p><p id="a52b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在另一项交易中，我们的套利者使用uniswap将20 ETH转换为37K USDC:</p><p id="9ff3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><a class="ae kt" href="https://etherscan.io/tx/0xa8e78391142217bf5cdf8a46dbe83a07e8286e88b46f0a1c58d7aaf922f31bbb" rel="noopener ugc nofollow" target="_blank">https://ethers can . io/tx/0xa 8e 78391142217 BF 5 CDF 8 a 46 DBE 83 a 07 e 8286 e 88 b 46 f 0a 1 c 58d 7 AAF 922 f 31 BBB</a></p><figure class="ko kp kq kr fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kz"><img src="../Images/4225499f693373543ab11f50a0d42468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*31RsvbZCSxM5Gq1YholgRw.png"/></div></div></figure><p id="3262" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我不得不说密码世界是疯狂的:)</p></div></div>    
</body>
</html>