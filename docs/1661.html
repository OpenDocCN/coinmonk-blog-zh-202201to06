<html>
<head>
<title>Nested Mapping Error in Solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实度中的嵌套映射错误</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/nested-mapping-error-in-solidity-39edf29eb9af?source=collection_archive---------14-----------------------#2022-03-04">https://medium.com/coinmonks/nested-mapping-error-in-solidity-39edf29eb9af?source=collection_archive---------14-----------------------#2022-03-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="e431" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我最近一直在学习Solidity，感觉很棒。有很多东西需要探索，今天我想强调学习者在开发智能合同时面临的一个常见错误。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/e4dffe475c83d1cb60ab58ef52d1fd74.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*ixHx73BrJ_ifI2niozw3tQ.png"/></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">Solidity</figcaption></figure><p id="c61e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这种错误通常出现在开发人员使用合同中的<code class="eh ka kb kc kd b">struct</code> (s)和<code class="eh ka kb kc kd b">mapping</code>时。看看这里嵌入的Github gist，我在这里展示了我正在谈论的错误。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ke"><img src="../Images/c09f92f11a8569709afaabdd07bebb40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dfdeMObPs7CmrvaTQJb0tg.png"/></div></div></figure><p id="84bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您无法在此处查看嵌入的gist，请转到此链接-&gt;<a class="ae kj" href="https://gist.github.com/aditya172926/ec8597cc4ccfdb933b84aacf61217623" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/aditya 172926/EC 8597 cc 4c cfdb 933 b 84 aacf 61217623</a></p><p id="dcf4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是一个在编译你的契约时出现的错误，当你在二级结构中使用一个<code class="eh ka kb kc kd b">mapping</code>来嵌套<code class="eh ka kb kc kd b">struct</code>时。这里的错误是<code class="eh ka kb kc kd b">Struct containing a (nested) mapping cannot be constructed</code>。</p><p id="053d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">为什么会出现这种情况？🤷‍♂️ </strong></p><p id="e067" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我的意思是嵌套数据结构看起来很直观，对吗？这与我们使用数据时数据将存储在合同中的什么位置有关。您可以使用多种方式在合同上存储数据，如<code class="eh ka kb kc kd b">memory</code>和<code class="eh ka kb kc kd b">storage</code>。当您在合同中使用这些关键字和变量时，在保存数据方面有所不同。</p><p id="63dc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">什么是<code class="eh ka kb kc kd b">memory</code>和<code class="eh ka kb kc kd b">storage</code>？这是另一个博客的内容。😜</p><p id="1dcc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">但是如果您已经知道它们是什么，那么请知道<code class="eh ka kb kc kd b">mapping</code>需要<code class="eh ka kb kc kd b">storage</code>类型来保存数据，即使在契约已经执行之后。而<code class="eh ka kb kc kd b">struct</code>使用<code class="eh ka kb kc kd b">memory</code>来完成这项工作。如果我们不小心使用它们，并且不了解它们的范围，我们最终会犯这样的错误。是的，你可以用<code class="eh ka kb kc kd b">memory</code>声明一个映射，但是每次你启动契约的时候，它都是空的，这不是映射应该做的事情。但是，最终取决于您的使用案例。</p><p id="bd1e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以，我希望你能理解，如果我们试图实现嵌套结构和映射，为什么会出现这样的错误。</p><p id="5d06" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">感谢您读到这里！🤘</p><p id="832c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我会在Solidity、Ethereum和web3开发上发布更多这样的例子，并在我的社交网站上分享。✌</p></div></div>    
</body>
</html>