<html>
<head>
<title>Allowing users to mint ERC1155 NFT from your website.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">允许用户从你的网站上铸造ERC1155 NFT。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/allowing-users-to-mint-erc1155-nft-from-your-website-6a4732b4b72a?source=collection_archive---------1-----------------------#2022-02-03">https://medium.com/coinmonks/allowing-users-to-mint-erc1155-nft-from-your-website-6a4732b4b72a?source=collection_archive---------1-----------------------#2022-02-03</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="2a3d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我建立了一个简单的HTML网站，在智能合同上铸造一个新的NFT，它也使铸造功能可以支付，所以所有者可以获得一些NFT的收益。</p><p id="1577" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我将分解我的步骤，这样你可以重新创建和迭代你自己的版本。</p><p id="9836" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">工具:Remix IDE，Metamask，Visual studio代码。</p><p id="b867" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">第一步。我将使用openzepplin。你可以在这里找到这些文件(<a class="ae jo" href="https://docs.openzeppelin.com/contracts/4.x/wizard" rel="noopener ugc nofollow" target="_blank">https://docs.openzeppelin.com/contracts/4.x/wizard</a>)。在访问控制下选择ERC1155、mintable特征和ownable。</p><p id="eadf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在混音中打开</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/31fae84ce22743c849238073fc486b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v9emxomd4PRKP1wmj6o1oQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Openzepplin</figcaption></figure><p id="32e1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">步骤2:我移除了mintBatch函数，因为我想一次铸造一个特定的令牌。此外，我删除了仅所有者条件，这样任何有钱包地址的人都可以造币。</p><p id="8f76" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">找到下面的智能合同代码。</p><pre class="jq jr js jt fq kf kg kh ki aw kj dt"><span id="e9a1" class="kk kl ht kg b fv km kn l ko kp">// SPDX-License-Identifier: MIT</span><span id="41fc" class="kk kl ht kg b fv kq kn l ko kp">pragma solidity ^0.8.2;</span><span id="81fa" class="kk kl ht kg b fv kq kn l ko kp">import "@openzeppelin/contracts@4.4.2/token/ERC1155/ERC1155.sol";</span><span id="3c65" class="kk kl ht kg b fv kq kn l ko kp">import "@openzeppelin/contracts@4.4.2/access/Ownable.sol";</span><span id="d0c6" class="kk kl ht kg b fv kq kn l ko kp">contract MyToken is ERC1155, Ownable {</span><span id="afdd" class="kk kl ht kg b fv kq kn l ko kp">constructor() ERC1155("") {}</span><span id="7245" class="kk kl ht kg b fv kq kn l ko kp">uint256 public mintRate = 0.05 ether;</span><span id="5768" class="kk kl ht kg b fv kq kn l ko kp">uint256[] public minted = [0,0,0];</span><span id="0d0a" class="kk kl ht kg b fv kq kn l ko kp">uint256[] public supplies = [10, 10, 50];</span><span id="effa" class="kk kl ht kg b fv kq kn l ko kp">function setURI(string memory newuri) public onlyOwner {</span><span id="aab1" class="kk kl ht kg b fv kq kn l ko kp">_setURI(newuri);</span><span id="9fb8" class="kk kl ht kg b fv kq kn l ko kp">}</span><span id="a86e" class="kk kl ht kg b fv kq kn l ko kp">function mint(uint256 id, uint256 amount)</span><span id="79ab" class="kk kl ht kg b fv kq kn l ko kp">payable</span><span id="d149" class="kk kl ht kg b fv kq kn l ko kp">public</span><span id="9bc0" class="kk kl ht kg b fv kq kn l ko kp">{</span><span id="7718" class="kk kl ht kg b fv kq kn l ko kp">require(id &lt;= supplies.length, "Token doesn't exist");</span><span id="f85e" class="kk kl ht kg b fv kq kn l ko kp">require(id &gt; 0, "Token doesn't exist");</span><span id="170f" class="kk kl ht kg b fv kq kn l ko kp">require(msg.value &gt;= (amount * mintRate), "Not enough ether sent");</span><span id="cd99" class="kk kl ht kg b fv kq kn l ko kp">require(minted[id -1] + amount &lt;= supplies[id -1], "not enought supply left");</span><span id="c0f1" class="kk kl ht kg b fv kq kn l ko kp">_mint(msg.sender, id, amount, "");</span><span id="ae85" class="kk kl ht kg b fv kq kn l ko kp">}</span><span id="b45e" class="kk kl ht kg b fv kq kn l ko kp">}</span></pre><p id="a77a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">第三步:编制合同</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff kr"><img src="../Images/f449194a77f485beec019cee6be6fd52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lp6OuobUqRjC_8Re0IV3tg.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Compile contract</figcaption></figure><p id="e489" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">第四步:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ks"><img src="../Images/a39d31a4293118c25e45905e10c826f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-FmGnlMufllKAtN8r2GLvg.png"/></div></div></figure><p id="2645" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">步骤5:使用Rinkeby测试网络或您选择的任何测试网络连接到metamask wallet并执行交易。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ks"><img src="../Images/405bf1108df555267bd2e380d852dc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DVlUB2j1QnXBuA2IaxnW_g.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Transact</figcaption></figure><p id="155e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">步骤5:在以太扫描上复制钱包地址</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff kt"><img src="../Images/6b622f6a5e2bc0b49032b6ecb766fde3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nHfjxd1b5fld4ym8R_GSIg.png"/></div></div></figure><p id="a707" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">步骤6:创建HTML文件并开始构建HTML网页</p><pre class="jq jr js jt fq kf kg kh ki aw kj dt"><span id="3a52" class="kk kl ht kg b fv km kn l ko kp">&lt;html lang="en"&gt;</span><span id="123b" class="kk kl ht kg b fv kq kn l ko kp">&lt;head&gt;</span><span id="dd91" class="kk kl ht kg b fv kq kn l ko kp">&lt;meta charset="UTF-8"&gt;</span><span id="7eb9" class="kk kl ht kg b fv kq kn l ko kp">&lt;title&gt;ERC1155&lt;/title&gt;</span><span id="6963" class="kk kl ht kg b fv kq kn l ko kp">&lt;script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"&gt;&lt;/script&gt;</span><span id="28a5" class="kk kl ht kg b fv kq kn l ko kp">&lt;/head&gt;</span><span id="0140" class="kk kl ht kg b fv kq kn l ko kp">&lt;body&gt;</span><span id="0ccd" class="kk kl ht kg b fv kq kn l ko kp">&lt;div&gt;</span><span id="30a7" class="kk kl ht kg b fv kq kn l ko kp">&lt;p&gt;Wallet address - &lt;span id="wallet-address"&gt;&lt;/span&gt;&lt;/p&gt;</span><span id="2453" class="kk kl ht kg b fv kq kn l ko kp">&lt;label&gt;Token ID&lt;/label&gt;&lt;input type="number" name="tokenId"&gt;</span><span id="296e" class="kk kl ht kg b fv kq kn l ko kp">&lt;br&gt;</span><span id="b76e" class="kk kl ht kg b fv kq kn l ko kp">&lt;label&gt;Amount&lt;/label&gt;&lt;input type="number" name="Amount"&gt;</span><span id="d0a5" class="kk kl ht kg b fv kq kn l ko kp">&lt;br&gt;</span><span id="119d" class="kk kl ht kg b fv kq kn l ko kp">&lt;br&gt;</span><span id="0ebc" class="kk kl ht kg b fv kq kn l ko kp">&lt;button id= "mint"&gt;Mint an NFT&lt;/button&gt;</span><span id="abf0" class="kk kl ht kg b fv kq kn l ko kp">&lt;/div&gt;</span><span id="bb23" class="kk kl ht kg b fv kq kn l ko kp">&lt;script type="text/javascript"&gt;</span><span id="ebac" class="kk kl ht kg b fv kq kn l ko kp">// Connect metamask to our site. Get the user's address</span><span id="26bb" class="kk kl ht kg b fv kq kn l ko kp">var account = null;</span><span id="214f" class="kk kl ht kg b fv kq kn l ko kp">var contract = null;</span><span id="39da" class="kk kl ht kg b fv kq kn l ko kp">const ABI = [];</span><span id="d152" class="kk kl ht kg b fv kq kn l ko kp">const ADDRESS = "";</span><span id="a6f8" class="kk kl ht kg b fv kq kn l ko kp">(async () =&gt; {</span><span id="5196" class="kk kl ht kg b fv kq kn l ko kp">if (window.ethereum) {</span><span id="598c" class="kk kl ht kg b fv kq kn l ko kp">await window.ethereum.send('eth_requestAccounts');</span><span id="fbbc" class="kk kl ht kg b fv kq kn l ko kp">window.web3 = new Web3(window.ethereum);</span><span id="4ee9" class="kk kl ht kg b fv kq kn l ko kp">var accounts = await web3.eth.getAccounts();</span><span id="3051" class="kk kl ht kg b fv kq kn l ko kp">account = accounts[0];</span><span id="faaa" class="kk kl ht kg b fv kq kn l ko kp">document.getElementById('wallet-address').textContent = account;</span><span id="87b9" class="kk kl ht kg b fv kq kn l ko kp">contract = new web3.eth.Contract(ABI, ADDRESS);</span><span id="d119" class="kk kl ht kg b fv kq kn l ko kp">document.getElementById('mint').onclick = async () =&gt; {</span><span id="4866" class="kk kl ht kg b fv kq kn l ko kp">var tokenId = Number(document.querySelector("[name=tokenId]").value);</span><span id="0a6d" class="kk kl ht kg b fv kq kn l ko kp">var amount = Number(document.querySelector("[name=amount]"));</span><span id="7137" class="kk kl ht kg b fv kq kn l ko kp">var mintRate = Number(await contract.methods.mintRate().call());</span><span id="8d50" class="kk kl ht kg b fv kq kn l ko kp">var totalAmount = mintRate * amount;</span><span id="3b19" class="kk kl ht kg b fv kq kn l ko kp">contract.methods.mint(tokenId, amount).send({ from: account, value: String(totalAmount)});</span><span id="5c5e" class="kk kl ht kg b fv kq kn l ko kp">}</span><span id="8655" class="kk kl ht kg b fv kq kn l ko kp">}</span><span id="b794" class="kk kl ht kg b fv kq kn l ko kp">})();</span><span id="9864" class="kk kl ht kg b fv kq kn l ko kp">&lt;/script&gt;</span><span id="8e8a" class="kk kl ht kg b fv kq kn l ko kp">&lt;/body&gt;</span><span id="98c3" class="kk kl ht kg b fv kq kn l ko kp">&lt;/html&gt;</span></pre><p id="b80c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在代码中嵌入应用程序二进制接口(ABI)和合同地址</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ku"><img src="../Images/47c79bdeb80d06fa2655d14f94019696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0bpCd-p5jepUOPjfwnRIeQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Copy ABI from solidity</figcaption></figure><p id="1483" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">步骤7:在本地主机上设置一个简单的HTTP服务器和视图。</p><p id="c172" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以观看我的屏幕视频</p><div class="kv kw fm fo kx ky"><a href="https://drive.google.com/file/d/1CtkCgLdEg0-jbB7JKWrjMtAFdibeOJIw/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab ej"><div class="la ab lb cl cj lc"><h2 class="bd hu fv z el ld eo ep le er et hs dt translated">2月3日，2022.mp4</h2><div class="lf l"><h3 class="bd b fv z el ld eo ep le er et ek translated">编辑描述</h3></div><div class="lg l"><p class="bd b gc z el ld eo ep le er et ek translated">drive.google.com</p></div></div><div class="lh l"><div class="li l lj lk ll lh lm jz ky"/></div></div></a></div><p id="e253" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">谢谢你的反馈，非常感谢。</p><p id="fac7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我是一名产品经理，不熟悉web 3领域，并且乐于接受这个领域的机会。请伸出手！！</p><blockquote class="ln"><p id="b72a" class="lo lp ht bd lq lr ls lt lu lv lw jn ek translated">加入Coinmonks <a class="ae jo" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jo" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="71bd" class="lx kl ht bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt dt translated">另外，阅读</h1><ul class=""><li id="b8ef" class="mu mv ht is b it mw ix mx jb my jf mz jj na jn nb nc nd ne dt translated"><a class="ae jo" href="https://coincodecap.com/fold-app-review" rel="noopener ugc nofollow" target="_blank">折叠App审核</a> | <a class="ae jo" rel="noopener" href="/coinmonks/kucoin-trading-bot-automate-your-trades-8cf0ca2138e0"> Kucoin交易机器人</a> | <a class="ae jo" href="https://coincodecap.com/probit-review" rel="noopener ugc nofollow" target="_blank"> Probit审核</a></li><li id="3776" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated"><a class="ae jo" href="https://coincodecap.com/buy-bitcoin-anonymously" rel="noopener ugc nofollow" target="_blank">如何匿名购买比特币</a> | <a class="ae jo" href="https://coincodecap.com/bitcoin-cash-wallets" rel="noopener ugc nofollow" target="_blank">比特币现金钱包</a></li><li id="2aa8" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated"><a class="ae jo" href="https://coincodecap.com/binance-vs-ftx" rel="noopener ugc nofollow" target="_blank">币安vs FTX </a> | <a class="ae jo" href="https://coincodecap.com/solana-wallets" rel="noopener ugc nofollow" target="_blank">最佳(SOL)索拉纳钱包</a></li><li id="4367" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated"><a class="ae jo" href="https://coincodecap.com/binomo-review" rel="noopener ugc nofollow" target="_blank">比诺莫评论</a> | <a class="ae jo" href="https://coincodecap.com/stoic-vs-3commas-vs-tradesanta" rel="noopener ugc nofollow" target="_blank">斯多葛派vs 3Commas vs TradeSanta </a></li><li id="2565" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated">【Capital.com】|<a class="ae jo" href="https://coincodecap.com/crypto-lending-hong-kong" rel="noopener ugc nofollow" target="_blank">港加密借贷平台</a></li><li id="dd77" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated"><a class="ae jo" href="https://coincodecap.com/swap-crypto-on-uniswap" rel="noopener ugc nofollow" target="_blank">如何在Uniswap上交换加密？</a> | <a class="ae jo" href="https://coincodecap.com/a-ads-review" rel="noopener ugc nofollow" target="_blank"> A-Ads评论</a></li><li id="f66c" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/wazirx-vs-coindcx-vs-bitbns-149f4f19a2f1">WazirX vs CoinDCX vs bit bns</a>|<a class="ae jo" rel="noopener" href="/coinmonks/blockfi-vs-coinloan-vs-nexo-cb624635230d">block fi vs coin loan vs Nexo</a></li><li id="ea54" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/localbitcoins-review-6cc001c6ed56">本地比特币审核</a> | <a class="ae jo" href="https://coincodecap.com/cryptocurrency-savings-accounts" rel="noopener ugc nofollow" target="_blank">加密货币储蓄账户</a></li><li id="889d" class="mu mv ht is b it nf ix ng jb nh jf ni jj nj jn nb nc nd ne dt translated"><a class="ae jo" href="https://coincodecap.com/margin-trading" rel="noopener ugc nofollow" target="_blank">什么是保证金交易</a> | <a class="ae jo" href="https://coincodecap.com/dca" rel="noopener ugc nofollow" target="_blank">美元成本平均法</a></li></ul></div></div>    
</body>
</html>