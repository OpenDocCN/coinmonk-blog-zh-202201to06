<html>
<head>
<title>How to wrap fungible tokens into NFT (aka minting Gift Cards) using Solidity?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Solidity将可替换的代币包装成NFT(又名铸造礼品卡)？</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-wrap-fungible-tokens-into-nft-aka-minting-gift-cards-using-solidity-8c9b48b91769?source=collection_archive---------10-----------------------#2022-03-29">https://medium.com/coinmonks/how-to-wrap-fungible-tokens-into-nft-aka-minting-gift-cards-using-solidity-8c9b48b91769?source=collection_archive---------10-----------------------#2022-03-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="576d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">这是一个简单的指南，帮助你了解如何制作包裹有可替换代币的NFT(也称为NFT礼品卡)。这也让您对创建包装令牌有了基本的了解。</em></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/8e1124dd3bfdb9a984bfb11d7987f321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QfMZ66emX5XitKIb0JKrpQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Mint Gift Cards as NFTs on giftnft.cards</figcaption></figure><p id="7547" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">目前非功能性测试非常流行。人们从他们的艺术作品、迷因以及诸如此类的东西中赚取了数百万美元。我想跳上这辆炒作列车，看看它到底是什么，以及它拥有什么样的可能性。</p><p id="d350" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">作为一名程序员，我一直在寻找简单的教程来从头构建一个NFT项目，并试图理解它是如何工作的。我发现了这篇很棒的教程，归功于<a class="kf kg gr" href="https://medium.com/u/d1acc8dc981d?source=post_page-----8c9b48b91769--------------------------------" rel="noopener" target="_blank"> mbvissers.eth </a>👏。</p><div class="kh ki fm fo kj kk"><a rel="noopener follow" target="_blank" href="/geekculture/how-to-programmatically-deploy-and-mint-a-simple-nft-on-the-polygon-blockchain-88e1beede15d"><div class="kl ab ej"><div class="km ab kn cl cj ko"><h2 class="bd hu fv z el kp eo ep kq er et hs dt translated">如何在多边形区块链上以编程方式部署和创建一个简单的NFT</h2><div class="kr l"><h3 class="bd b fv z el kp eo ep kq er et ek translated">在没有NFT市场的情况下部署您的第一个NFT，同时仍然能够在OpenSea上交易它的快速指南。</h3></div><div class="ks l"><p class="bd b gc z el kp eo ep kq er et ek translated">medium.com</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky jz kk"/></div></div></a></div><p id="6362" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在阅读本教程之前，我想让你浏览一下上面的文章来设置工具链、项目并构建一个简单的NFT项目，因为这篇文章是它的精神续篇。</p><h1 id="f77f" class="kz la ht bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">那么我们在建造什么？</h1><p id="e3f9" class="pw-post-body-paragraph iq ir ht is b it lx iv iw ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn hm dt translated">我们正试图将连锁礼品卡打造为NFT。这些类似于我们在亚马逊上得到的，但不受任何中央权力机构控制。它们也类似于通常的NFT，但它有一个固有的价值，这是通过在NFT中包装可替换的令牌而实现的。</p><p id="5465" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我们开始构建之前，我想澄清一下为什么礼品卡容易被铸造成NFT。</p><ol class=""><li id="80d8" class="mc md ht is b it iu ix iy jb me jf mf jj mg jn mh mi mj mk dt translated">礼品卡在送礼者和接受者之间具有情感价值&amp;这样的东西接受者会永远保留。</li><li id="e9dd" class="mc md ht is b it ml ix mm jb mn jf mo jj mp jn mh mi mj mk dt translated">礼品卡是送礼者在特定场合通过艺术和愿望表达给接受者的个人信息。</li><li id="6730" class="mc md ht is b it ml ix mm jb mn jf mo jj mp jn mh mi mj mk dt translated">礼品卡具有货币价值，接收者可以兑换。</li></ol><p id="4f75" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，在本教程中，我们希望构建一个NFT，它有一个相关的插图，其中还嵌入了一些令牌(如果部署在以太坊上，则为ETH如果部署在METIS上，则为METIS；如果部署在多边形上，则为MATIC)。</p><p id="89c0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">通过上面的链接教程，你可能已经知道了一件事，那就是<strong class="is hu">简单NFT </strong>是区块链上一个简单明了的散列。它没有附加任何元数据(如照片/艺术品/GIF/等)。为了创建NFT礼品卡，我们将向它添加两种元数据:艺术品&amp;货币价值。</p><h2 id="3c7c" class="mq la ht bd lb mr ms mt lf mu mv mw lj jb mx my ln jf mz na lr jj nb nc lv nd dt translated">如何将艺术品添加到NFT？</h2><p id="49db" class="pw-post-body-paragraph iq ir ht is b it lx iv iw ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn hm dt translated">要将艺术品添加到NFT，我们需要添加一个将令牌映射到艺术品的数据结构。为此，将下面的代码粘贴到<code class="eh ne nf ng nh b">contract</code>主体中。</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="b68d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该结构将NFT的<code class="eh ne nf ng nh b">imageUrl</code>存储到其各自的<code class="eh ne nf ng nh b">tokenId</code>中。为什么我们创建了一个<code class="eh ne nf ng nh b">struct</code>，而不是使用一个从<code class="eh ne nf ng nh b">uint256</code>到<code class="eh ne nf ng nh b">string</code>的简单映射？因为我们稍后将在该结构中添加其他元数据。</p><p id="e44c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在已经完成了，我们需要更新<code class="eh ne nf ng nh b">safeMint</code>方法来接受图像URL以铸造NFT。</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="1b9d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Tada，NFT礼品卡现在有了一个图像，让用户可以看到并珍惜。该合同的前端可以发送任何类型的图像URL，以便永久存储。它可以是一个普通的老S3网址或IPFS网址。如何上传任一选项由您决定。</p><p id="7ac9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们需要在礼品卡中添加和包装一些代币。</p><h2 id="8f2f" class="mq la ht bd lb mr ms mt lf mu mv mw lj jb mx my ln jf mz na lr jj nb nc lv nd dt translated">如何在礼品卡中添加代币？</h2><p id="2dfa" class="pw-post-body-paragraph iq ir ht is b it lx iv iw ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn hm dt translated">在向礼品卡添加代币之前，我们需要了解NFT本身不能包含可替换代币。我们可以做的是将所有可替换的令牌存储在智能合约本身中，因为它是一种钱包，并存储根据NFT存储的令牌数量的记录。这类似于如何创建包装令牌(WBTC/ WETH/etc)。</p><p id="46bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以通过将函数标记为payable来实现向智能合约发送令牌。智能合约现在拥有令牌，只要它没有被撤销。这可以通过以下方式实现:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="a0e7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">既然智能合约收到了令牌，我们需要一种方法来记住NFT包含的令牌数量。以便可以兑现，否则发送的金额可能会丢失。</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="f069" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了记住金额，我们在GiftCard结构中添加了一个字段amount，并在创建NFT时添加了礼品值。</p><p id="9973" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，NFT购物卡已经成型，还有最后一件事要做。</p><h2 id="55ef" class="mq la ht bd lb mr ms mt lf mu mv mw lj jb mx my ln jf mz na lr jj nb nc lv nd dt translated">如何从礼品卡中取出代币？</h2><p id="00e6" class="pw-post-body-paragraph iq ir ht is b it lx iv iw ix ly iz ja jb lz jd je jf ma jh ji jj mb jl jm jn hm dt translated">当礼品卡被打开时，该礼品卡的所有存储的代币需要被发送给NFT的所有者。这可以通过以下方式实现:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="5d06" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们解开密码。我们首先检查令牌的所有者是否与函数的调用者/发送者相同。只有所有者可以从他们的钱包中提取代币金额。我们不希望人们窃取他人的礼品卡金额。</p><p id="507a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，我们获得相关NFT的礼品卡，并将礼品卡中包装的等量代币发送给所有者。</p><p id="4dfd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">代码还有一个问题。同一张礼品卡可以反复多次提取金额，直到智能合约余额耗尽。我们也不希望这样。为了防止这种情况发生，我们可以做一个检查:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="ed9e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">礼品卡NFT智能合同现已完成。它有一个礼品卡图像以及一些代币嵌入其中。我们现在需要的是部署智能合约(参考上面的链接文章<a class="ae nk" rel="noopener" href="/geekculture/how-to-programmatically-deploy-and-mint-a-simple-nft-on-the-polygon-blockchain-88e1beede15d">)并为它构建一个好的前端，我认为你完全有能力自己构建它😉。</a></p><p id="32be" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你想看完整的项目，加上额外的功能和工作界面，请访问<a class="ae nk" href="https://github.com/pepsighan/giftnft.cards" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。</p><p id="49ea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">此外，如果你想看它的实际应用，一个名为<strong class="is hu">礼品卡NFT </strong>的dapp可以在<a class="ae nk" href="https://giftnft.cards" rel="noopener ugc nofollow" target="_blank">Gift . cards</a>买到。</p><p id="fa2b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">感谢您的阅读，并希望这篇文章是有用的🎁敬你。</p><blockquote class="nl"><p id="6716" class="nm nn ht bd no np nq nr ns nt nu jn ek translated">加入Coinmonks <a class="ae nk" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae nk" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="d066" class="kz la ht bd lb lc ld le lf lg lh li lj lk nv lm ln lo nw lq lr ls nx lu lv lw dt translated">另外，阅读</h1><ul class=""><li id="3ddb" class="mc md ht is b it lx ix ly jb ny jf nz jj oa jn ob mi mj mk dt translated"><a class="ae nk" rel="noopener" href="/coinmonks/cryptocurrency-savings-accounts-be3bc0feffbf">加密货币储蓄账户</a> | <a class="ae nk" rel="noopener" href="/coinmonks/yobit-review-175464162c62"> YoBit审核</a></li><li id="b716" class="mc md ht is b it ml ix mm jb mn jf mo jj mp jn ob mi mj mk dt translated"><a class="ae nk" rel="noopener" href="/coinmonks/botsfolio-vs-napbots-vs-mudrex-c81344970c02">Botsfolio vs nap bots vs Mudrex</a>|<a class="ae nk" rel="noopener" href="/coinmonks/gate-io-exchange-review-61bf87b7078f">gate . io交流回顾</a></li><li id="485e" class="mc md ht is b it ml ix mm jb mn jf mo jj mp jn ob mi mj mk dt translated"><a class="ae nk" href="https://coincodecap.com/coinflex-review" rel="noopener ugc nofollow" target="_blank"> CoinFLEX评论</a> | <a class="ae nk" href="https://coincodecap.com/aex-exchange-review" rel="noopener ugc nofollow" target="_blank"> AEX交易所评论</a> | <a class="ae nk" href="https://coincodecap.com/upbit-review" rel="noopener ugc nofollow" target="_blank"> UPbit评论</a></li><li id="4169" class="mc md ht is b it ml ix mm jb mn jf mo jj mp jn ob mi mj mk dt translated"><a class="ae nk" href="https://coincodecap.com/ascendex-margin-trading" rel="noopener ugc nofollow" target="_blank"> AscendEx保证金交易</a> | <a class="ae nk" href="https://coincodecap.com/bitfinex-staking" rel="noopener ugc nofollow" target="_blank"> Bitfinex赌注</a> | <a class="ae nk" href="https://coincodecap.com/bitflyer-review" rel="noopener ugc nofollow" target="_blank"> bitFlyer审核</a></li><li id="ef2e" class="mc md ht is b it ml ix mm jb mn jf mo jj mp jn ob mi mj mk dt translated"><a class="ae nk" href="https://coincodecap.com/bitget-review" rel="noopener ugc nofollow" target="_blank"> Bitget回顾</a>|<a class="ae nk" href="https://coincodecap.com/gemini-vs-blockfi" rel="noopener ugc nofollow" target="_blank">Gemini vs block fi</a>cmd |<a class="ae nk" href="https://coincodecap.com/okex-futures-trading" rel="noopener ugc nofollow" target="_blank">OKEx期货交易</a></li></ul></div></div>    
</body>
</html>