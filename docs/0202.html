<html>
<head>
<title>Host a decentralised application with IPFS and AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过IPFS和AWS托管分散式应用程序</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/host-a-decentralised-application-with-ipfs-and-aws-1c8e147284ce?source=collection_archive---------0-----------------------#2022-01-17">https://medium.com/coinmonks/host-a-decentralised-application-with-ipfs-and-aws-1c8e147284ce?source=collection_archive---------0-----------------------#2022-01-17</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="08a9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">关于如何使用</em><a class="ae jp" href="https://ipfs.io/" rel="noopener ugc nofollow" target="_blank"><em class="jo"/></a><em class="jo">和AWS EC2 </em>托管dApp(关于雪崩)的快速分步指南</p><p id="71b5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本文是如何在Avalanche上构建dApp系列文章的第3部分。点击此处查看其他部分:</p><ul class=""><li id="b330" class="jq jr ht is b it iu ix iy jb js jf jt jj ju jn jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/@a.a.lechner/create-and-deploy-a-solidity-contract-to-avalanche-with-hardhat-2c5cd5e4fa93">第1部分:使用Hardhat创建并部署一个Solidity契约来雪崩</a></li><li id="7344" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/@a.a.lechner/create-an-avalanche-dapp-with-ethers-metamask-and-react-342d8d22cb30">第二部分:用醚、金属屏蔽和反应制造雪崩dApp</a></li><li id="fe34" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/@a.a.lechner/link-a-domain-to-a-dapp-hosted-on-ipfs-6cf155ef689f">第4部分:链接一个域名到IPFS托管的dApp</a></li></ul><p id="44c1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">👉<strong class="is hu"> TLDR </strong>:这篇文章解释了如何自己运行一个<a class="ae jp" href="https://ipfs.io/" rel="noopener ugc nofollow" target="_blank"> IPFS </a>节点。如果你不想这样做，但仍然希望以分散的方式托管你的文件，你可以选择使用<a class="ae jp" href="https://docs.ipfs.io/concepts/persistence/#pinning-services" rel="noopener ugc nofollow" target="_blank"> pinning服务</a>，如<a class="ae jp" href="https://www.pinata.cloud/" rel="noopener ugc nofollow" target="_blank"> Pinata </a>、<a class="ae jp" href="https://www.eternum.io/" rel="noopener ugc nofollow" target="_blank"> Eternum </a>或<a class="ae jp" href="https://fleek.co/hosting/" rel="noopener ugc nofollow" target="_blank"> Fleek </a>。</p><h2 id="2539" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">使用的软件版本:</h2><ul class=""><li id="bc2c" class="jq jr ht is b it kz ix la jb lb jf lc jj ld jn jv jw jx jy dt translated">nodejs: v16.13.0</li><li id="6c62" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated">go-ipfs: v0.11.0</li><li id="d064" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated">ubuntu服务器:20.04 LTS</li></ul><h2 id="0b4b" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">步骤1:创建并启动AWS EC2实例</h2><p id="4267" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">登录<a class="ae jp" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank"> AWS管理控制台</a>并点击<code class="eh lh li lj lk b">Services &gt; Compute &gt; EC2</code>。在那里点击<code class="eh lh li lj lk b">Launch instances</code>。</p><p id="4a29" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了简单起见，我们将使用Ubuntu <a class="ae jp" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html" rel="noopener ugc nofollow" target="_blank"> AMI </a>。在搜索栏中搜索<code class="eh lh li lj lk b">Ubuntu</code>，并选择最新版本。如果您计划使用AWS提供的免费层(第一年免费)，请注意AMI包含标签<code class="eh lh li lj lk b">Free tier eligible</code>:</p><figure class="lm ln lo lp fq lq fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff ll"><img src="../Images/1289f39469a19eddbb2b8ddbd361dd1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9TV2yTdjwQI9jOtbSZhKA.png"/></div></div></figure><p id="ee21" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在下一页上，您可以选择实例类型，这将定义服务可用的资源。我们再次选择免费层提供的内容，并选择<code class="eh lh li lj lk b">t2.micro</code>。</p><p id="c666" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在跳过几个步骤(我们将使用默认值)并点击<code class="eh lh li lj lk b">Configure Security Group</code>。在那里，我们将开放端口8080和4001–4002:</p><figure class="lm ln lo lp fq lq fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff lx"><img src="../Images/60142700e07c382e66686459c7f22639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qwdGXCC6z7RILAOT5u1O8A.png"/></div></div></figure><p id="fe2b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来按下<code class="eh lh li lj lk b">Review and Launch</code>。这将跳过几个步骤(配置、存储等。)但无论如何我们都要坚持默认值。</p><p id="4e04" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后点击<code class="eh lh li lj lk b">Launch</code>。这将打开一个对话框来创建一个新的密钥对。选择<code class="eh lh li lj lk b">create a new key pair</code>并下载文件，我们将在下一步中需要密钥对文件来通过SSH连接到我们的实例。然后点击<code class="eh lh li lj lk b">Launch Instances</code>。</p><h2 id="72ab" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">步骤2:连接到您的实例</h2><p id="5e07" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">现在让我们连接到创建的实例。一旦实例启动，我们有不同的选择。</p><p id="7001" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">选项1 </strong>:从AWS控制台连接。为此，我们需要做的就是点击实例id并按下<code class="eh lh li lj lk b">Connect</code>。</p><figure class="lm ln lo lp fq lq fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff ly"><img src="../Images/9a96acea6c57cca8e2b265e3468a1da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c4Lk5pX8XOO7ONq2uCbefA.png"/></div></div></figure><figure class="lm ln lo lp fq lq fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff lz"><img src="../Images/658da1ba1cf10821c3555362fd7a99b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WuGibVGuNdCpAAvmqvtT_g.png"/></div></div></figure><p id="2776" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">选项2 </strong>:从您的机器通过SSH连接。为此，我们首先需要为我们在上一步中下载的密钥对授予正确的权限:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="c40a" class="ke kf ht lk b fv me mf l mg mh">$ chmod 400 ipfs-key-pair.cer</span></pre><p id="ac64" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在您可以使用仪表板上显示的<code class="eh lh li lj lk b">Public DNS (IPv4)</code>通过SSH连接:</p><figure class="lm ln lo lp fq lq fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff mi"><img src="../Images/be6d55539b4e1ea3d4529186df9b23d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHmL9f-kws9_8LNsDSJf0Q.png"/></div></div></figure><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="4c8e" class="ke kf ht lk b fv me mf l mg mh">$ ssh -i ipfs-key-pair.cer ubuntu@ec2-x-x-x-x.xx-xxxx-x.compute.amazonaws.com</span></pre><h2 id="68c3" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">第三步:安装IPFS</h2><p id="e953" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">我们现在连接到我们的EC2实例，并准备安装IPFS。让我们从<a class="ae jp" href="https://dist.ipfs.io/#go-ipfs" rel="noopener ugc nofollow" target="_blank">发布站点</a>获取<code class="eh lh li lj lk b">go-ipfs</code>的最新版本:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="2386" class="ke kf ht lk b fv me mf l mg mh">$ wget <a class="ae jp" href="https://dist.ipfs.io/go-ipfs/v0.11.0/go-ipfs_v0.11.0_linux-amd64.tar.gz" rel="noopener ugc nofollow" target="_blank">https://dist.ipfs.io/go-ipfs/v0.11.0/go-ipfs_v0.11.0_linux-amd64.tar.gz</a><br/>$ tar xvfz go-ipfs_v0.11.0_linux-amd64.tar.gz<br/>$ rm go-ipfs_v0.11.0_linux-amd64.tar.gz</span></pre><p id="0e65" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们安装它:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="036d" class="ke kf ht lk b fv me mf l mg mh">$ sudo ./go-ipfs/install.sh<br/>Moved ./go-ipfs/ipfs to /usr/local/bin</span></pre><p id="e692" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以通过运行以下命令来检查安装是否成功:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="b383" class="ke kf ht lk b fv me mf l mg mh">$ ipfs version<br/>ipfs version 0.11.0</span></pre><p id="b2a6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以在官方的<a class="ae jp" href="https://docs.ipfs.io/install/command-line/#official-distributions" rel="noopener ugc nofollow" target="_blank"> IPFS文档</a>中找到不同平台更详细的安装指南。</p><h2 id="5c3b" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">步骤4:初始化IPFS存储库</h2><p id="9b7b" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">现在，让我们为IPFS回购设置文件夹。在本教程中，我们将使用<code class="eh lh li lj lk b">/home/ubuntu/ipfs/data</code>，但你可以使用任何你想要的路径。</p><p id="93a2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，首先我们创建文件夹:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="551f" class="ke kf ht lk b fv me mf l mg mh">$ mkdir <!-- -->/home/ubuntu/ipfs/data</span></pre><p id="f44e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，我们将路径添加到您的bash配置文件并重新加载它:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="3cad" class="ke kf ht lk b fv me mf l mg mh">$ echo 'export IPFS_PATH=<!-- -->/home/ubuntu/ipfs/data'<!-- --> &gt;&gt; ~/.profile<br/>$ source ~/.profile</span></pre><p id="707c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们初始化IPFS存储库:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="4c74" class="ke kf ht lk b fv me mf l mg mh">$ ipfs init --profile server<br/>generating ED25519 keypair...done<br/>peer identity: 12D3KooWQC89gZAV45WbL4ecTofnacJkq6ptQfEFWzcBsu71ED8F<br/>initializing IPFS node at /home/ubuntu/ipfs/data<br/>to get started, enter:</span><span id="180f" class="ke kf ht lk b fv mj mf l mg mh">    ipfs cat /ipfs/QmQPeNsJPyVWPFDVHb77w8G42Fvo15z4bG2X8D2GhfbSXc/readme</span><span id="6ee4" class="ke kf ht lk b fv mj mf l mg mh">2022-01-14T10:23:19.179Z ERROR provider.queue queue/queue.go:124 Failed to enqueue cid: leveldb: closed</span></pre><p id="b17d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您在最后得到错误日志，不要担心。根据<a class="ae jp" href="https://discuss.ipfs.io/t/error-provider-queue-failed-to-enqueue-cid-leveldb-closed/11551/2" rel="noopener ugc nofollow" target="_blank">该螺纹</a>对安装没有任何影响。</p><p id="d429" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">背景</strong>:我们正在用<code class="eh lh li lj lk b">server</code>配置文件运行初始化，所以IPFS不会试图发现本地节点(这会导致大量的内部流量)。</p><p id="5856" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最后，我们将更新IPFS配置以限制使用的存储(默认情况下，我们的实例总共只有8GB可用)。我们还将打开端口8080上的网关，以便能够访问和查看我们的文件。</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="bd48" class="ke kf ht lk b fv me mf l mg mh">$ ipfs config Datastore.StorageMax 2GB<br/>$ ipfs config Addresses.Gateway /ip4/0.0.0.0/tcp/8080</span></pre><h2 id="d0bf" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">步骤5:设置IPFS守护进程</h2><p id="c6eb" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">我们希望IPFS在EC2实例启动时自动启动。为此，我们需要使用<code class="eh lh li lj lk b">systemctl</code>服务。</p><p id="5270" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们创建文件<code class="eh lh li lj lk b">/lib/systemd/system/ipfs.service</code>:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="e766" class="ke kf ht lk b fv me mf l mg mh">$ sudo nano /lib/systemd/system/ipfs.service</span></pre><p id="7043" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们将把这个启动配置添加到文件中:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="7e91" class="ke kf ht lk b fv me mf l mg mh">[Unit]<br/>Description=ipfs daemon<br/>[Service]<br/>ExecStart=/usr/local/bin/ipfs daemon --enable-gc<br/>Restart=always<br/>User=ubuntu<br/>Group=ubuntu<br/>Environment="IPFS_PATH=<!-- -->/home/ubuntu/ipfs/data<!-- -->"<br/>[Install]<br/>WantedBy=multi-user.target</span></pre><p id="19a2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">保存文件并重启<code class="eh lh li lj lk b">systemctl</code>守护进程，让它找到新的服务:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="1068" class="ke kf ht lk b fv me mf l mg mh">$ sudo systemctl daemon-reload<br/>$ sudo systemctl enable ipfs.service</span></pre><p id="269d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们可以启动服务并检查运行状况:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="7f69" class="ke kf ht lk b fv me mf l mg mh">$ sudo systemctl start ipfs<br/>$ sudo systemctl status ipfs</span></pre><p id="939a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您现在应该会看到类似于以下内容的IPFS状态:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="fde5" class="ke kf ht lk b fv me mf l mg mh">● ipfs.service - ipfs daemon<br/>     Loaded: loaded (/lib/systemd/system/ipfs.service; enabled; vendor preset: enabled)<br/>     Active: active (running) since Fri 2022-01-14 11:26:20 UTC; 3s ago<br/>   Main PID: 17712 (ipfs)<br/>      Tasks: 7 (limit: 1147)<br/>     Memory: 50.4M<br/>     CGroup: /system.slice/ipfs.service<br/>             └─17712 /usr/local/bin/ipfs daemon --enable-gc</span><span id="8bd2" class="ke kf ht lk b fv mj mf l mg mh">Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Swarm listening on /p2p-circuit<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Swarm announcing /ip4/127.0.0.1/tcp/4001<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Swarm announcing /ip4/127.0.0.1/udp/4001/quic<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Swarm announcing /ip4/18.192.213.16/tcp/4001<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Swarm announcing /ip6/::1/tcp/4001<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Swarm announcing /ip6/::1/udp/4001/quic<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: API server listening on /ip4/127.0.0.1/tcp/5001<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: WebUI: <a class="ae jp" href="http://127.0.0.1:5001/webui" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5001/webui</a><br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Gateway (readonly) server listening on /ip4/0.0.0.0/tcp/8080<br/>Jan 14 11:26:21 ip-172-31-19-228 ipfs[17712]: Daemon is ready</span></pre><p id="a698" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们可以尝试使用服务的公共DNS获取IPFS文档。在浏览器中打开此链接:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="f9d6" class="ke kf ht lk b fv me mf l mg mh">http://ec2-xx-xxx-xxx-xx.xx-xxxx-x.compute.amazonaws.com:8080/ipfs/QmQPeNsJPyVWPFDVHb77w8G42Fvo15z4bG2X8D2GhfbSXc</span></pre><p id="e119" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您应该会看到这样一个文档:</p><figure class="lm ln lo lp fq lq fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff mk"><img src="../Images/2ba319801cc0dedfb392acbdd0b710a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d8SE1SNKTI8B8d72HnsaIg.png"/></div></div></figure><p id="a974" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您得到的是一个异常，请仔细检查您是否为实例上的TCP流量打开了端口8080，并且启用了IPFS网关(在命令行中键入<code class="eh lh li lj lk b">ipfs config Addresses.Gateway /ip4/0.0.0.0/tcp/8080</code>和<code class="eh lh li lj lk b">sudo systemctl restart ipfs</code>)。</p><h2 id="3b74" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">第六步:建立dApp</h2><p id="2bd9" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">如果您有自己的dApp，只需构建您的应用程序并跳过这一步。</p><p id="e5f2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您还没有，请查看本系列的<a class="ae jp" rel="noopener" href="/coinmonks/create-and-deploy-a-solidity-contract-to-avalanche-with-hardhat-2c5cd5e4fa93">教程1 </a>和<a class="ae jp" rel="noopener" href="/coinmonks/create-an-avalanche-dapp-with-ethers-metamask-and-react-342d8d22cb30">教程2 </a>，其中解释了如何从头开始创建dApp。如果你不感兴趣，你也可以在你的本地机器上查看这个回购<a class="ae jp" href="https://github.com/lechneal/solidity-hello-world-dapp" rel="noopener ugc nofollow" target="_blank">https://github.com/lechneal/solidity-hello-world-dapp</a>的最终代码:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="2eec" class="ke kf ht lk b fv me mf l mg mh">$ git clone <a class="ae jp" href="https://github.com/lechneal/solidity-hello-world-dapp" rel="noopener ugc nofollow" target="_blank">https://github.com/lechneal/solidity-hello-world-dapp</a> <!-- -->my-awesome-contract</span></pre><p id="5931" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了正确加载托管在IPFS上的所有资源，我们希望生成的文件使用相对路径。为此，我们将把行<code class="eh lh li lj lk b">"homepage": "./",</code>添加到文件<code class="eh lh li lj lk b">my-awesome-contract/frontend/package.json</code>中:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="fd11" class="ke kf ht lk b fv me mf l mg mh">{<br/>  "name": "frontend",<br/>  "version": "0.1.0",<br/>  "homepage": "./",<br/>  ...<br/>}</span></pre><p id="5c9c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">那么，让我们使用以下内容来构建应用程序:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="ce70" class="ke kf ht lk b fv me mf l mg mh">$ cd <!-- -->my-awesome-contract/frontend<br/>$ npm install<br/>$ npm run build</span></pre><p id="ab8b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这将生成文件夹<code class="eh lh li lj lk b">my-awesome-contract/frontend/build/</code>中的所有文件。这是我们希望由IPFS托管的文件夹。</p><h2 id="d79b" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">步骤7:上传文件</h2><p id="d6fd" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">要上传我们的文件，我们将使用<code class="eh lh li lj lk b">scp</code>。在本地机器上运行下面的命令，但是调整keypair的路径、构建文件的路径和EC2实例的主机地址:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="6d69" class="ke kf ht lk b fv me mf l mg mh">$ scp -i path/to/your/keypair/ipfs-key-pair.cer -r <!-- -->./<!-- -->build ubuntu@ec2-xx-xxx-xxx-xx.xx-xxxx-x.compute.amazonaws.com:/home/ubuntu/dapp</span></pre><p id="851b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这将把EC2实例的所有构建文件上传到文件夹<code class="eh lh li lj lk b">/home/ubuntu/dapp</code>中。</p><h2 id="812b" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">步骤8:用IPFS添加和固定文件</h2><p id="1b63" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">再次通过AWS管理控制台或SSH连接到EC2实例。连接后，您应该能够看到上传的构建文件:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="c959" class="ke kf ht lk b fv me mf l mg mh">$ ls /home/ubuntu/dapp<br/>asset-manifest.json  favicon.ico  index.html  logo192.png  logo512.png  manifest.json  robots.txt  static</span></pre><p id="a81e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们将整个文件夹添加到IPFS:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="b4d1" class="ke kf ht lk b fv me mf l mg mh">$ ipfs add -r /home/ubuntu/dapp<br/>added Qmer3X6Y5xtWvZ5qxRZcjJtexwdkApgexwp3StY5hE6abk dapp/asset-manifest.json<br/>added QmcFc6EPhavNSfdjG8byaxxV6KtHZvnDwYXLHvyJQPp3uN dapp/favicon.ico<br/>added QmeAXYf4ehZkXFWnofgtLsh8wx2jUcD51Eg8Ak4dkdbhJ2 dapp/index.html<br/>...<br/>added QmSbWfAidZ4Aqg48K3WjfFiSRKg1RDTQR9Jd6kKRLPSnQU dapp/static/css<br/>added QmYuQ7ZmCM9ZrznKB9SeJSQCjU6SncVBWXi9MM5pFSixcu dapp/static/js<br/>added QmSQZCa31phWCpwGdWTSE2zJLxuWnZVdqawp1mYQ2jwZcA dapp/static<br/>added QmYupNAG5sb6nhgYp5LFzDAW9Tn9kHRQwbLrbKBbbDneAp dapp</span></pre><p id="1027" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以看到整个文件夹被添加到IPFS。所有文件都是自动固定的(因此在下一次垃圾收集时不会被删除)。</p><p id="69c9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">🍾🍾🍾好了🍾🍾🍾<br/>您现在应该能够通过使用dApp文件夹的散列来加载整个dApp了(命令行输出的最后一行):</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="e3b0" class="ke kf ht lk b fv me mf l mg mh">added QmYupNAG5sb6nhgYp5LFzDAW9Tn9kHRQwbLrbKBbbDneAp dapp</span></pre><p id="7f31" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以通过在浏览器中打开以下链接，从IPFS网关访问dApp:</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="b23a" class="ke kf ht lk b fv me mf l mg mh">http://ec2-xx-xxx-xxx-xx.xx-xxxx-x.compute.amazonaws.com:8080/ipfs/QmYupNAG5sb6nhgYp5LFzDAW9Tn9kHRQwbLrbKBbbDneAp</span></pre><p id="c764" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">或者，您可以使用此链接通过<code class="eh lh li lj lk b">ipfs.io</code>网关访问您的dApp(尽管这可能需要更长时间):</p><pre class="lm ln lo lp fq ma lk mb mc aw md dt"><span id="0862" class="ke kf ht lk b fv me mf l mg mh">https://ipfs.io/ipfs/QmYupNAG5sb6nhgYp5LFzDAW9Tn9kHRQwbLrbKBbbDneAp</span></pre><h2 id="b12c" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">结束了</h2><p id="5264" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">这就是本教程的全部内容，您在自己的IPFS节点上成功地托管了一个dApp。在接下来的教程中，我们将研究如何将你的dApp与一个分布式域名连接起来。</p><h2 id="069b" class="ke kf ht bd kg kh ki kj kk kl km kn ko jb kp kq kr jf ks kt ku jj kv kw kx ky dt translated">资源和链接:</h2><ul class=""><li id="5c16" class="jq jr ht is b it kz ix la jb lb jf lc jj ld jn jv jw jx jy dt translated">安装https://docs.ipfs.io/install/<a class="ae jp" href="https://docs.ipfs.io/install/" rel="noopener ugc nofollow" target="_blank">IPFS</a></li><li id="c0d0" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated">牵制https://docs.ipfs.io/concepts/persistence/<a class="ae jp" href="https://docs.ipfs.io/concepts/persistence/" rel="noopener ugc nofollow" target="_blank">IPFS</a></li><li id="e0cd" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated">围棋中的IPFS实现:<a class="ae jp" href="https://github.com/ipfs/go-ipfs" rel="noopener ugc nofollow" target="_blank">https://github.com/ipfs/go-ipfs</a></li><li id="5d92" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated">在IPFS上托管一个网站:<a class="ae jp" href="https://docs.ipfs.io/how-to/websites-on-ipfs/multipage-website/#prerequisites" rel="noopener ugc nofollow" target="_blank">https://docs . ipfs . io/how-to/websites-on-ipfs/multipage-website</a></li></ul><blockquote class="ml"><p id="2a89" class="mm mn ht bd mo mp mq mr ms mt mu jn ek translated">加入Coinmonks <a class="ae jp" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jp" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="bd97" class="ke kf ht bd kg kh mv kj kk kl mw kn ko jb mx kq kr jf my kt ku jj mz kw kx ky dt translated">另外，阅读</h2><ul class=""><li id="fe2c" class="jq jr ht is b it kz ix la jb lb jf lc jj ld jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/swap-crypto-on-uniswap" rel="noopener ugc nofollow" target="_blank">如何在Uniswap上交换加密？</a> | <a class="ae jp" href="https://blog.coincodecap.com/a-ads-review" rel="noopener ugc nofollow" target="_blank"> A-Ads审查</a></li><li id="7c01" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/wazirx-vs-coindcx-vs-bitbns-149f4f19a2f1">WazirX vs coin dcx vs bit bns</a>|<a class="ae jp" rel="noopener" href="/coinmonks/blockfi-vs-coinloan-vs-nexo-cb624635230d">block fi vs coin loan vs Nexo</a></li><li id="5279" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/localbitcoins-review-6cc001c6ed56">本地比特币评论</a> | <a class="ae jp" href="https://blog.coincodecap.com/cryptocurrency-savings-accounts" rel="noopener ugc nofollow" target="_blank">加密货币储蓄账户</a></li><li id="3f0c" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/margin-trading" rel="noopener ugc nofollow" target="_blank">什么是融资融券交易</a> | <a class="ae jp" href="https://blog.coincodecap.com/dca" rel="noopener ugc nofollow" target="_blank">美元成本平均法</a></li><li id="4d5f" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/uphold-card-review" rel="noopener ugc nofollow" target="_blank">拥护卡审核</a> | <a class="ae jp" href="https://blog.coincodecap.com/trust-wallet-vs-metamask" rel="noopener ugc nofollow" target="_blank">信任钱包vs MetaMask </a></li><li id="0f41" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/exness-review" rel="noopener ugc nofollow" target="_blank"> Exness评测</a>|<a class="ae jp" href="https://blog.coincodecap.com/bingbon-vs-bitget-vs-moonxbt" rel="noopener ugc nofollow" target="_blank">moon xbt Vs bit get Vs Bingbon</a></li><li id="e9aa" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/passive-income-crypto-lending" rel="noopener ugc nofollow" target="_blank">如何开始通过加密贷款赚取被动收入</a></li><li id="995e" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/bigone-exchange-review-64705d85a1d4"> BigONE交易所评论</a> | <a class="ae jp" href="https://blog.coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">电网交易机器人</a></li><li id="82ae" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/anny-trade-review" rel="noopener ugc nofollow" target="_blank">氹欞侊贸易评论</a> | <a class="ae jp" href="https://blog.coincodecap.com/coinspot-review" rel="noopener ugc nofollow" target="_blank"> CoinSpot评论</a></li><li id="38ec" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/crypto-exchange-in-singapore" rel="noopener ugc nofollow" target="_blank">新加坡十大最佳加密交易所</a> | <a class="ae jp" href="https://blog.coincodecap.com/buy-axs-token" rel="noopener ugc nofollow" target="_blank">购买AXS </a></li><li id="8d99" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">投资印度的最佳加密软件</a> | <a class="ae jp" href="https://blog.coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank"> WazirX P2P </a></li><li id="4a8c" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/zero-fee-crypto-exchanges" rel="noopener ugc nofollow" target="_blank"> 7个最佳零费用加密交易平台</a></li><li id="5add" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/best-online-casinos" rel="noopener ugc nofollow" target="_blank">最佳网上赌场</a> | <a class="ae jp" rel="noopener" href="/coinmonks/futures-trading-bots-5a282ccee3f5">期货交易机器人</a></li><li id="64b3" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/what-are-decentralized-exchanges" rel="noopener ugc nofollow" target="_blank">分散交易所</a> | <a class="ae jp" href="https://blog.coincodecap.com/bitbns-fip" rel="noopener ugc nofollow" target="_blank">比特FIP </a> | <a class="ae jp" href="https://blog.coincodecap.com/bingbon-review" rel="noopener ugc nofollow" target="_blank">宾邦评论</a></li><li id="aa0d" class="jq jr ht is b it jz ix ka jb kb jf kc jj kd jn jv jw jx jy dt translated"><a class="ae jp" href="https://blog.coincodecap.com/buy-crypto-with-credit-card" rel="noopener ugc nofollow" target="_blank">用信用卡购买密码的10个最佳地点</a></li></ul></div></div>    
</body>
</html>