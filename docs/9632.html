<html>
<head>
<title>CSC Payment Gateway Using Python3 &amp; Coinex.net API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python3和Coinex.net API的CSC支付网关</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc-payment-gateway-using-python3-coinex-net-api-95ab8d3f6d2a?source=collection_archive---------38-----------------------#2022-06-30">https://medium.com/coinmonks/csc-payment-gateway-using-python3-coinex-net-api-95ab8d3f6d2a?source=collection_archive---------38-----------------------#2022-06-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="52fe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">嘿嘿嘿！</p><p id="779a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">0Xlive在这里😃</p><p id="b35f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本教程中，我将教你如何使用Python3和Coinex.net API系统创建一个CSC支付网关</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/c9928887004bd27e921c557da5f79eba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhFtJdLbFV0qMQPgOJvT4Q.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">coinex.net/login</figcaption></figure><h1 id="836c" class="ke kf ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated"><strong class="ak"> Coinex Explorer API系统</strong></h1><p id="1f3f" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">Coinex.net是Coinex智能链浏览器，为csc提供API系统。</p><p id="e696" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">但是api是什么呢？</p><h1 id="d6d3" class="ke kf ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">应用程序接口</h1><p id="a3ef" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">一个<strong class="is hu">应用编程接口</strong> ( <strong class="is hu"> API </strong>)是两个或多个计算机程序相互通信的一种方式。它是一种软件接口，为其他软件提供服务。描述如何构建或使用这种连接或接口的文档或标准称为<em class="li"> API规范</em>。符合这个标准的计算机系统被称为<em class="li">实现</em>或<em class="li">公开</em>一个API。术语API既可以指规范，也可以指实现</p><p id="8db4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与coinex.net API系统的交互需要一个我们称之为api-key的密钥，我们如何得到我们的密钥呢？我们开始吧</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/cd328f820399d1661d66d9e343aa58fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qurRMV75jQTwYE7RrwrDnA.jpeg"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">coinex.net/api</figcaption></figure><div class="lj lk fm fo ll lm"><a href="https://testnet.coinex.net/register" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab ej"><div class="lo ab lp cl cj lq"><h2 class="bd hu fv z el lr eo ep ls er et hs dt translated">CoinEx智能链(CSC)浏览器</h2><div class="lt l"><h3 class="bd b fv z el lr eo ep ls er et ek translated">coinex.net帮助您探索和搜索交易，地址，代币和其他活动发生在CoinEx…</h3></div><div class="lu l"><p class="bd b gc z el lr eo ep ls er et ek translated">testnet.coinex.net</p></div></div></div></a></div><blockquote class="lv lw lx"><p id="097b" class="iq ir li is b it iu iv iw ix iy iz ja ly jc jd je lz jg jh ji ma jk jl jm jn hm dt translated">交易新手？尝试<a class="ae lh" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae lh" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><p id="7718" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，我们需要在<a class="ae lh" href="http://coinex.net" rel="noopener ugc nofollow" target="_blank">coinex.net</a>上创建一个帐户来获取我们的api密钥，然后转到<strong class="is hu"> API密钥来</strong>创建新的密钥，请看下面的例子:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/c9928887004bd27e921c557da5f79eba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhFtJdLbFV0qMQPgOJvT4Q.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">API Keys</figcaption></figure><h2 id="345d" class="mb kf ht bd kg mc md me kk mf mg mh ko jb mi mj ks jf mk ml kw jj mm mn la mo dt translated">安装和使用请求</h2><p id="66c9" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">requests是一个python库，用于处理http和etc。我们使用pip来安装请求:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="7aa7" class="mb kf ht mq b fv mu mv l mw mx">pip install requests</span></pre><p id="fa10" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后导入请求:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="c11d" class="mb kf ht mq b fv mu mv l mw mx">import requests</span></pre><p id="cf11" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们还将使用json，因此我们导入JSON:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="b7fc" class="mb kf ht mq b fv mu mv l mw mx">import json</span></pre><h2 id="5f13" class="mb kf ht bd kg mc md me kk mf mg mh ko jb mi mj ks jf mk ml kw jj mm mn la mo dt translated">JSON</h2><p id="04aa" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">JSON是一种开放的标准文件格式和数据交换格式，它使用人类可读的文本来存储和传输由属性值对和数组组成的数据对象。它是一种常见的数据格式，在电子数据交换中有多种用途，包括带有服务器的web应用程序。</p><p id="5924" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以在这里获得关于json的更多信息:</p><div class="lj lk fm fo ll lm"><a href="https://www.json.org/json-en.html" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab ej"><div class="lo ab lp cl cj lq"><h2 class="bd hu fv z el lr eo ep ls er et hs dt translated">JSON</h2><div class="lt l"><h3 class="bd b fv z el lr eo ep ls er et ek translated">编辑描述</h3></div><div class="lu l"><p class="bd b gc z el lr eo ep ls er et ek translated">www.json.org</p></div></div><div class="my l"><div class="mz l na nb nc my nd jy lm"/></div></div></a></div><p id="edf8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们开始吧</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="9a20" class="mb kf ht mq b fv mu mv l mw mx">api = requests.get("https://www.coinex.net/api/v1/statistics/cet", headers=headers).json()</span></pre><p id="21d1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在上面提到的代码中，我们定义了api，但是header呢？请求头是什么？</p><p id="6a16" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在url中使用api-key存在很多安全隐患。您的api密钥可能会从您的浏览器历史记录中泄露，或者攻击者可以使用MITM attak窃取您的密钥。出于安全原因，coinex建议在标头请求中使用api-key。</p><div class="lj lk fm fo ll lm"><a href="https://www.coinex.net/api/docs/#/en-us/" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab ej"><div class="lo ab lp cl cj lq"><h2 class="bd hu fv z el lr eo ep ls er et hs dt translated">CSC资源管理器开放API</h2><div class="lt l"><h3 class="bd b fv z el lr eo ep ls er et ek translated">描述</h3></div><div class="lu l"><p class="bd b gc z el lr eo ep ls er et ek translated">www.coinex.net</p></div></div></div></a></div><p id="af83" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我创建了一个名为header的变量来存储api-key:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="eb1f" class="mb kf ht mq b fv mu mv l mw mx">headers = {'apikey': 'YOU API KEY',} #put your api key here</span></pre><p id="3b83" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我想从api获得cet价格:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="726d" class="mb kf ht mq b fv mu mv l mw mx">print(api['data']['price'])</span></pre><p id="cf04" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">结果将返回cet价格</p><p id="cd07" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们已经讨论了cet，让我们了解链状态:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="61a8" class="mb kf ht mq b fv mu mv l mw mx">api = requests.get("https://www.coinex.net/api/v1/statistics/chain", headers=headers).json()</span></pre><p id="021b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这提供了以下信息:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="c612" class="mb kf ht mq b fv mu mv l mw mx">active<br/>average_time<br/>latest_height<br/>staking<br/>tx_count<br/>tx_per_second</span></pre><h2 id="6700" class="mb kf ht bd kg mc md me kk mf mg mh ko jb mi mj ks jf mk ml kw jj mm mn la mo dt translated"><strong class="ak">检查交易</strong></h2><p id="eed7" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">现在我们熟悉了csc链和coinex.net API。让我们假设我们有一个网上商店。当客户支付csc作为付款方式时，我们必须检查:交易成功吗？首先，我们需要更新api:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="0283" class="mb kf ht mq b fv mu mv l mw mx">api = requests.get("https://www.coinex.net/api/v1/transactions/"+tx, headers=headers).json()</span></pre><p id="2c5c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要获取TX哈希:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="b77d" class="mb kf ht mq b fv mu mv l mw mx">tx = input("Enter TX Hash")</span></pre><p id="8436" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它将提供以下信息:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="2fbe" class="mb kf ht mq b fv mu mv l mw mx">data<br/>error<br/>fee<br/>timestamp<br/>value</span></pre><p id="f290" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们需要检查响应:</p><pre class="jp jq jr js fq mp mq mr ms aw mt dt"><span id="35d0" class="mb kf ht mq b fv mu mv l mw mx">if ( len(api['data']['error']) == 0 ):<br/>    print("transaction was successfull")<br/>else:<br/>    print("something wrong!")</span></pre><p id="f4e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果错误长度为0，则表示交易成功，否则存在问题</p><p id="4191" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">祝贺🥳</p><p id="9c96" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们已经创建了一个简单的csc支付功能使用python和coinex.net API系统</p></div></div>    
</body>
</html>