<html>
<head>
<title>Decentralised Exchange Part 2: Uniswap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分散交换第2部分:Uniswap</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/decentralised-exchange-part-2-uniswap-3d1b8aca5787?source=collection_archive---------11-----------------------#2022-01-11">https://medium.com/coinmonks/decentralised-exchange-part-2-uniswap-3d1b8aca5787?source=collection_archive---------11-----------------------#2022-01-11</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/a0fadbd7a916bad79a6bf9eb61be1fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7s0V3E8weget4WrTBZPqmA.jpeg"/></div></div></figure><p id="260f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在<a class="ae jz" rel="noopener" href="/@vsurya.ayyagari/decentralised-exchange-part-1-centralised-exchanges-16e503f351d3">上一篇文章</a>中，我们确定了交易所是买家和卖家见面的地方——通过查看资产买卖的价格，我们可以决定资产的“市场价格”(市场根据需求和供应给资产的价格)。</p><p id="9d65" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">既然我们已经花了整整一篇文章来讨论<a class="ae jz" rel="noopener" href="/@vsurya.ayyagari/decentralised-exchange-part-1-centralised-exchanges-16e503f351d3">集中式交换</a>，那么让我们来讨论一下分散式交换与集中式交换有何不同:</p><ol class=""><li id="8336" class="ka kb ht jd b je jf ji jj jm kc jq kd ju ke jy kf kg kh ki dt translated">传统的交易所被认为是集中的，因为交易所的规则是由政府指定的实体制定和执行的。UniSwap是一个分散的交易所，这一事实并不意味着没有任何实体控制其运作规则。在UniSwap中，所有与治理相关的决定都是通过投票程序做出的。</li><li id="b8da" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy kf kg kh ki dt translated">虽然传统的交换只在工作日的特定时间运行，但UniSwap等分散式交换是全天候运行的。</li><li id="68fd" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy kf kg kh ki dt translated">严格来说，UniSwap的核心功能不是一个<strong class="jd hu">【交易所】</strong>的功能，而是一个做市商的功能(我们在<a class="ae jz" rel="noopener" href="/@vsurya.ayyagari/decentralised-exchange-part-1-centralised-exchanges-16e503f351d3">上一篇文章</a>中简要谈到了做市商)。虽然传统交易所遵循“订单簿”风格，但UniSwap等分散式交易所使用“自动做市商”或“恒定功能做市商”——本文稍后将详细介绍。</li><li id="8495" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy kf kg kh ki dt translated">在UniSwap中，我们不是真正的“买”或“卖”，而是从本质上用一个令牌交换另一个令牌。现在你知道UniSwap的名字是怎么来的了。</li></ol><p id="4690" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">买卖和互换有什么区别？假设你在纽约证券交易所，想卖出我的10只苹果股票，买入特斯拉股票。在写这篇文章的时候，1股苹果股票价值146美元。我正在出售我的十只股票，这将给我1460美元。1股特斯拉股票763美元。我可以在交易所购买1股特斯拉股票，剩下679美元。然而，假设纽约证券交易所像一个分散的交易所那样运作。那样的话，我可以给交易所10股苹果股票，得到1.913股特斯拉股票。我们会把一只股票换成另一只。</p><figure class="kp kq kr ks fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ko"><img src="../Images/3646857bae3ddd854b1573ca3752e4c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V4x__HQPSBagrvrfGutXPQ.png"/></div></div></figure><p id="edce" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我喜欢把自动做市商(AMM)想象成一个机器人，带着一个装满硬币的桶。我们都可以去AMM给他一个信物；它会把我们给的代币扔进桶里，给你一定数量你想要的代币作为交换。现在，如果我带着一个eth去UniSwap AMM办事处索要比特币，UniSwap将如何决定用多少比特币来换取一个eth？</p><h1 id="a348" class="kt ku ht bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">流动性池:</h1><p id="318d" class="pw-post-body-paragraph jb jc ht jd b je lr jg jh ji ls jk jl jm lt jo jp jq lu js jt ju lv jw jx jy hm dt translated">流动性池是我们AMM机器人的水桶。在UniSwap中，一个流动性池或“桶”只能有两个令牌。你给这个池一个代币，AMM决定你得到的另一个代币的数量。这些代币只能是一种特定类型的代币，称为ERC 20代币(我们将很快写一篇关于以太坊代币类型的文章)。现在，知道ERC-20是一种可以在以太坊区块链上创建和交易的代币就足够了。这也意味着UniSwap只能在以太坊区块链和其中的代币上运行。</p><h1 id="3486" class="kt ku ht bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">恒定功能做市商:</h1><p id="21c4" class="pw-post-body-paragraph jb jc ht jd b je lr jg jh ji ls jk jl jm lt jo jp jq lu js jt ju lv jw jx jy hm dt translated">恒定函数做市商是使用数学函数来确定用多少代币来换取另一代币的做市商。</p><p id="fcd0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">既然我们已经有了这些定义，让我们来谈谈UniSwap是如何工作的。UniSwap使用数学来确定如何交换令牌。</p><p id="0ae4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，我们希望确保经济学的基本供求规则成立——我们将使用数学来确定价格，而不是由一个中央实体根据它获得的买入或卖出订单的数量来确定价格。因此，如果我们有两个代币的流动性池，其中一个代币的需求高于另一个，我们希望交易者为需求高的代币支付高价。</p><p id="ef0c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在本文的其余部分，我们将尝试解释互换背后的数学原理</p><h1 id="f4ba" class="kt ku ht bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">简单的解释是:</h1><p id="0e87" class="pw-post-body-paragraph jb jc ht jd b je lr jg jh ji ls jk jl jm lt jo jp jq lu js jt ju lv jw jx jy hm dt translated">假设有一个流动性池，其中有两个代币A和B。我去了一个流动性池，其中有代币A和B，我们想用一些A交换B。AMM使用以下公式计算出要给我多少代币B</p><p id="fc80" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><code class="eh lw lx ly lz b">Ra X Rb = k (Constant)</code></p><p id="ff72" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这里，</p><ul class=""><li id="2138" class="ka kb ht jd b je jf ji jj jm kc jq kd ju ke jy ma kg kh ki dt translated">Ra —是流动性池中礼物的代币数量。</li><li id="803b" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated">Rb——流动性池中存在的B的代币数量</li><li id="541b" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated">k是一个常数值</li></ul><p id="72d9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">该公式本质上表明，无论发生什么情况，流动性池中A的令牌数和B的令牌数的乘积应该保持不变。</p><p id="017c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们假设当前的流动性池有1000个A的令牌和50个B的令牌，我们想用5个B的令牌交换A。我们去流动性池，给它5个B的令牌。AMM将通过满足一个条件来确定我们应该获得多少个A的令牌。流动性池中代币A和B数量的乘积应保持不变。</p><p id="deca" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">由于流动性池有1000个A的代币和50个B的代币，我们有(1000 / 50) 20个A的代币，所以对于5个B的代币，我们将得到5 X 20 = 100个A的代币。</p><p id="2bb4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在我们交易之后，A和B的流动性池中A和B的代币数量会发生变化。现在，因为A的100个代币被用来交换B的5个代币</p><ul class=""><li id="188a" class="ka kb ht jd b je jf ji jj jm kc jq kd ju ke jy ma kg kh ki dt translated"><code class="eh lw lx ly lz b">Ra = 900</code>和</li><li id="d179" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated">下次有人来我们的交易所进行交易时，我们会用<code class="eh lw lx ly lz b">(900 / 55) 16.36 tokens of A</code>换<code class="eh lw lx ly lz b">each token of B</code>，而不是20。</li></ul><p id="d1c5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们可以绘制一张图表，显示由于我们的交易，两种代币的互换价格是如何变化的:</p><figure class="kp kq kr ks fq iu fe ff paragraph-image"><div class="fe ff mb"><img src="../Images/c3507a57585f8bdf7cf2525efdb6243a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*jrPEDEQ3uHsT2q_GaDDZWQ.png"/></div></figure><p id="fae1" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">从上图中可以看出，如果对代币A的需求增加，流动性池中代币A的数量会减少，因为更多的交易者愿意用代币B交换代币A。随着池中代币A的数量减少，代币A的成本会增加；也就是说，你必须支付更多的B的代币来获得A的代币——因此，经济学的基本供求规则得到了遵守。仅此而已。这就是臭名昭著的常数函数做市商函数(注意，在上面的例子中，我们使用的数学函数是一个乘积函数，所以我们的常数函数做市商是常数乘积做市商)，它用于提供流动性，使您能够在以太坊区块链上用一个代币交换另一个代币。然而，为了便于理解，我们上面解释的是该函数的一个极其简化的版本。如果你不是真的对数学感兴趣，你可以就此打住，但是如果你想深入研究，请继续读下去</p><p id="7bc2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">事实上，你仍然在阅读这意味着你不满意上面的解释。你懂数学，你可能指出了上面的致命缺陷——或者你只是对文章的其余部分感到好奇！</p><p id="87c2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在上述情况下:交易前代币数量的乘积</p><p id="c022" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><code class="eh lw lx ly lz b">Ra X Rb = (1000 X 50) 50,000</code>。</p><p id="6222" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">但是交易之后</p><p id="7d13" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><code class="eh lw lx ly lz b">Ra X Rb = (900 X 55) 49,500</code>。</p><p id="2b45" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">刚刚发生了什么？为什么常数乘积函数的乘积不是常数？事实证明。恒积函数比<code class="eh lw lx ly lz b">Ra X Rb</code>稍微复杂一点。如果你对数学感兴趣，我们将在下一篇文章中尝试解释恒定产品市场的创造者是如何工作的。</p><p id="153a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">此外，UniSwap将发布一个新版本——V3，在之前版本的基础上进行了修改，并对我们在本文中讨论的内容进行了一些改进。我们没有深入研究V3，因为本文的目的是帮助您了解分散式交换是如何工作的，而不是端到端地解释UniSwap。如果你想了解更多关于UniSwap新版本的信息，请查看这篇文章<a class="ae jz" href="https://uniswap.org/blog/uniswap-v3/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="c737" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">本文原载于博客blockchainiseasy . in .<a class="ae jz" href="https://blockchainiseasy.in/decentralised-exchange-part-2/" rel="noopener ugc nofollow" target="_blank">https://blockchainiseasy.in/decentralised-exchange-part-2/</a></p><blockquote class="mc"><p id="a39c" class="md me ht bd mf mg mh mi mj mk ml jy ek translated">加入Coinmonks <a class="ae jz" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jz" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="bd97" class="mm ku ht bd kv mn mo mp kz mq mr ms ld jm mt mu lh jq mv mw ll ju mx my lp mz dt translated">另外，阅读</h2><ul class=""><li id="3621" class="ka kb ht jd b je lr ji ls jm na jq nb ju nc jy ma kg kh ki dt translated">最佳<a class="ae jz" href="https://bitquery.io/blog/best-blockchain-analysis-tools-and-software" rel="noopener ugc nofollow" target="_blank">区块链分析</a>工具| <a class="ae jz" rel="noopener" href="/coinmonks/earn-bitcoin-6e8bd3c592d9">赚比特币</a></li><li id="b037" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/crypto-arbitrage-guide-how-to-make-money-as-a-beginner-62bfe5c868f6">加密套利</a>指南| <a class="ae jz" rel="noopener" href="/coinmonks/how-to-short-bitcoin-568a2d0b4ae5">如何做空比特币</a></li><li id="7b16" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated"><a class="ae jz" href="https://blog.coincodecap.com/coinbase-vs-wazirx" rel="noopener ugc nofollow" target="_blank">比特币基地vs瓦济克斯</a> | <a class="ae jz" href="https://blog.coincodecap.com/bitrue-review" rel="noopener ugc nofollow" target="_blank">比特鲁点评</a> | <a class="ae jz" href="https://blog.coincodecap.com/poloniex-vs-bittrex" rel="noopener ugc nofollow" target="_blank">波洛涅克斯vs比特鲁</a></li><li id="8f66" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated"><a class="ae jz" href="https://blog.coincodecap.com/crypto-exchanges-in-germany" rel="noopener ugc nofollow" target="_blank">德国最佳加密交易所</a> | <a class="ae jz" href="https://blog.coincodecap.com/arbitrum" rel="noopener ugc nofollow" target="_blank"> Arbitrum:第二层解决方案</a></li><li id="7ee2" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/binance-trading-bots-d0d57bb62c4c">币安交易机器人</a> | <a class="ae jz" rel="noopener" href="/coinmonks/okex-review-6b369304110f"> OKEx评论</a> | <a class="ae jz" href="https://blog.coincodecap.com/atani-review" rel="noopener ugc nofollow" target="_blank">阿塔尼评论</a></li><li id="d235" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/best-crypto-signals-telegram-5785cdbc4b2b">最佳加密交易信号电报</a> | <a class="ae jz" rel="noopener" href="/coinmonks/moonxbt-review-6e4ab26d037"> MoonXBT评论</a></li><li id="8be1" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated">如何在Bitbns上购买柴犬(SHIB)币？ | <a class="ae jz" href="https://blog.coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">买弗洛基</a></li><li id="5e10" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated"><a class="ae jz" href="https://blog.coincodecap.com/coinflex-review" rel="noopener ugc nofollow" target="_blank"> CoinFLEX评论</a> | <a class="ae jz" href="https://blog.coincodecap.com/aex-exchange-review" rel="noopener ugc nofollow" target="_blank"> AEX交易所评论</a> | <a class="ae jz" href="https://blog.coincodecap.com/upbit-review" rel="noopener ugc nofollow" target="_blank"> UPbit评论</a></li><li id="3d61" class="ka kb ht jd b je kj ji kk jm kl jq km ju kn jy ma kg kh ki dt translated"><a class="ae jz" href="https://blog.coincodecap.com/best-cryptocurrency-blogs" rel="noopener ugc nofollow" target="_blank">十大最佳加密货币博客</a> | <a class="ae jz" href="https://blog.coincodecap.com/youhodler-review" rel="noopener ugc nofollow" target="_blank"> YouHodler评论</a></li></ul></div></div>    
</body>
</html>