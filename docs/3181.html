<html>
<head>
<title>Delegation in Bitcoin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币中的委托</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/delegation-in-bitcoin-ac7afcab991e?source=collection_archive---------12-----------------------#2022-03-23">https://medium.com/coinmonks/delegation-in-bitcoin-ac7afcab991e?source=collection_archive---------12-----------------------#2022-03-23</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="093a" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">爱丽丝允许鲍勃花她的比特币</h2></div><p id="fa80" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们为Alice介绍了一种新颖的方法，允许Bob花费她的UTXO/coins，而不用给Bob她的私钥。Alice在Bob的公钥上签名，从而将消费的权力委托给Bob。委托有许多用例。例如，用户可以授权一个应用程序代表她花钱。或者首席财务官希望部门主管向该部门发放资金。</p><figure class="kf kg kh ki fq kj fe ff paragraph-image"><a href="https://www.gemini.com/cryptopedia/proof-of-stake-delegated-pos-dpos"><div class="fe ff ke"><img src="../Images/bc5bc03b16de76acb8fde214ce89d39f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z1yJYp2Eq8NF4a9GuOarIw.png"/></div></a></figure><h1 id="7641" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">委托</h1><p id="2076" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">之前，我们已经开发了一种方法，让<a class="ae lj" href="https://xiaohuiliu.medium.com/ecdsa-based-oracles-on-bitcoin-e69d15afe6c5" rel="noopener"> Alice使用她的比特币私钥在交易中签署任意消息</a>。对于委派工作，<strong class="jk hu">消息只是鲍勃的公钥</strong>。通过在Bob的密钥上签名，Alice授权Bob使用她的硬币。</p><p id="6867" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当Alice想要委托时，她首先将资金锁定在以下合同中。</p><figure class="kf kg kh ki fq kj"><div class="bz el l di"><div class="lk ll l"/></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek"><a class="ae lj" href="https://github.com/sCrypt-Inc/boilerplate/tree/master/contracts/delegate.scrypt" rel="noopener ugc nofollow" target="_blank">Contract Delegate</a></figcaption></figure><p id="607f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">她使用她自己的私钥，即第6行的<strong class="jk hu"> <em class="lq"> ownerSig </em> </strong>，对鲍勃的公钥进行签名。她将部分签名的交易交给Bob。Bob将他的签名(<strong class="jk hu"> <em class="lq"> delegateSig </em> </strong>在第6行)添加到交易中，并广播它以花费锁定的资金。第10行验证Bob的公钥是经过签名的，因此得到了Alice的授权。第13行检查Bob的签名。</p><p id="f5df" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">注意，委托并不创建任何onchain事务，只有当Bob实际使用UTXO时才会发生。</p><p id="994c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果Alice想自己使用UTXO，她可以简单地通过签署自己的公钥来委托给自己。因此，她可以在Bob移动硬币之前撤销委托。</p><h2 id="235c" class="lr kn ht bd ko ls lt lu ks lv lw lx kw jr ly lz ky jv ma mb la jz mc md lc me dt translated">委托vs多重签名</h2><p id="d0be" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">与Alice和Bob之间的传统2-of-2 multisig相比，上述契约可以委托给任何人(例如，委托给Charlie或Dave)，甚至在创建UTXO之后。代表事先未确定，以后可以随意选择，而multisig必须事先知道所有代表，这在以后是不能改变的。授权更加灵活。</p><h2 id="bb25" class="lr kn ht bd ko ls lt lu ks lv lw lx kw jr ly lz ky jv ma mb la jz mc md lc me dt translated">多次委托</h2><p id="31e4" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">在Alice委托给Bob之后，Bob委托给Charlie，Charlie再次委托给Dave，依此类推。</p><p id="4bbc" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以下修改后的合同允许多次委托。</p><figure class="kf kg kh ki fq kj"><div class="bz el l di"><div class="lk ll l"/></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek"><a class="ae lj" href="https://github.com/sCrypt-Inc/boilerplate/tree/master/contracts/oracle.scrypt" rel="noopener ugc nofollow" target="_blank">Contract Delegate</a></figcaption></figure><p id="fe52" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">基本上，Alice对Bob的公钥进行签名，Bob对Charlie的公钥进行签名，…第13行验证了签名，因此和以前一样验证了委托。只有最后一名代表必须在第18行签名才能使用硬币。</p></div><div class="ab cl mf mg hb mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="hm hn ho hp hq"><p id="12a2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">[1]也可以使用替代签名算法，例如<a class="ae lj" rel="noopener" href="/coinmonks/access-external-data-from-bitcoin-smart-contracts-2ecdc7448c43"> Rabin签名</a>。我们在这里选择ECDSA是因为它的简单性，因为它重用了比特币密钥。</p><p id="e4d5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">[2]注意<strong class="jk hu"><em class="lq">Oracle . verify data()</em></strong>在内部使用<strong class="jk hu"> SIGHASH_NONE </strong>，因此Bob可以根据自己的意愿支出任何产出。</p><blockquote class="mm"><p id="b806" class="mn mo ht bd mp mq mr ms mt mu mv kd ek translated">加入Coinmonks <a class="ae lj" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae lj" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="17d4" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz mw ja ky jc mx jd la jf my jg lc ld dt translated">另外，阅读</h1><ul class=""><li id="8c20" class="mz na ht jk b jl le jo lf jr nb jv nc jz nd kd ne nf ng nh dt translated"><a class="ae lj" href="https://coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">投资印度的最佳加密软件</a> | <a class="ae lj" href="https://coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank"> WazirX P2P </a></li><li id="37a5" class="mz na ht jk b jl ni jo nj jr nk jv nl jz nm kd ne nf ng nh dt translated"><a class="ae lj" href="https://coincodecap.com/zero-fee-crypto-exchanges" rel="noopener ugc nofollow" target="_blank"> 7个最佳零费用加密交易平台</a></li><li id="1b3b" class="mz na ht jk b jl ni jo nj jr nk jv nl jz nm kd ne nf ng nh dt translated"><a class="ae lj" href="https://coincodecap.com/best-online-casinos" rel="noopener ugc nofollow" target="_blank">最佳网上赌场</a> | <a class="ae lj" rel="noopener" href="/coinmonks/futures-trading-bots-5a282ccee3f5">期货交易机器人</a></li><li id="66e5" class="mz na ht jk b jl ni jo nj jr nk jv nl jz nm kd ne nf ng nh dt translated"><a class="ae lj" href="https://coincodecap.com/what-are-decentralized-exchanges" rel="noopener ugc nofollow" target="_blank">分散交易所</a> | <a class="ae lj" href="https://coincodecap.com/bitbns-fip" rel="noopener ugc nofollow" target="_blank">比特FIP </a> | <a class="ae lj" href="https://coincodecap.com/bingbon-review" rel="noopener ugc nofollow" target="_blank">宾邦评论</a></li><li id="580e" class="mz na ht jk b jl ni jo nj jr nk jv nl jz nm kd ne nf ng nh dt translated">用信用卡购买密码的10个最佳地点</li><li id="5e4a" class="mz na ht jk b jl ni jo nj jr nk jv nl jz nm kd ne nf ng nh dt translated"><a class="ae lj" href="https://coincodecap.com/5-best-crypto-trading-bots-in-canada" rel="noopener ugc nofollow" target="_blank">加拿大最佳加密交易机器人</a> | <a class="ae lj" href="https://coincodecap.com/bybit-binance-moonxbt" rel="noopener ugc nofollow" target="_blank"> Bybit vs币安</a></li></ul></div></div>    
</body>
</html>