<html>
<head>
<title>Exploring Security Checkpoints in Shard Blob Transactions Based on EIP-4844 by Fairyproof</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于EIP-4844的分片Blob事务中安全检查点的探索</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/exploring-security-checkpoints-in-shard-blob-transactions-based-on-eip-4844-by-fairyproof-8c3fc755fb14?source=collection_archive---------33-----------------------#2022-03-29">https://medium.com/coinmonks/exploring-security-checkpoints-in-shard-blob-transactions-based-on-eip-4844-by-fairyproof-8c3fc755fb14?source=collection_archive---------33-----------------------#2022-03-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/fd8c4924a90c9f9769e8b1f8f0e8ab5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2OFE7qRFbLlnZ6V7LOfCXg.jpeg"/></div></div></figure><p id="fbb2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在以太坊的联合创始人Vitalik Buterin的领导下，最近提出了一个EIP，为“携带blob的交易”创建一种新的交易格式。它就是EIP-4844[1]。</p><p id="d0a8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">根据这个EIP的规范，尽管它是一个权宜之计，但它为blob事务引入的格式将与以太坊最终的分片规范中存在的格式相同[2]。最终，所有的汇总解决方案[3]将不得不使用分片数据(即blobs ),而不是他们现在使用的calldata，如果他们希望向以太坊提交汇总数据的话。</p><p id="9b33" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因此，这个EIP将很可能被以太坊的客户端采用和实现，现有的汇总解决方案最终将不得不做出更改以符合这个EIP。</p><p id="5733" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">每当引入变更时，也可能引入问题或风险。</p><p id="dbaa" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">作为一家区块链安全公司，Fairyproof的研究团队对这些变化可能带来的问题或风险非常感兴趣。我们研究了这个EIP，探索了可能的安全检查点，并想分享一些关于这些检查点的想法。</p><p id="6ccb" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">该EIP在以太坊客户端和汇总解决方案的实现方面引入了重大变化。</p><p id="c3f0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在以太坊客户端，提出了新的blob事务，因此引入了signedblobtransactionnetworkwrapper等新的数据结构，引入了validate _ blob _ transaction _ wrapper等新的算法。</p><p id="7860" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在汇总解决方案方面，乐观汇总解决方案[4]和ZK汇总解决方案[5]都需要将汇总数据放入blob事务中。</p><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff jz"><img src="../Images/29acccb1fc8a89e4628e13d32b26e1c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9SfNHvAzS75g60BPgC2AQQ.png"/></div></div></figure><p id="17f2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以太坊客户端和汇总解决方案中的变化可能不会引入明显的漏洞，但是新引入的blob事务可能会带来两种类型的内存池问题。</p><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff jz"><img src="../Images/72137f50f3c62032e97f1f7acbb5d38c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IlkRIUt-tiurMQNz-Q6xgw.png"/></div></div></figure><p id="d586" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">第一个是blob事务具有可变的内在气体成本。并且这将使内存池暴露于攻击，因为事务可能有资格被包括在一个块中，但是可能没有资格被包括在下一个块中。为了防止这种攻击，本EIP建议只广播“其gas至少是当前最小值的两倍”的交易，以大大增加合法交易被包括在块中的机会。</p><p id="78ca" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">第二个问题是blob事务在mempool层有很大的数据量，这将使mempool暴露于DoS攻击。该EIP建议将“内存池替换的最小增量从1.1x增加到2x”，以增加攻击者的成本，从而减少他/她的攻击企图。</p><p id="bcc3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">值得注意的是，EIP称这两项只是建议。这意味着开发人员可能不需要在他/她的实现中遵循它们。但是就安全性而言，开发人员需要尽一切办法在他/她的代码中处理这些问题。</p><p id="74a6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是区块链安全公司在审计实现该EIP的以太坊客户端时需要密切关注的。</p><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff jz"><img src="../Images/451e058f805dde6385d76b1647301a69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wh1wOtIe6Zz1x9iaZ_aDsw.png"/></div></div></figure><p id="159f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">此外，提出这两个建议是为了对抗对内存池的攻击。如果它们被实施，这意味着如果非恶意用户希望他/她的交易被迅速处理，他/她需要支付符合这些建议的燃气费。</p><p id="416a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是用户应该知道的。</p><p id="fa9f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">参考资料:</p><p id="e514" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">[1]https://eips.ethereum.org/EIPS/eip-4844，2022年2月25日，EIP-4844:碎片Blob交易</p><p id="1303" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">[2]碎片锁链，【https://ethereum.org/en/upgrades/shard-chains/】T2</p><p id="580c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">[3]一个不完整的汇总指南，【https://vitalik.ca/general/2021/01/05/rollup.html,】T42021年1月5日</p><p id="c2ba" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">[4]乐观向上，</p><p id="e459" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><a class="ae ke" href="https://metamask.io/," rel="noopener ugc nofollow" target="_blank">https://docs . eth hub . io/ether eum-roadmap/layer-2-scaling/optimistic _ roll ups/，</a></p><p id="194b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">[5] ZK-Rollups，<a class="ae ke" href="https://docs.ethhub.io/ethereum-roadmap/layer-2-scaling/zk-rollups/" rel="noopener ugc nofollow" target="_blank">https://docs . eth hub . io/ether eum-roadmap/layer-2-scaling/ZK-roll ups/</a></p><blockquote class="kf"><p id="546a" class="kg kh ht bd ki kj kk kl km kn ko jy ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="a565" class="kp kq ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">另外，阅读</h1><ul class=""><li id="1b09" class="ln lo ht jd b je lp ji lq jm lr jq ls ju lt jy lu lv lw lx dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/cryptocurrency-savings-accounts-be3bc0feffbf">加密货币储蓄账户</a> | <a class="ae ke" href="https://coincodecap.com/best-crypto-trading-bots" rel="noopener ugc nofollow" target="_blank">加密交易机器人</a></li><li id="e26f" class="ln lo ht jd b je ly ji lz jm ma jq mb ju mc jy lu lv lw lx dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/bigone-exchange-review-64705d85a1d4"> BigONE交易所评论</a> | <a class="ae ke" href="https://coincodecap.com/cex-io-review" rel="noopener ugc nofollow" target="_blank"> CEX。IO审查</a> | <a class="ae ke" rel="noopener" href="/coinmonks/swapzone-review-crypto-exchange-data-aggregator-e0ad78e55ed7"> Swapzone审查</a></li><li id="0007" class="ln lo ht jd b je ly ji lz jm ma jq mb ju mc jy lu lv lw lx dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-margin-trading-exchange-bcbfcbf7b8e3">最佳比特币保证金交易</a> | <a class="ae ke" href="https://coincodecap.com/bityard-margin-trading" rel="noopener ugc nofollow" target="_blank">比特币保证金交易</a></li><li id="34a0" class="ln lo ht jd b je ly ji lz jm ma jq mb ju mc jy lu lv lw lx dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/crypto-margin-trading-exchanges-428b1f7ad108">加密保证金交易交易所</a> | <a class="ae ke" rel="noopener" href="/coinmonks/earn-bitcoin-6e8bd3c592d9">赚取比特币</a></li><li id="4738" class="ln lo ht jd b je ly ji lz jm ma jq mb ju mc jy lu lv lw lx dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/wazirx-vs-coindcx-vs-bitbns-149f4f19a2f1">WazirX vs coin dcx vs bit bns</a>|<a class="ae ke" rel="noopener" href="/coinmonks/blockfi-vs-coinloan-vs-nexo-cb624635230d">block fi vs coin loan vs Nexo</a></li></ul></div></div>    
</body>
</html>