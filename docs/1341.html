<html>
<head>
<title>Mint an NFT in a decentralized manner— using Alchemy, Ethers.js &amp; Pinata APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以分散的方式制造NFT——使用Alchemy，Ethers.js &amp; Pinata APIs</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/mint-an-nft-in-a-decentralized-manner-using-alchemy-ethers-js-pinata-apis-da69a3b83d84?source=collection_archive---------1-----------------------#2022-02-28">https://medium.com/coinmonks/mint-an-nft-in-a-decentralized-manner-using-alchemy-ethers-js-pinata-apis-da69a3b83d84?source=collection_archive---------1-----------------------#2022-02-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><h2 id="eaf5" class="hr hs ht bd b gc hu hv hw hx hy hz ek ia translated" aria-label="kicker paragraph">NFT系列</h2><div class=""/><div class=""><h2 id="f0e4" class="pw-subtitle-paragraph iz ic ht bd b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ek translated">如何使用炼金术、ethers.js和pinata以分散的方式铸造NFT的指南</h2></div><p id="a343" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">作为本文的一部分，我们试图在Polygon Mumbai Testnet上使用alchemy、ethers.js和pinata apis在服务器端(nodejs)创建一个NFT。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff ko"><img src="../Images/378b3ed838d2da6b57249da3a1933200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zIYgh6tO0rG4gG95gwP0-A.png"/></div></div></figure><p id="f5fc" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">铸造一个NFT就像把我们的数字资产放到区块链上，这样它们就可以在NFT市场上交易。</p><p id="6f42" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">按照区块链的说法，NFT就像是元数据的交易。显然，铸造NFT就是在区块链执行交易的过程。</p></div><div class="ab cl la lb hb lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hm hn ho hp hq"><h2 id="a2bb" class="lh li ht bd lj lk ll lm ln lo lp lq lr ka ls lt lu ke lv lw lx ki ly lz ma hz dt translated">NFT造币厂的建筑看起来怎么样？</h2><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff mb"><img src="../Images/3dbd7b1bb929cdf5673a4fbb1be776a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L4zYd7G8ZtRnth1F7CEL9Q.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">NFT Architecture</figcaption></figure></div><div class="ab cl la lb hb lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hm hn ho hp hq"><h2 id="15e8" class="lh li ht bd lj lk ll lm ln lo lp lq lr ka ls lt lu ke lv lw lx ki ly lz ma hz dt translated">魔力</h2><p id="e755" class="pw-post-body-paragraph jr js ht jt b ju mg jd jw jx mh jg jz ka mi kc kd ke mj kg kh ki mk kk kl km hm dt translated"><a class="ae ml" href="https://docs.alchemy.com/alchemy/" rel="noopener ugc nofollow" target="_blank"> Alchemy </a>是一个中间件，它使得开发人员的区块链通信更加容易。在炼金术<a class="ae ml" href="https://www.alchemy.com/" rel="noopener ugc nofollow" target="_blank">https://www.alchemy.com/</a>上创建一个免费账户，使用他们的开发平台和API来请求区块链。</p><p id="c74c" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><strong class="jt id"> <em class="kn">炼金术账户设置</em> </strong></p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff mm"><img src="../Images/82909f20ab6d0f9d47767665233bca19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGJNM6GDyKDN8B9E_yxJAQ.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Alchemy Sign Up or Sign In</figcaption></figure><p id="26de" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">通过选择所需的区块链网络创建一个新的炼金术应用程序。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff mn"><img src="../Images/dbcefef75974d46f28282efded9371a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rVtfLd4uxhuFlIgNfT_ZCw.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Create a new app on Alchemy</figcaption></figure><p id="c127" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">复制HTTP URL，因为我们需要它来连接到区块链网络。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff mo"><img src="../Images/d0efcf5724cc295ea6326ee48de777ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SsMqoEHcEk67P_zRfO949w.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">View app key details on Alchemy</figcaption></figure><p id="2ff4" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><em class="kn">现在，我们需要将Polygon Mumbai testnet添加到您的metamask帐户中。</em></p><p id="9256" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">添加Alchemy URL作为RPC URL，并将链ID设置为80001。您可以在<a class="ae ml" href="https://chainlist.org/" rel="noopener ugc nofollow" target="_blank">https://chainlist.org/</a>中验证链条ID。MATIC是多边形区块链中处理的令牌。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/d367743fd5d94d68e1c0189bfa5f274b.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*W_E_tk67H6iapXefTOvM-Q.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Polygon Mumbai Testnet on Metamask</figcaption></figure></div><div class="ab cl la lb hb lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hm hn ho hp hq"><h2 id="ea55" class="lh li ht bd lj lk ll lm ln lo lp lq lr ka ls lt lu ke lv lw lx ki ly lz ma hz dt translated">Ethers.js</h2><p id="2edf" class="pw-post-body-paragraph jr js ht jt b ju mg jd jw jx mh jg jz ka mi kc kd ke mj kg kh ki mk kk kl km hm dt translated">Ethers.js是一个允许我们与以太坊区块链互动的库。</p><p id="d095" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">安装ethers.js，如下所示:</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="c71c" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id">npm install --save ethers</strong></span></pre></div><div class="ab cl la lb hb lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hm hn ho hp hq"><p id="428b" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><em class="kn">分散铸造NFT，怎么做？—使用IPFS，一个分散的存储平台，我们将在那里存储我们的NFT元数据。</em></p><h2 id="e253" class="lh li ht bd lj lk ll lm ln lo lp lq lr ka ls lt lu ke lv lw lx ki ly lz ma hz dt translated">IPFS &amp;皮纳塔</h2><p id="e757" class="pw-post-body-paragraph jr js ht jt b ju mg jd jw jx mh jg jz ka mi kc kd ke mj kg kh ki mk kk kl km hm dt translated"><a class="ae ml" href="https://docs.ipfs.io/concepts/what-is-ipfs/" rel="noopener ugc nofollow" target="_blank"> IPFS </a>(星际文件系统)是一种类似torrent的点对点协议。<br/>它分散了整个文件托管过程。当我们上传一个文件到IPFS时，它会分布在每个节点上，然后成为一个服务器，这样就没有人能下载文件了。我们在IPFS托管我们的NFT元数据。</p><p id="874d" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">Pinata是IPFS的一个接口，它使得在IPFS上保存文件变得更加容易。我们可以上传图片文件和JSON元数据到Pinata。</p><p id="4ea7" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">在皮纳塔上创建一个免费账户:<a class="ae ml" href="https://app.pinata.cloud/signin" rel="noopener ugc nofollow" target="_blank">https://app.pinata.cloud/signin</a>。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/c04b37def43d1d987f59314b38a9c30d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*ni40lCrRgp-GsHf5znpRPg.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Pinata Register or Sign In</figcaption></figure><p id="33df" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">创建新的API密钥来访问它。你将得到一个API密匙和一个秘密密匙。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff na"><img src="../Images/a9b9c1af49fd653b6a558e4b84965d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ltZRbfzZzApjH8qT0LpPrg.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Create API key on Pinata</figcaption></figure></div><div class="ab cl la lb hb lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hm hn ho hp hq"><p id="a448" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><em class="kn">现在让我们深入研究NFT铸币！</em></p><h2 id="051c" class="lh li ht bd lj lk ll lm ln lo lp lq lr ka ls lt lu ke lv lw lx ki ly lz ma hz dt translated">第一步:买一些假MATIC</h2><p id="3b48" class="pw-post-body-paragraph jr js ht jt b ju mg jd jw jx mh jg jz ka mi kc kd ke mj kg kh ki mk kk kl km hm dt translated">由于区块链交易必然会产生汽油费，我们需要收集一些假硬币来铸造我们的NFT。</p><p id="64a5" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">从这里拿一些假的MATIC:<a class="ae ml" href="https://faucet.polygon.technology/" rel="noopener ugc nofollow" target="_blank">https://faucet.polygon.technology/</a>。</p><p id="cd8f" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">其他可用的自动水龙头:</p><ol class=""><li id="fcd8" class="nb nc ht jt b ju jv jx jy ka nd ke ne ki nf km ng nh ni nj dt translated">https://faucet.pearzap.com/<a class="ae ml" href="https://faucet.pearzap.com/" rel="noopener ugc nofollow" target="_blank"/></li><li id="95f7" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km ng nh ni nj dt translated">【https://matic.supply/ T4】</li><li id="85c1" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km ng nh ni nj dt translated"><a class="ae ml" href="https://www.coinclarified.com/tools/faucets/polygon" rel="noopener ugc nofollow" target="_blank">https://www.coinclarified.com/tools/faucets/polygon</a></li><li id="5f6f" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km ng nh ni nj dt translated"><a class="ae ml" href="https://faucet.firebird.finance/" rel="noopener ugc nofollow" target="_blank">https://faucet.firebird.finance/</a></li></ol><h2 id="5f75" class="lh li ht bd lj lk ll lm ln lo lp lq lr ka ls lt lu ke lv lw lx ki ly lz ma hz dt translated">步骤2:创建一个. env文件</h2><p id="896a" class="pw-post-body-paragraph jr js ht jt b ju mg jd jw jx mh jg jz ka mi kc kd ke mj kg kh ki mk kk kl km hm dt translated">的。env文件应该包含以下详细信息:</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="eaea" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id">API_URL = “your alchemy URL"</strong></span><span id="5532" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">PRIVATE_KEY = “metamask private key”</strong></span><span id="fee8" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">PUBLIC_KEY = “your metamask wallet address”</strong></span><span id="0dad" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">CONTRACT_ADDRESS =”deployed contract address"</strong></span><span id="93f8" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">PINATA_API_KEY = “pinata api key”</strong></span><span id="fb91" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">PINATA_SECRET_KEY = “pinata secret key”</strong></span></pre><h2 id="7419" class="lh li ht bd lj lk ll lm ln lo lp lq lr ka ls lt lu ke lv lw lx ki ly lz ma hz dt translated">步骤3:创建您的nft.js文件</h2><p id="2f9e" class="pw-post-body-paragraph jr js ht jt b ju mg jd jw jx mh jg jz ka mi kc kd ke mj kg kh ki mk kk kl km hm dt translated">将以下内容复制到文件中。</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="73b5" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id">require("dotenv").config();<br/>const fs = require("fs");<br/>const FormData = require("form-data");<br/>const axios = require("axios");<br/>const { ethers } = require("ethers");</strong></span><span id="d1c2" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">//Grab the contract ABI<br/>const contract = require("../artifacts/contracts/ArGram.sol/ArGram.json");</strong></span><span id="791d" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">const {<br/> PINATA_API_KEY,<br/> PINATA_SECRET_KEY,<br/> API_URL,<br/> PRIVATE_KEY,<br/> PUBLIC_KEY,<br/> CONTRACT_ADDRESS<br/>} = process.env;</strong></span></pre><p id="191e" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">首先，确保您已经成功地验证了Pinata API。</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="e60b" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id">const authResponse = await    axios.get("https://api.pinata.cloud/data/testAuthentication", {<br/>        headers: {<br/>           pinata_api_key: PINATA_API_KEY,<br/>           pinata_secret_api_key: PINATA_SECRET_KEY,<br/>        },<br/>});</strong></span></pre><p id="17f6" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">您的<em class="kn"> authResponse </em>应该包含一条类似于“<em class="kn">祝贺您！您正在与Pinata API通信！</em>”。</p><p id="8da3" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">现在，从本地系统中读取图像文件。</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="1e49" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id"> const stream = fs.createReadStream(req.file.path);<br/> const data = new FormData();<br/> data.append(“file”, stream);</strong></span></pre><p id="f9a8" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">使用<a class="ae ml" href="https://docs.pinata.cloud/api-pinning/pin-file" rel="noopener ugc nofollow" target="_blank"> <strong class="jt id"> pinFile </strong> </a> API将图像文件上传到IPFS。如果成功，它将返回一个hashcode。</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="4682" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id">const fileResponse = await axios.post("https://api.pinata.cloud/pinning/pinFileToIPFS", data, {<br/>        headers: {<br/>           “Content-Type”: `multipart/form-data; boundary=  ${data._boundary}`,<br/>            pinata_api_key: PINATA_API_KEY,<br/>            pinata_secret_api_key: PINATA_SECRET_KEY,<br/>        },<br/> });<br/>        const { data: fileData = {} } = fileResponse;<br/>        const { IpfsHash } = fileData;<br/>        const fileIPFS= `https://gateway.pinata.cloud/ipfs/${IpfsHash}`;</strong></span></pre><p id="fd04" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">你的<em class="kn"> fileIPFS </em>应该像<a class="ae ml" href="https://gateway.pinata.cloud/ipfs/QmeK8t9Lom2AcH8s7gLpuZordcxisegwkcSJpqL46S87uC?preview=1" rel="noopener ugc nofollow" target="_blank">https://gateway.pinata.cloud/ipfs/</a>T32】image-hash&gt;</p><p id="fffd" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">例如:<a class="ae ml" href="https://gateway.pinata.cloud/ipfs/QmeK8t9Lom2AcH8s7gLpuZordcxisegwkcSJpqL46S87uC?preview=1" rel="noopener ugc nofollow" target="_blank">https://gateway . pinata . cloud/ipfs/qmek 8t 9 lo m2 ach 8s 7 glpuzordcxisegwkcsjpql 46s 87 UC</a></p><p id="cf46" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">现在我们可以使用<a class="ae ml" href="https://docs.pinata.cloud/api-pinning/pin-json" rel="noopener ugc nofollow" target="_blank"> <strong class="jt id"> pinJSON </strong> </a> API将JSON元数据上传到IPFS。如果成功，它将返回一个哈希码，我们将使用这个哈希码作为URI到mint的令牌。</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="c9f6" class="lh li ht mr b fv mv mw l mx my">//Create NFT metadata JSON<strong class="mr id"><br/>const metadata = {<br/>   image: </strong><a class="ae ml" href="https://gateway.pinata.cloud/ipfs/QmeK8t9Lom2AcH8s7gLpuZordcxisegwkcSJpqL46S87uC" rel="noopener ugc nofollow" target="_blank"><strong class="mr id">https://gateway.pinata.cloud/ipfs/QmeK8t9Lom2AcH8s7gLpuZordcxisegwkcSJpqL46S87uC</strong></a><strong class="mr id">",<br/>   name: "MyArGramNFT",<br/>   description: "MyArGramNFT Description",<br/>   attributes: [<br/>        { "trait_type": "color", "value": "brown"}, <br/>        { "trait_type": "background", "value": "white"}<br/>   ]<br/>}</strong></span><span id="4c25" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">const pinataJSONBody = {<br/>      pinataContent: metadata <br/>};<br/>const jsonResponse = await axios.post("https://api.pinata.cloud/pinning/pinJSONToIPFS", pinataJSONBody, {<br/>    headers: {<br/>       “Content-Type”: `application/json`,<br/>        pinata_api_key: PINATA_API_KEY,<br/>        pinata_secret_api_key: PINATA_SECRET_KEY,<br/>    },<br/> });<br/> const { data: jsonData = {} } = jsonResponse;<br/> const { IpfsHash } = jsonData;<br/> const tokenURI = `https://gateway.pinata.cloud/ipfs/${IpfsHash}`;</strong></span></pre><p id="a6ac" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">你的tokenURI应该像<a class="ae ml" href="https://gateway.pinata.cloud/ipfs/QmeK8t9Lom2AcH8s7gLpuZordcxisegwkcSJpqL46S87uC?preview=1" rel="noopener ugc nofollow" target="_blank">https://gateway.pinata.cloud/ipfs/</a>T34】JSON-hash&gt;</p><p id="a8e1" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">例如:<a class="ae ml" href="https://gateway.pinata.cloud/ipfs/QmammqqQDpmk4oAuyfgJA9Ni7ChEzxEkmzQLLhjbGAKHax?preview=1" rel="noopener ugc nofollow" target="_blank">https://gateway . pinata . cloud/ipfs/qmammqqqdpmk 4 auyfgja 9 ni 7 chezxekmzqlhjbgakhax</a></p><p id="4345" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">最后，我们可以铸造我们的令牌URI，我们从IPFS json上传。调用我们在智能契约中编写的<strong class="jt id"> <em class="kn"> mintNFT </em> </strong>方法。参考下面给出的智能合同:</p><div class="nq nr fm fo ns nt"><a href="https://coinsbench.com/erc-721-nft-smart-contract-deployment-using-hardhat-97c74ce1362a" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab ej"><div class="nv ab nw cl cj nx"><h2 class="bd id fv z el ny eo ep nz er et ic dt translated">ERC-721 (NFT)智能合同部署—使用安全帽</h2><div class="oa l"><h3 class="bd b fv z el ny eo ep nz er et ek translated">关于如何编写和部署ERC-721标准智能合同的指南</h3></div><div class="ob l"><p class="bd b gc z el ny eo ep nz er et ek translated">coinsbench.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ky nt"/></div></div></a></div><p id="8b75" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">使用您的私钥签署交易。</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="95a8" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id">const provider = new ethers.providers.JsonRpcProvider(API_URL);<br/>const wallet = new ethers.Wallet(PRIVATE_KEY, provider);<br/>const etherInterface = new ethers.utils.Interface(contract.abi);</strong></span><span id="553b" class="lh li ht mr b fv np mw l mx my">// Get latest nonce<strong class="mr id"><br/>const nonce = await provider.getTransactionCount(PUBLIC_KEY, "latest");</strong></span><span id="3abf" class="lh li ht mr b fv np mw l mx my">// Get gas price<strong class="mr id"><br/>const gasPrice = await provider.getGasPrice();</strong></span><span id="5216" class="lh li ht mr b fv np mw l mx my">// Get network<strong class="mr id"><br/>const network = await provider.getNetwork();<br/>const { chainId } = network;</strong></span><span id="c7a6" class="lh li ht mr b fv np mw l mx my">//Transaction object<strong class="mr id"><br/>const transaction = {<br/>   from: PUBLIC_KEY,<br/>   to: CONTRACT_ADDRESS,<br/>   nonce,<br/>   chainId,<br/>   gasPrice,<br/>   data: etherInterface.encodeFunctionData("mintNFT", <br/>         [ PUBLIC_KEY, tokenURI ]) <br/>};</strong></span><span id="ba7c" class="lh li ht mr b fv np mw l mx my">//Estimate gas limit<strong class="mr id"><br/>const estimatedGas = await provider.estimateGas(transaction);<br/>transaction["gasLimit"] = estimatedGas;</strong></span><span id="16d4" class="lh li ht mr b fv np mw l mx my">//Sign &amp; Send transaction<strong class="mr id"><br/>const signedTx = await wallet.signTransaction(transaction);<br/>const transactionReceipt = await provider.sendTransaction(signedTx);<br/>await transactionReceipt.wait();<br/>const hash = transactionReceipt.hash;<br/>console.log("Your Transaction Hash is:", hash);</strong></span><span id="5e4d" class="lh li ht mr b fv np mw l mx my">// Get transaction receipt<strong class="mr id"><br/>const receipt = await provider.getTransactionReceipt(hash);<br/>const { logs } = receipt;</strong></span><span id="379e" class="lh li ht mr b fv np mw l mx my">// Get token ID<strong class="mr id"><br/>const tokenInBigNumber = ethers.BigNumber.from(logs[0].topics[3]);<br/>const tokenId = tokenInBigNumber.toNumber();<br/>console.log("Token ID minted:", tokenId);</strong></span></pre><p id="4390" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">您将会得到类似这样的回应:</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="0c8d" class="lh li ht mr b fv mv mw l mx my"><strong class="mr id">Your Transaction Hash is: 0x9732ca53cfb6b8e29e13873b51407f431bc798cbe3abe82ea110c0e5924506c8 </strong></span><span id="fdf6" class="lh li ht mr b fv np mw l mx my"><strong class="mr id">Token ID minted: 1</strong></span></pre><p id="3935" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">你可以在孟买<a class="ae ml" href="https://mumbai.polygonscan.com/" rel="noopener ugc nofollow" target="_blank">的polygonscan </a>上搜索这个交易散列。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff oi"><img src="../Images/99b0e742086d49409851f001a54dfb94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WW0DRUfWPQ-8pnhuqH2BCA.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Transaction on Mumbai Polygonscan</figcaption></figure><p id="9f1d" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">太好了！您已经在多边形孟买测试网上成功铸造了您的第一个NFT。</p></div><div class="ab cl la lb hb lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="hm hn ho hp hq"><p id="42e5" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><strong class="jt id">造币快乐:)</strong></p><blockquote class="oj"><p id="63a3" class="ok ol ht bd om on oo op oq or os km ek translated"><em class="ot">加入Coinmonks </em> <a class="ae ml" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank"> <em class="ot">电报频道</em> </a> <em class="ot">和</em> <a class="ae ml" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> <em class="ot"> Youtube频道</em> </a> <em class="ot">了解加密交易和投资</em></p></blockquote><h1 id="8f43" class="ou li ht bd lj ov ow ox ln oy oz pa lr ji pb jj lu jl pc jm lx jo pd jp ma pe dt translated">另外，阅读</h1><ul class=""><li id="58d3" class="nb nc ht jt b ju mg jx mh ka pf ke pg ki ph km pi nh ni nj dt translated"><a class="ae ml" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae ml" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li><li id="c6e9" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km pi nh ni nj dt translated">最佳加密<a class="ae ml" rel="noopener" href="/coinmonks/hardware-wallets-dfa1211730c6">硬件钱包</a> | <a class="ae ml" rel="noopener" href="/coinmonks/bitbns-review-38256a07e161"> Bitbns评论</a></li><li id="18a1" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km pi nh ni nj dt translated"><a class="ae ml" href="https://coincodecap.com/crypto-exchange-in-singapore" rel="noopener ugc nofollow" target="_blank">新加坡十大最佳加密交易所</a> | <a class="ae ml" href="https://coincodecap.com/buy-axs-token" rel="noopener ugc nofollow" target="_blank">购买AXS </a></li><li id="603f" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km pi nh ni nj dt translated"><a class="ae ml" href="https://coincodecap.com/red-dog-casino-review" rel="noopener ugc nofollow" target="_blank">红狗赌场评论</a> | <a class="ae ml" href="https://coincodecap.com/swyftx-review" rel="noopener ugc nofollow" target="_blank"> Swyftx评论</a> | <a class="ae ml" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank"> CoinGate评论</a></li><li id="c04e" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km pi nh ni nj dt translated"><a class="ae ml" href="https://coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">投资印度的最佳密码</a>|<a class="ae ml" href="https://coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank">WazirX P2P</a>|<a class="ae ml" href="https://coincodecap.com/hi-dollar-review" rel="noopener ugc nofollow" target="_blank">Hi Dollar Review</a></li><li id="c1f2" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km pi nh ni nj dt translated"><a class="ae ml" href="https://coincodecap.com/5-best-crypto-trading-bots-in-canada" rel="noopener ugc nofollow" target="_blank">加拿大最好的加密交易机器人</a> | <a class="ae ml" href="https://coincodecap.com/kucoin-review" rel="noopener ugc nofollow" target="_blank">库币评论</a></li><li id="c491" class="nb nc ht jt b ju nk jx nl ka nm ke nn ki no km pi nh ni nj dt translated"><a class="ae ml" href="https://coincodecap.com/huobi-crypto-trading-signals" rel="noopener ugc nofollow" target="_blank">用于Huobi的加密交易信号</a> | <a class="ae ml" rel="noopener" href="/coinmonks/hitbtc-review-c5143c5d53c2"> HitBTC审核</a></li></ul></div></div>    
</body>
</html>