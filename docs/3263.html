<html>
<head>
<title>3 Simple Moving Averages Trade Strategy: Iterative Performance Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3简单移动平均线交易策略:迭代性能测试</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/3-simple-moving-averages-trade-strategy-performance-test-2194f423d36b?source=collection_archive---------9-----------------------#2022-03-24">https://medium.com/coinmonks/3-simple-moving-averages-trade-strategy-performance-test-2194f423d36b?source=collection_archive---------9-----------------------#2022-03-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="84ce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">有很多基于python的交易策略，尤其是那些使用简单移动平均线(SMA)的策略，它们总是激起我的兴趣。他们中的许多人会展示应用滚动平均函数的例子，以输出一对滞后列和显示交叉点重要性的图。我也看到交易策略建议使用三条均线作为更稳健的方法。有鉴于此，我一直在思考，“哪三种SMA组合会产生最好的结果？”事实证明，答案是:“那得看情况。”但实际上，这并不取决于太多。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/f41207caa7b02a4487f4fe95b076c133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dsTFENaVY67KBgiqEoon6w.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Resulting Throuple</figcaption></figure><p id="68e3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我将开门见山，很少甚至没有客套话。这里可以看到完整代码:[<a class="ae ke" href="https://www.kaggle.com/code/dascient/3-simple-moving-averages-performance-testing" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/code/da scient/3-simple-moving-averages-performance-testing</a>。</p><p id="9955" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，我们导入我们的包并上传我们选择的市场数据:</p><pre class="jp jq jr js fq kf kg kh ki aw kj dt"><span id="86af" class="kk kl ht kg b fv km kn l ko kp"><br/>from dateutil.tz import tzlocal<br/>import matplotlib.pyplot as plt<br/>from datetime import datetime<br/>import numpy as np<br/>import pandas as pd<br/>import time </span><span id="1fe1" class="kk kl ht kg b fv kq kn l ko kp"><em class="kr"># </em><a class="ae ke" href="https://github.com/twopirllc/pandas-ta" rel="noopener ugc nofollow" target="_blank"><em class="kr">https://github.com/twopirllc/pandas-ta</em></a><em class="kr"><br/></em>!pip install pandas_ta<br/>import pandas_ta as ta<br/><br/><em class="kr"># performance metrics package</em><br/><em class="kr"># https://vectorbt.dev</em><br/>!pip install vectorbt==0.20.1<br/>import vectorbt as vbt</span></pre><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff ks"><img src="../Images/4d1c73c508de8fdcca65d92ed7ea7f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sh4AuySNEza0OCwliuRP9w.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Bitcoin-EUR</figcaption></figure><p id="d123" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Pandas TA有一个tsignals函数，允许我们将布尔实体设置为“进入”和“退出”信号。你可能会觉得下面的算法有点奇怪，但是我的目标是尝试确定最好的三条均线sma组合。我认为通过三(3)条简单均线的乘法组合来重申交易是很有趣的。</p><p id="eeed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">关于pandas-ta的绩效指标包的更多信息，如下:</p><pre class="jp jq jr js fq kf kg kh ki aw kj dt"><span id="cb69" class="kk kl ht kg b fv km kn l ko kp"><em class="kr">https://github.com/twopirllc/pandas-ta#performance-metrics</em></span></pre><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff kt"><img src="../Images/5ee86232a41a2d7bcc77dcfb865639ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQVK8ynM6oc2PlO5LHmAEA.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Defines 3-SMA signaling strategy, then uses vectorbt’s pf.stats() to calculate backtest performance.</figcaption></figure><p id="466f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以为了测试三个不同的均线，我做了三个不同幅度的列表。然后使用三个嵌套的for循环range(10，15)、range(90，100)和range(125，135)——我能够遍历应用移动平均线的每个组合的不同结果。BTC的代码和最终结果如下所示:</p><pre class="jp jq jr js fq kf kg kh ki aw kj dt"><span id="a1e7" class="kk kl ht kg b fv km kn l ko kp"><em class="kr"># range of curious movAvg values &amp; initialize results frame</em><br/><br/><em class="kr"># can also use<br/></em># range(3,33), range(34,99), range(100,166)<br/>sma_a, sma_b, sma_c, results = list(range(10,15)),list(range(90,100)),list(range(125,135)),[]<br/><br/><em class="kr"># for the sake of computation efficiency...</em><br/>df = btc<br/><br/><em class="kr"># re(re(iteration))</em><br/><em class="kr"># this will take a while to run, </em><br/><em class="kr"># but basically it's evaluating profit/loss outcomes</em><br/><em class="kr"># by trying each sma(a,b,c) combination.</em><br/><br/>thresh = 15 <em class="kr"># hoping to display only results that yield above 15% profit</em><br/>for c <strong class="kg hu">in</strong> sma_c:<br/>    for b <strong class="kg hu">in</strong> sma_b:<br/>        for a <strong class="kg hu">in</strong> sma_a:<br/>            if tsignals(df,a,b,c)[0][1] &gt; thresh:<br/><br/>                try:<br/>                    print(f"<strong class="kg hu">\n</strong>*Testing: sma_<strong class="kg hu">{</strong>a<strong class="kg hu">}</strong>, sma_<strong class="kg hu">{</strong>b<strong class="kg hu">}</strong>, sma_<strong class="kg hu">{</strong>c<strong class="kg hu">}</strong>*<strong class="kg hu">\n</strong>")<br/>                    <em class="kr">#print(tsignals(df,a,b,c)[0])</em><br/>                    results.append(tsignals(df,a,b,c)[0])<br/>                    clear_output()<br/>                except:<br/>                    print(f"No results yielding over <strong class="kg hu">{</strong>thresh<strong class="kg hu">}</strong>.")<br/><br/>res = pd.DataFrame(results)<br/>best_res = res.sort_values(res.columns[1],ascending=False).head(3).reset_index(drop=True)<br/>print("Best resolution:<strong class="kg hu">\n</strong>End Principal, % Return, SMAa, SMAb, SMAc")<br/>print(best_res)</span></pre><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff ku"><img src="../Images/2239e38cfff86aeb7ab9ec0bdd686d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*6A7KqaMx_LlXY34sZRMU7g.png"/></div></figure><p id="9361" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">换句话说，最好的3个SMA周期组合是14，91和125。记住，这只适用于我们那个时代的BTC。不同结果的可靠性在于你分析的时间范围价格行为。</p><pre class="jp jq jr js fq kf kg kh ki aw kj dt"><span id="007b" class="kk kl ht kg b fv km kn l ko kp"><em class="kr"># highest yielding sma_value</em><br/>a = best_res[2][0]<br/>b = best_res[3][0]<br/>c = best_res[4][0]<br/>print(f"<strong class="kg hu">\n</strong>Best SMA Throuple: <strong class="kg hu">{</strong>a<strong class="kg hu">}</strong>, <strong class="kg hu">{</strong>b<strong class="kg hu">}</strong>, <strong class="kg hu">{</strong>c<strong class="kg hu">}</strong>")<br/>print(f"Number of results evaluated: <strong class="kg hu">{</strong>len(results)<strong class="kg hu">}</strong>")<br/><br/><em class="kr">########################################################</em><br/><br/><em class="kr"># le winner</em><br/>df, pf = tsignals(df,a,b,c)[1], tsignals(df,a,b,c)[2].stats()<br/>golden = tsignals(df,a,b,c)[3]<br/><em class="kr"># params</em><br/>fig, ax = plt.subplots(figsize=(20, 8))<br/><br/><em class="kr"># plot</em><br/>ax.plot(df.Close, color = 'black', label = 'closePrice')<br/>ax.plot(df.ta.sma(a), color = 'orange', label = f'sma-<strong class="kg hu">{</strong>a<strong class="kg hu">}</strong>')<br/>ax.plot(df.ta.sma(b), color = 'red', label = f'sma-<strong class="kg hu">{</strong>b<strong class="kg hu">}</strong>')<br/>ax.plot(df.ta.sma(c), color = 'purple', label = f'sma-<strong class="kg hu">{</strong>c<strong class="kg hu">}</strong>')<br/><br/><em class="kr"># signals</em><br/>xcoords_buy, xcoords_sell = golden[golden.TS_Entries == True].index, golden[golden.TS_Exits == True].index<br/><br/>for xc <strong class="kg hu">in</strong> xcoords_sell:<br/>    plt.axvline(x=xc,c='r')<br/>for xc <strong class="kg hu">in</strong> xcoords_buy:<br/>    plt.axvline(x=xc,c='g')<br/><br/><em class="kr"># plot outputs</em><br/>ax.legend(loc = 'upper left')<br/>plt.show()</span></pre><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff kv"><img src="../Images/7f20b09ceeffe0231a700b30bb7f4605.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x4wCiCdAXjAK37cGKUpK6Q.png"/></div></div></figure><p id="206f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">无论如何，我都不认为这是一个强有力的启示。然而，它为我提供了一种计算高效的方式来解决我最初的担忧。我现在能够快速计算出哪种3-SMA组合可能产生任何特定股票市场运动的最佳战略指标。由于比特币的整体趋势是积极的，回报和整体利润是可观的。然而，值得注意的是，对于那些希望为任何ML/AI方法建立训练模型的人来说，这可以作为一个快速的信号处理器。</p><p id="7b06" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">未来的工作包括将3-SMA指标应用到派尔森的RL-比特币-交易-Bot-7[<a class="ae ke" href="https://youtu.be/lM37E4Z9d2s" rel="noopener ugc nofollow" target="_blank">https://youtu.be/lM37E4Z9d2s</a>]模型中。他最初的工作是使用SMA-7、SMA-25、SMA-99指示器来运行训练/测试/部署模型。对RL交易模型的增强可以包括动态SMA组合生成器，以便添加噪声变量来帮助ML分类器/回归器在通过观察数据的迭代中的性能。</p><p id="8753" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">https://linkedin.com/in/dontadaya</p><div class="kw kx fm fo ky kz"><a href="https://github.com/dascient" rel="noopener  ugc nofollow" target="_blank"><div class="la ab ej"><div class="lb ab lc cl cj ld"><h2 class="bd hu fv z el le eo ep lf er et hs dt translated">DaScient -概述</h2><div class="lg l"><h3 class="bd b fv z el le eo ep lf er et ek translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="lh l"><p class="bd b gc z el le eo ep lf er et ek translated">github.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jy kz"/></div></div></a></div><div class="kw kx fm fo ky kz"><a href="https://www.kaggle.com/dascient" rel="noopener  ugc nofollow" target="_blank"><div class="la ab ej"><div class="lb ab lc cl cj ld"><h2 class="bd hu fv z el le eo ep lf er et hs dt translated">Don D.M. Tadaya |撰稿人</h2><div class="lg l"><h3 class="bd b fv z el le eo ep lf er et ek translated">只是一个简单的数学家在打理他的数字、方程和公式的农场...为那个甜甜工作…</h3></div><div class="lh l"><p class="bd b gc z el le eo ep lf er et ek translated">www.kaggle.com</p></div></div><div class="li l"><div class="lo l lk ll lm li ln jy kz"/></div></div></a></div><div class="kw kx fm fo ky kz"><a href="https://dascient.com" rel="noopener  ugc nofollow" target="_blank"><div class="la ab ej"><div class="lb ab lc cl cj ld"><h2 class="bd hu fv z el le eo ep lf er et hs dt translated">DaScient有限责任公司</h2><div class="lg l"><h3 class="bd b fv z el le eo ep lf er et ek translated">快速服务-行业和地面水平分析，可视化和企业介绍，软件开发和人工智能…</h3></div><div class="lh l"><p class="bd b gc z el le eo ep lf er et ek translated">dascient.com</p></div></div><div class="li l"><div class="lp l lk ll lm li ln jy kz"/></div></div></a></div><div class="kw kx fm fo ky kz"><a href="https://DaScientCapital.us" rel="noopener  ugc nofollow" target="_blank"><div class="la ab ej"><div class="lb ab lc cl cj ld"><h2 class="bd hu fv z el le eo ep lf er et hs dt translated">DaScient资本集团</h2><div class="lg l"><h3 class="bd b fv z el le eo ep lf er et ek translated">Don D.M. Tadaya是公认的获奖数学家、首席数据科学家和统计研究分析师…</h3></div><div class="lh l"><p class="bd b gc z el le eo ep lf er et ek translated">dascientcapital.us</p></div></div><div class="li l"><div class="lq l lk ll lm li ln jy kz"/></div></div></a></div><p id="d48c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">谢谢大家！</p><blockquote class="lr"><p id="7969" class="ls lt ht bd lu lv lw lx ly lz ma jn ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="17d4" class="mb kl ht bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx dt translated">另外，阅读</h1><ul class=""><li id="9512" class="my mz ht is b it na ix nb jb nc jf nd jj ne jn nf ng nh ni dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/coindcx-review-8444db3621a2"> CoinDCX评论</a> | <a class="ae ke" href="https://coincodecap.com/crypto-margin-trading-exchanges" rel="noopener ugc nofollow" target="_blank">加密保证金交易交易所</a></li><li id="f590" class="my mz ht is b it nj ix nk jb nl jf nm jj nn jn nf ng nh ni dt translated"><a class="ae ke" href="https://coincodecap.com/red-dog-casino-review" rel="noopener ugc nofollow" target="_blank">红狗赌场评论</a> | <a class="ae ke" href="https://coincodecap.com/swyftx-review" rel="noopener ugc nofollow" target="_blank"> Swyftx评论</a> | <a class="ae ke" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank"> CoinGate评论</a></li><li id="3c79" class="my mz ht is b it nj ix nk jb nl jf nm jj nn jn nf ng nh ni dt translated"><a class="ae ke" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae ke" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li><li id="a313" class="my mz ht is b it nj ix nk jb nl jf nm jj nn jn nf ng nh ni dt translated"><a class="ae ke" href="https://coincodecap.com/ftx-futures-trading" rel="noopener ugc nofollow" target="_blank">如何在FTX交易所交易期货</a> | <a class="ae ke" href="https://coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li><li id="01a4" class="my mz ht is b it nj ix nk jb nl jf nm jj nn jn nf ng nh ni dt translated"><a class="ae ke" href="https://coincodecap.com/coinloan-review" rel="noopener ugc nofollow" target="_blank"> CoinLoan评论</a> | <a class="ae ke" rel="noopener" href="/coinmonks/youhodler-4-easy-ways-to-make-money-98969b9689f2"> YouHodler评论</a> | <a class="ae ke" href="https://coincodecap.com/blockfi-review" rel="noopener ugc nofollow" target="_blank"> BlockFi评论</a></li><li id="91c2" class="my mz ht is b it nj ix nk jb nl jf nm jj nn jn nf ng nh ni dt translated"><a class="ae ke" href="https://coincodecap.com/profittradingapp-for-binance" rel="noopener ugc nofollow" target="_blank">XT.COM评论</a> | <a class="ae ke" href="https://coincodecap.com/xt-com-review" rel="noopener ugc nofollow" target="_blank">币安评论</a></li><li id="2b2f" class="my mz ht is b it nj ix nk jb nl jf nm jj nn jn nf ng nh ni dt translated"><a class="ae ke" href="https://coincodecap.com/smithbot-review" rel="noopener ugc nofollow" target="_blank"> SmithBot评论</a> | <a class="ae ke" href="https://coincodecap.com/free-open-source-trading-bots" rel="noopener ugc nofollow" target="_blank"> 4款最佳免费开源交易机器人</a></li></ul></div></div>    
</body>
</html>