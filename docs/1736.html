<html>
<head>
<title>How to Read Smart Contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何阅读智能合同</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-read-smart-contracts-816d0da2b146?source=collection_archive---------0-----------------------#2022-03-05">https://medium.com/coinmonks/how-to-read-smart-contracts-816d0da2b146?source=collection_archive---------0-----------------------#2022-03-05</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="9d8c" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">如何阅读智能合同系列文章的第一部分。本教程主要是为那些想学习如何理解密码世界，但对协议、区块链的内部机制等没有深入了解的爱好者编写的。</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/0d0eff6606ca87da878ceb2e61783737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRqRXVeIW-97R-ozfYRJ4w.png"/></div></div></figure><p id="76f3" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">此素材由Alex Kruegger(Telegram:@ Kruegger)创作，</strong> <a class="ae kq" href="https://t.me/ak74lab" rel="noopener ugc nofollow" target="_blank"> <strong class="jw hu"> AK74-Lab电报频道</strong> </a> <strong class="jw hu">。</strong> <a class="ae kq" href="https://swap.net/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw hu">译自swap.net项目组</strong> </a> <strong class="jw hu">。</strong></p><h1 id="b877" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">DeFi基础</h1><h2 id="e240" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated"><strong class="ak"> <em class="lx">智能合约</em> </strong></h2><p id="e8be" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated">智能契约是在区块链节点上执行的代码，执行的结果(如果在程序中说明)存储在区块链的一个特殊存储库中，即<strong class="jw hu">持久性数据</strong>。智能合同代码一旦上传到区块链，就会被额外锁定，以防止对代码的任何意外或故意更改。</p><p id="9a2b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">智能合约功能可以从外部(从用户的钱包或从另一个合约)调用，并分为两大组:<br/> <strong class="jw hu"> -不改变持久性数据</strong>(仅从区块链读取)<br/> <strong class="jw hu"> -改变持久性数据</strong></p><p id="b76e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">调用第一组函数不会耗费任何汽油或金钱，也不会超出最近的节点(Balance of、TotalSupply、Allowance)。在<strong class="jw hu"> BSC扫描</strong>中，这些功能在<strong class="jw hu">读取</strong>选项卡下。</p><p id="0a05" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">调用第二组函数变成了一个完整的事务，它被挖掘，包含在块中，其结果被写入区块链(Approve，Transfer，TransferFrom)。在<strong class="jw hu"> BSC扫描</strong>中，这些功能都在<strong class="jw hu">写</strong>选项卡下。</p><h2 id="fe92" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated"><strong class="ak"> <em class="lx">状态区块链</em> </strong></h2><p id="a071" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated">以太坊和基于以太坊的区块链(多边形，BSC等。)都是<strong class="jw hu">状态的区块链。</strong>每个地址在区块链中存储其余额<strong class="jw hu">的<strong class="jw hu">值</strong>为区块链(ETH、BNB、MATIC等)的本币</strong>。).每个<strong class="jw hu">智能合约</strong>在区块链中存储其持久变量的<strong class="jw hu">值。区块链的当前状态由网络中所有现有地址的平衡和区块链中所有智能合约的持久性变量的当前值来描述。</strong></p><h2 id="3794" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated"><strong class="ak"> <em class="lx">账目</em> </strong></h2><p id="0627" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated">你第一次创建钱包时写下的<strong class="jw hu">种子短语</strong> (12个单词)使用<strong class="jw hu"> BIP 39 </strong>协议转换成私钥，使用<strong class="jw hu"> ECDSA </strong>(椭圆曲线数字签名算法)转换成公钥，使用哈希和修剪转换成你在区块链的地址。</p><p id="d492" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">种子短语→私钥→公钥→地址</strong></p><p id="0baa" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">您将总是从相同的种子短语中获得相同的地址和余额。将您的帐户转移到另一个钱包(MetaMask、Trust Wallet、SafePal、Coin98等)。)您只需使用保存的种子短语在新钱包上恢复您的帐户。请小心使用此短语，因为它会提供您帐户的完整访问权限。</p><h2 id="8609" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated"><strong class="ak"> <em class="lx">代币在哪里？</em>T13】</strong></h2><p id="db20" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated">对于每个账户(地址)，区块链只存储该地址的区块链本地硬币余额，仅此而已。您在每个购买的令牌中的地址余额存储在该令牌的智能合约中的<strong class="jw hu">余额</strong>表中，即令牌中的地址/余额。</p><p id="c521" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在<strong class="jw hu"> BSC扫描</strong>中，该表显示在“<strong class="jw hu">支架</strong>选项卡上。</p><p id="0ac9" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">必须将代币添加到您的钱包中，才能显示余额。添加后，钱包会向令牌的智能合约查询您帐户的当前余额，并将其显示在界面中。</p><h2 id="692f" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated"><strong class="ak"> <em class="lx">一个地址—多条链</em> </strong></h2><p id="c36b" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated">以太坊是第一个围绕智能合约思想建立的区块链。它催生了许多只在共识算法和事务气体上互不相同的克隆体。这就是为什么你可以为BSC，以太坊，多边形区块链使用相同的地址。</p><p id="bc8d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">想象一下，拿着0x…bc19的车票站在火车站。你身边有很多平台叫以太坊，BSC，多边形等等。在他们附近是不同的铁路和火车:在煤上，一个核反应堆，一些仍然由马牵引。但是每个都站在铁轨上，到处都是机车和货车。你的票总是粘在任何站台上任何车厢的座位上。</p><h2 id="e873" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated">综上所述</h2><ul class=""><li id="5395" class="md me ht jw b jx ly ka lz kd mf kh mg kl mh kp mi mj mk ml dt translated">帐户的密钥是一个<strong class="jw hu">种子短语/秘密密钥</strong>，用于识别在线地址并提供帐户的完全访问权限</li><li id="1273" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">代币余额在该代币的智能合约中</li><li id="4551" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">你可以为所有基于以太网的区块链使用一个地址</li><li id="0d01" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><strong class="jw hu">智能合约</strong>是存储在区块链中的<strong class="jw hu">可变程序+可变数据</strong></li><li id="613b" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">一个<strong class="jw hu">智能契约</strong>有两组可以从外部调用的函数——不改变区块链状态的函数(<strong class="jw hu">读</strong>)和改变状态的函数(<strong class="jw hu">写</strong>)</li></ul><h1 id="cb8e" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">ERC 20/BEP 20接口作为令牌契约的基础，分解契约功能。</h1><h2 id="dc02" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated">什么是接口</h2><p id="cbc7" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated"><strong class="jw hu">界面— </strong>对某些对象的外部影响(控制)以及对象对这种控制的反应的描述。</p><p id="9517" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">比如汽车驾驶。界面是一组控件(方向盘、踏板、变速箱)和汽车对这些控件使用的响应。</p><h2 id="d08f" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated"><em class="lx"> ERC-20接口</em></h2><p id="7221" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated">目前，已经创建了许多令牌，并且每天都在创建。我们可以以同样的方式与任何令牌进行交互—发送、交换、批准等。<strong class="jw hu">那么这种统一是怎么来的呢？</strong></p><p id="070d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">令牌必须“实现”ERC 20/BEP 20接口。实现意味着智能令牌协定必须包含一组定义好的函数和参数，并对这些函数做出明确的反应(智能协定应该做什么)。</p><h2 id="4fb3" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated"><em class="lx">EIP中定义的ERC20标准的接口。</em></h2><p id="54ee" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated"><strong class="jw hu">功能</strong></p><ul class=""><li id="f463" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-totalSupply--" rel="noopener ugc nofollow" target="_blank"> totalSupply() </a></li><li id="c90c" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-balanceOf-address-" rel="noopener ugc nofollow" target="_blank">(账户)余额</a></li><li id="7c41" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transfer-address-uint256-" rel="noopener ugc nofollow" target="_blank">转账(收款人，金额)</a></li><li id="d558" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transferFrom-address-address-uint256-" rel="noopener ugc nofollow" target="_blank">转账人(发件人、收件人、金额)</a></li><li id="b22e" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-allowance-address-address-" rel="noopener ugc nofollow" target="_blank">津贴(所有者、支出者)</a></li><li id="9476" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-approve-address-uint256-" rel="noopener ugc nofollow" target="_blank">批准(支出者，金额)</a></li></ul><p id="8f77" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">事件</strong></p><ul class=""><li id="5dee" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-Transfer-address-address-uint256-" rel="noopener ugc nofollow" target="_blank">转移(从、到、值)</a></li><li id="fbd6" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-Approval-address-address-uint256-" rel="noopener ugc nofollow" target="_blank">批准(所有者、支出者、价值)</a></li></ul><p id="874e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">每个函数调用还有两个参数:<br/> msg.sender </strong> —交易来自的地址(谁调用了函数)<br/><strong class="jw hu">msg . value</strong>—随交易发送的令牌数量(ETH/BNB)</p><p id="dfd5" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">事件— </strong>一种将信息从智能合约向外传递到调用该合约的web3程序的方式。作为一个复选框，表示已经进行了这样的操作。</p><h2 id="7dc6" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated">ERC 20功能描述</h2><p id="3d21" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated">让我们将6个功能分为两组:</p><p id="a864" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">读取功能(仅在区块链上读取):</p><ul class=""><li id="4a97" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-totalSupply--" rel="noopener ugc nofollow" target="_blank"> totalSupply() </a> —显示令牌的发行总量</li><li id="81f5" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-balanceOf-address-" rel="noopener ugc nofollow" target="_blank">(账户)</a>余额—显示地址<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-balanceOf-address-" rel="noopener ugc nofollow" target="_blank">账户</a>的余额</li><li id="3bd5" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-allowance-address-address-" rel="noopener ugc nofollow" target="_blank">津贴(所有者、支出者)</a> —显示允许<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-allowance-address-address-" rel="noopener ugc nofollow" target="_blank">支出者</a>借记<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-allowance-address-address-" rel="noopener ugc nofollow" target="_blank">所有者</a>的代币总额(检查<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-approve-address-uint256-" rel="noopener ugc nofollow" target="_blank">批准</a></li></ul><p id="110c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">编写函数(更改区块链):</p><ul class=""><li id="37d2" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transfer-address-uint256-" rel="noopener ugc nofollow" target="_blank">转账(收款人，金额)</a> -从发件人向<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transfer-address-uint256-" rel="noopener ugc nofollow" target="_blank">收款人</a>转账令牌<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transfer-address-uint256-" rel="noopener ugc nofollow" target="_blank">金额</a></li><li id="33a8" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transferFrom-address-address-uint256-" rel="noopener ugc nofollow" target="_blank"> transferFrom(汇款人、收款人、金额)</a> -转账令牌<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transfer-address-uint256-" rel="noopener ugc nofollow" target="_blank">金额</a>从<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transferFrom-address-address-uint256-" rel="noopener ugc nofollow" target="_blank">汇款人</a>到<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-transfer-address-uint256-" rel="noopener ugc nofollow" target="_blank">收款人</a></li><li id="b149" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated"><a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-approve-address-uint256-" rel="noopener ugc nofollow" target="_blank">批准(支出者，金额)</a> -允许<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-approve-address-uint256-" rel="noopener ugc nofollow" target="_blank">支出者</a>从msg.sender余额中借记令牌<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-approve-address-uint256-" rel="noopener ugc nofollow" target="_blank">金额</a>。(检查<a class="ae kq" href="https://docs.openzeppelin.com/contracts/4.x/api/token/erc20#IERC20-allowance-address-address-" rel="noopener ugc nofollow" target="_blank">余量</a></li></ul><h2 id="3a44" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated">综上所述</h2><ul class=""><li id="9afa" class="md me ht jw b jx ly ka lz kd mf kh mg kl mh kp mi mj mk ml dt translated">有一个ERC-20标准描述了接口(函数、它们的参数和返回值)，该接口必须实现智能合约才能被称为令牌。</li><li id="7971" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">如果智能合约实现了ERC-20接口，那么我们就可以在任何可以使用令牌的地方使用它——将其交换给DEX，互相转发，烧掉等等。合同实际上是什么并不重要。</li><li id="d258" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">如果某样东西看起来像鸭子，走路像鸭子，叫起来像鸭子，我们可以把它当作鸭子，不管它实际上是什么</li></ul><h1 id="c702" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">处理合同/示例时会发生什么</h1><p id="8b98" class="pw-post-body-paragraph ju jv ht jw b jx ly iu jz ka lz ix kc kd ma kf kg kh mb kj kk kl mc kn ko kp hm dt translated"><strong class="jw hu">示例</strong>:</p><ul class=""><li id="ae3e" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated">本决定创建自己的令牌。他采用了ERC20的最标准实现，更改了名称、编号(1，000)，规定在创建合同时必须将所有1，000个令牌转让给他，并将智能合同部署到区块链中。</li></ul><p id="574e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">智能合同执行一个构建器函数(在部署合同时执行一次的特殊函数)，该函数初始化内部变量，创建两个空表— </em> <strong class="jw hu"> <em class="mu">余额和容差</em> </strong> <em class="mu">，然后调用</em><strong class="jw hu"><em class="mu">mint</em></strong><em class="mu">函数，该函数在</em> <strong class="jw hu"> <em class="mu">余额中创建第一行:<br/> - </em> BEN — 1000 </strong></p><p id="ae2e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">他正在完成这项工作。合同准备好了。</p><ul class=""><li id="a19f" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><strong class="jw hu">本决定给他的朋友伊万和杰克每人100枚代币。</strong></li></ul><p id="31fd" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">本的钱包向智能令牌合约发起两笔交易:</em> <strong class="jw hu"> <em class="mu">转账(伊凡，100) </em> </strong> <em class="mu">和</em> <strong class="jw hu"> <em class="mu">转账(杰克，100) </em> </strong> <em class="mu">。在这种情况下，谁应该被记入硬币的借方由谁发送交易来确定——本的余额</em><strong class="jw hu"><em class="mu">(msg . sender)</em></strong><em class="mu">。</em></p><p id="f031" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">智能合约简单地通过添加两行并在Ben处更改金额来更改表格:<br/></em><strong class="jw hu">-Ben-800<br/>-IVAN-100<br/>-JAKE-100</strong></p><ul class=""><li id="50b3" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><strong class="jw hu">本决定将代币放在兑换处，所以他去了煎饼店(例如)并创建了代币-BNB流动性对(800个代币-2个BNB)。</strong></li></ul><p id="1d83" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">煎饼路由器创建了一个流动性对，本将800个令牌和2个BNB转移到其中，结果在另一个宇宙的某个地方，一行</em><strong class="jw hu"><em class="mu">CAKE-LP-Token—2</em></strong><em class="mu">出现在BNB契约中，令牌契约表现在看起来是这样的:</em> <br/> <strong class="jw hu"> -本— 0 <br/> -伊万— 100 <br/> -杰克—100<br/>-CAKE-LP-Token/煎饼路由器— 800</strong></p><ul class=""><li id="760e" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><strong class="jw hu">伊凡决定再买100个代币，他去煎饼店，说“我想给BNB买100个代币”</strong></li></ul><p id="1716" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">pancake路由器向流动性对询问对BNB的令牌的当前汇率(使用</em> <strong class="jw hu"> <em class="mu"> AMM算法</em> </strong> <em class="mu">)，并告诉Ivan </em> — <strong class="jw hu">“这将花费你0.25 BNB +费用。”</strong></p><ul class=""><li id="b03f" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated">伊凡给煎饼送去0.25 BNB，然后等着他的代币。</li></ul><p id="bbc9" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">pan ckake路由器看到钱已经到了，在智能令牌契约上创建一个交易:</em> <strong class="jw hu">代表LP对的transfer(Kolya，100)。</strong></p><p id="1a18" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">智能合约通过借记这对夫妇的账户和贷记Ivan的账户来完成请求。结果:<br/><strong class="jw hu"><em class="mu">-</em>BEN—0<br/>-IVAN—200<br/>-JAKE—100<br/>-CAKE-LP-Token—700</strong></p><p id="3e66" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu"><em class="mu">pan ckae路由器将0.25 BNB </em> </strong> <em class="mu">发送到宇宙的另一端，在LP对的另一部分上，BNB契约中</em><strong class="jw hu"><em class="mu">CAKE-LP-Token</em></strong><em class="mu">对</em> <strong class="jw hu"> <em class="mu">的值从2增加到2.25 </em> </strong></p><ul class=""><li id="ca22" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated">此时，杰克决定卖掉所有的代币，买下比纳蒙。他走向煎饼，说:“我想卖100个代币”。</li></ul><p id="54fd" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">pancake路由器向LP询问到BNB的令牌的当前汇率(使用AMM算法)，并告诉杰克</em> — <strong class="jw hu">这将花费你0.37 BNB +的费用。</strong></p><p id="542b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">然后，Pancake向智能令牌合约询问JAKE是否允许他(Pancake)从他的账户中借记令牌，为此，它向智能令牌合约询问:</em> <strong class="jw hu">津贴(Jake，Pancake-router)函数</strong>的结果</p><p id="c072" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">*Pancake路由器逻辑上不信任任何人，所以所有借记交易都以他的名义进行，这就是为什么Jake必须说他信任Pancake来借记他的令牌余额*</p><p id="67b2" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">杰克以前没有卖出过任何东西，结果= 0。Pancake看到这一点，在swap界面为Jake画了一个</em> <strong class="jw hu">【批准】</strong> <em class="mu">按钮。</em></p><ul class=""><li id="69c2" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><strong class="jw hu">杰克推送“批准”</strong></li></ul><p id="d8a0" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">杰克的钱包向智能令牌合同发起交易:approve(pancake路由器，99999999999999999)，允许路由器用他(路由器)需要的任意多的令牌记入他的账户的借方。</em></p><p id="98f1" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">*实际上，更正确的做法是，只对每笔交易的金额给予许可，但人们都是懒惰的动物，因此通常没有人会费心将最大可能数量作为允许借记的代币数量。在我们的例子中，为了简单起见，有很多9。*</p><p id="e065" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">智能令牌合同通过向津贴表添加一行来执行操作:<br/> </em> <strong class="jw hu">杰克— (Pancake路由器，99999999)并生成批准事件</strong></p><p id="efd1" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">Pancake路由器看到此事件，并再次查询智能合同以获得函数的结果:</em> <strong class="jw hu">津贴(JAKE，punk路由器)</strong> <em class="mu">。</em></p><p id="6e35" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">如果智能合约返回9999999999，并且该值大于或等于当前交易的金额，则路由器将从界面中移除</em> <strong class="jw hu">【批准】</strong> <em class="mu">按钮，并启用</em> <strong class="jw hu">【交换】</strong> <em class="mu">按钮。如果返回0，</em> <strong class="jw hu">【批准】</strong> <em class="mu">按钮不消失，</em> <strong class="jw hu">【互换】</strong> <em class="mu">按钮仍然不活动。</em></p><ul class=""><li id="3560" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><strong class="jw hu">杰克推出“交换”</strong></li></ul><p id="e242" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">pan ckake路由器命令LP对的BNB部分向Jake发送0.37 BNB，并通过调用</em> <strong class="jw hu"> transferFrom(JAKE，punk ruther，100) </strong> <em class="mu">函数在智能令牌合同上创建一个交易。</em></p><p id="bbf4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">智能合约检查允许Pancake从Jakes的地址借记硬币的津贴行表，找到它并执行操作。</p><p id="2f4e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mu">现在表是这样的:<br/> </em> <strong class="jw hu"> <em class="mu"> - </em>本— 0 <br/> -伊万— 200 <br/> -杰克— 0 <br/> -蛋糕—LP—令牌— 800 </strong></p><ul class=""><li id="0b35" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated"><strong class="jw hu">一切都解决了，每个人都很开心，所有的操作都已经执行了</strong></li></ul><p id="d85f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">总而言之:</p><ul class=""><li id="9053" class="md me ht jw b jx jy ka kb kd mr kh ms kl mt kp mi mj mk ml dt translated">使用<strong class="jw hu">转移</strong>功能将代币从交易发送方的余额(通常是用户的钱包)转移到任何其他地址。</li><li id="4e60" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">令牌可以从任何地址发送到任何地址，只要通过批准功能允许借记债务人的地址。</li><li id="b752" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">函数<strong class="jw hu"> approve </strong>由地址的所有者调用，他允许另一个地址从他的余额中扣除代币。</li><li id="d6da" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">权限可以通过<strong class="jw hu">权限</strong>功能查看。</li><li id="cf52" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">在任何转移中，代币只是从资产负债表的一行移到另一行，永远不会离开智能合约的范围。</li><li id="31b8" class="md me ht jw b jx mm ka mn kd mo kh mp kl mq kp mi mj mk ml dt translated">如果你想预批准代币出售，那么进入<strong class="jw hu">代币</strong>智能合约，<strong class="jw hu">写</strong>标签，在那里寻找<strong class="jw hu">批准</strong>功能，插入你想交换的地方的智能<strong class="jw hu">路由器</strong>合约的地址。<strong class="jw hu">在我们的例子中，这是Pancake路由器的地址:0x 10 ed 43 c 718714 EB 63 D5 aa 57 b 78 b 54704 e 256024 e</strong></li></ul><p id="7405" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在本教程中，我们已经了解了关于你的账户、合同的基本内容，并了解了它们之间交互的要点。强烈建议你参加一个基础编程课程，以便能够阅读最低水平的合同代码，并至少大致了解特定代码的作用。</p><p id="efde" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">非常感谢从</strong><a class="ae kq" href="https://twitter.com/NFTSwapnet" rel="noopener ugc nofollow" target="_blank"><strong class="jw hu">Swap.net团队</strong> </a> <strong class="jw hu">到</strong> <a class="ae kq" href="https://t.me/ak74lab" rel="noopener ugc nofollow" target="_blank"> <strong class="jw hu">亚历克斯·克鲁格</strong> </a></p><h2 id="7fdc" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated">作者:Alex Kruegger<a class="ae kq" href="https://t.me/ak74lab" rel="noopener ugc nofollow" target="_blank">(TG @ Kruegger)</a>，频道—<a class="ae kq" href="https://t.me/ak74lab" rel="noopener ugc nofollow" target="_blank">https://t.me/ak74lab</a></h2><h2 id="d425" class="lj ks ht bd kt lk ll lm kx ln lo lp lb kd lq lr ld kh ls lt lf kl lu lv lh lw dt translated">由SWAP.NET团队<br/>翻译官方网站—<a class="ae kq" href="https://swap.net/" rel="noopener ugc nofollow" target="_blank">https://swap.net/</a>T3】推特—<a class="ae kq" href="https://twitter.com/NFTSwapnet" rel="noopener ugc nofollow" target="_blank">https://twitter.com/NFTSwapnet</a>T6】不和—<a class="ae kq" href="https://t.co/uzz0Qt12tf" rel="noopener ugc nofollow" target="_blank">https://t.co/uzz0Qt12tf</a>T9】中—<a class="ae kq" rel="noopener" href="/@NFTSwapnet">https://medium.com/@NFTSwapnet</a>T12】Docs&amp;白皮书—<a class="ae kq" href="https://t.co/5qc7Mxt2p5" rel="noopener ugc nofollow" target="_blank">http://docs.swap.net</a></h2></div></div>    
</body>
</html>