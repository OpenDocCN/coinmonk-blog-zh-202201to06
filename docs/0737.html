<html>
<head>
<title>Polkadot Backend API Creation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Polkadot后端API创建</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/polkadot-backend-api-creation-61f1a3dfe435?source=collection_archive---------2-----------------------#2022-02-16">https://medium.com/coinmonks/polkadot-backend-api-creation-61f1a3dfe435?source=collection_archive---------2-----------------------#2022-02-16</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/4881e13f1f33165308a5d606599e2a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEqnARZYH281xJ3O_kTsDg.png"/></div></div></figure><p id="076d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Polkadot是下一代区块链协议，将多个专业区块链连接成一个统一的网络。Polkadot的设计是一个广阔的网络愿景的一部分，该愿景旨在将对互联网垄断的控制权归还给个人，它建立在以前区块链网络的革命性承诺的基础上，同时提供了几个基本优势。</p><p id="f64d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">首先，如果你从未接触过波尔卡多特，我推荐你阅读他们的白皮书<a class="ae jz" href="https://polkadot.network/PolkaDotPaper.pdf" rel="noopener ugc nofollow" target="_blank">或查看他们的</a><a class="ae jz" href="https://medium.com/polkadot-network" rel="noopener">媒体</a>。如果您对Polkadot有一个基本的了解，我们就让您开始编写代码吧。</p><p id="735f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">关于项目:</strong>在本文中，我创建了一个API，它连接Polkadot测试网，生成账户，获取余额，并在Polkadot测试网上发送交易，称为<a class="ae jz" href="https://wiki.polkadot.network/docs/maintain-networks" rel="noopener ugc nofollow" target="_blank"> Westend </a>。在这个项目中，我们使用Polkadot . JS .<a class="ae jz" href="https://polkadot.js.org/docs/" rel="noopener ugc nofollow" target="_blank"><strong class="jd hu">Polkadot-JS</strong></a>是一个工具集合，它以一种精细的方式与Polkadot区块链接口。</p><p id="3e1a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">总结:</strong>在这个项目中，我们将存档down below函数来创建圆点后端。</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="9495" class="kj kk ht kf b fv kl km l kn ko"><strong class="kf hu">- Blockchain Connection:</strong> We are using testnet Westend for this project</span><span id="c221" class="kj kk ht kf b fv kp km l kn ko">-testnet Url: wss://westend-rpc.polkadot.io</span><span id="d87d" class="kj kk ht kf b fv kp km l kn ko">- <strong class="kf hu">Account creation</strong> (GET): This is a method that is used to generate an account. With this account, we can access information such as Mnemonic, Address, etc. <a class="ae jz" href="http://ip_address:8081/generatePolkaAddress" rel="noopener ugc nofollow" target="_blank">http://ip_address:8081/generatePolkaAddress</a></span><span id="f51d" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">-Import account  (POST):</strong> This method is used to import the account with a given Mnemonic parameter.</span><span id="8e0f" class="kj kk ht kf b fv kp km l kn ko">- <strong class="kf hu">Transaction  (POST):</strong> This method is used for transaction purposes. Parameters are the sender mnemonics, receiver address, and amount to be sent. After getting the current info from the network, the transaction object is created and signed with the sender's account. Then this transaction is broadcast to the network.</span><span id="32e6" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">- Balance Check  (GET):</strong> This method gets the balance of the given address.</span></pre><p id="0e21" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> Tech Stack: </strong> Tech Stack用在了这个项目上。</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="de66" class="kj kk ht kf b fv kl km l kn ko"><a class="ae jz" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">Node</a></span><span id="941a" class="kj kk ht kf b fv kp km l kn ko"><a class="ae jz" href="https://polkadot.js.org/docs/api/start/install" rel="noopener ugc nofollow" target="_blank">Polkador</a>.js</span><span id="e6fa" class="kj kk ht kf b fv kp km l kn ko"><a class="ae jz" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank">Express</a> </span></pre><h1 id="4745" class="kq kk ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">波尔卡多账户</h1><p id="8cca" class="pw-post-body-paragraph jb jc ht jd b je ln jg jh ji lo jk jl jm lp jo jp jq lq js jt ju lr jw jx jy hm dt translated"><strong class="jd hu">密码术</strong></p><ul class=""><li id="6dc3" class="ls lt ht jd b je jf ji jj jm lu jq lv ju lw jy lx ly lz ma dt translated"><strong class="jd hu">哈希算法:</strong>Polkadot中使用的哈希算法是<a class="ae jz" href="https://en.wikipedia.org/wiki/BLAKE_(hash_function)#BLAKE2" rel="noopener ugc nofollow" target="_blank"> Blake2b </a>。</li><li id="9baa" class="ls lt ht jd b je mb ji mc jm md jq me ju mf jy lx ly lz ma dt translated"><strong class="jd hu">密钥对和签名:</strong> Polkadot使用Schnorrkel/Ristretto x 25519(“Sr 25519”)作为其密钥派生和签名算法。</li><li id="3fbb" class="ls lt ht jd b je mb ji mc jm md jq me ju mf jy lx ly lz ma dt translated"><strong class="jd hu">地址类型:</strong>基于基板的链中使用的地址格式是SS58。SS58是对比特币的Base-58-check的修改，有一些微小的变化。</li></ul><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="dfea" class="kj kk ht kf b fv kl km l kn ko"><em class="mg">Address type</em> prefix that identifies an address as belonging to a specific network.</span><span id="a0f2" class="kj kk ht kf b fv kp km l kn ko">- Polkadot addresses always start with the number 1.</span><span id="67cd" class="kj kk ht kf b fv kp km l kn ko">- Kusama addresses always start with a capital letter, such as C D, F, G, H, J.</span><span id="4195" class="kj kk ht kf b fv kp km l kn ko">- Generic Substrate addresses always start with the number 5</span><span id="5ba2" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">- In this project we are creating Polka , Kusama and Generic account. </strong></span></pre><h1 id="f0d4" class="kq kk ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">先决条件</h1><h2 id="d908" class="kj kk ht bd kr mh mi mj kv mk ml mm kz jm mn mo ld jq mp mq lh ju mr ms ll mt dt translated">NodeJS</h2><p id="1006" class="pw-post-body-paragraph jb jc ht jd b je ln jg jh ji lo jk jl jm lp jo jp jq lq js jt ju lr jw jx jy hm dt translated">要运行这个API，应该在运行环境中安装NodeJS。请遵循以下步骤:</p><ul class=""><li id="7fcf" class="ls lt ht jd b je jf ji jj jm lu jq lv ju lw jy lx ly lz ma dt translated">从NodeJS网站<a class="ae jz" href="https://nodejs.org" rel="noopener ugc nofollow" target="_blank">https://nodejs.org</a>下载安装程序</li><li id="dddc" class="ls lt ht jd b je mb ji mc jm md jq me ju mf jy lx ly lz ma dt translated">运行安装程序。</li><li id="a2f3" class="ls lt ht jd b je mb ji mc jm md jq me ju mf jy lx ly lz ma dt translated">遵循安装步骤，同意许可协议，然后单击以下按钮。</li></ul><p id="02e6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，通过在命令提示符下使用以下命令打印NodeJS的版本来测试NodeJS:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="3eac" class="kj kk ht kf b fv kl km l kn ko">node -v // to check node version, use v16.14.0</span><span id="6848" class="kj kk ht kf b fv kp km l kn ko">npm -v // to check npm version</span></pre><p id="b358" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">步骤1 </strong>:项目运行如下步骤:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="7381" class="kj kk ht kf b fv kl km l kn ko">Clone Project</span><span id="bdb1" class="kj kk ht kf b fv kp km l kn ko">- Clone the repository, open a terminal and paste below command.</span><span id="0468" class="kj kk ht kf b fv kp km l kn ko">git clone <a class="ae jz" href="https://github.com/Achinta123/polkadot_backend" rel="noopener ugc nofollow" target="_blank">https://github.com/Achinta123/polkadot_backend</a></span><span id="67de" class="kj kk ht kf b fv kp km l kn ko">Go to the project folder, and run this command in the project folder in order to install npm packages.</span><span id="00db" class="kj kk ht kf b fv kp km l kn ko">npm install</span></pre><ul class=""><li id="5d49" class="ls lt ht jd b je jf ji jj jm lu jq lv ju lw jy lx ly lz ma dt translated">一旦项目被克隆和安装，这个命令应该在终端中的项目位置运行。<br/> <strong class="jd hu"> npm运行节点</strong></li></ul><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/cd0def138479b06d765ab484c0409573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zPYl8BhrphSj1Pt4"/></div></div></figure><p id="3514" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">第二步:连接邮递员</strong></p><ul class=""><li id="7410" class="ls lt ht jd b je jf ji jj jm lu jq lv ju lw jy lx ly lz ma dt translated">邮差收藏:<a class="ae jz" href="https://github.com/Achinta123/Blockchian-Base-Soical-Platform" rel="noopener ugc nofollow" target="_blank">https://github . com/achint a123/block chian-Base-social-Platform</a></li><li id="8948" class="ls lt ht jd b je mb ji mc jm md jq me ju mf jy lx ly lz ma dt translated">打开postman并发送post请求来创建我们的第一个帐户。</li></ul><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/23f1f553ab77eef0c10155370af519ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kywLukbpetcGuZmZ"/></div></div></figure><p id="505a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">第三步:</strong>创建两个账户，为一个账户注资。</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="deec" class="kj kk ht kf b fv kl km l kn ko">Adding balance to your account.</span><span id="88d6" class="kj kk ht kf b fv kp km l kn ko">Click on below link</span><span id="fc3b" class="kj kk ht kf b fv kp km l kn ko"><a class="ae jz" href="https://app.element.io/#/room/#westend_faucet:matrix.org" rel="noopener ugc nofollow" target="_blank">https://app.element.io/#/room/#westend_faucet:matrix.org</a></span><span id="7cee" class="kj kk ht kf b fv kp km l kn ko">Create account and signIn</span><span id="0f55" class="kj kk ht kf b fv kp km l kn ko">Type and send "!drip your_account_address"</span><span id="89b0" class="kj kk ht kf b fv kp km l kn ko">1 WND will we added in your account</span><span id="290a" class="kj kk ht kf b fv kp km l kn ko">My account details :</span><span id="8e5e" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">Account1 Details</strong></span><span id="e5cd" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">Address 1 :</strong> 5GWpWvJEDfpTNLokdVYh7S1W2MAA8pi1ummy76LecnH4qhM6</span><span id="407c" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">Mnemonics :</strong> “exotic ski jazz network mobile unit subway slim rebel garbage milk fringe”</span><span id="3ada" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">Account 2 Details</strong></span><span id="e3ec" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">Address :</strong> 5ERPedz5k3PyiQMgYNHn8NtGu2q3XKT7i7EuPNFKpgNYet8C</span><span id="2554" class="kj kk ht kf b fv kp km l kn ko"><strong class="kf hu">Mnemonics :</strong> “together behave vivid layer attend exile segment analyst ostrich give group little”</span></pre><p id="f5b6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">第四步。解密&amp;加密:</strong></p><ul class=""><li id="58b3" class="ls lt ht jd b je jf ji jj jm lu jq lv ju lw jy lx ly lz ma dt translated">使用sr25519解密地址。</li><li id="ec99" class="ls lt ht jd b je mb ji mc jm md jq me ju mf jy lx ly lz ma dt translated">使用sr25519加密公钥。</li></ul><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mv"><img src="../Images/c3b204aff8fd9da4116dcaf0e0b6951f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j7BlisMw8IWmowumjVRf_A.png"/></div></div></figure><p id="ea48" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">第五步:平衡检查:</strong></p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="9941" class="kj kk ht kf b fv kl km l kn ko">Using postman ( <a class="ae jz" href="http://localhost:3000/getBalance/account_address" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/getBalance/<strong class="kf hu">Type account_address</strong></a><strong class="kf hu">)</strong></span></pre><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/adf0918c29e9a6680a0c97b5084722b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gnLY6MRqvsLrkOdj"/></div></div></figure><p id="6adf" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">第六步:转移硬币</strong></p><blockquote class="mw mx my"><p id="5737" class="jb jc mg jd b je jf jg jh ji jj jk jl mz jn jo jp na jr js jt nb jv jw jx jy hm dt translated">发送交易的过帐请求。<a class="ae jz" href="http://localhost:3000/getBalance/createPolkaTrx" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/get balance/<strong class="jd hu">createPolkaTrx</strong></a></p><p id="2087" class="jb jc mg jd b je jf jg jh ji jj jk jl mz jn jo jp na jr js jt nb jv jw jx jy hm dt translated"><strong class="jd hu"> <em class="ht">旁注:</em> </strong> <em class="ht">大多数BN操作都有一个“n”版本，像</em><strong class="jd hu"><em class="ht">div</em></strong><em class="ht">和</em><strong class="jd hu"><em class="ht">divn</em></strong><em class="ht">、</em><strong class="jd hu"><em class="ht">mul</em></strong><em class="ht">和</em><strong class="jd hu"><em class="ht">muln</em></strong><em class="ht">。Theis期望一个数字，而标准的是一个</em> <strong class="jd hu"> <em class="ht"> BN </em> </strong> <em class="ht">实例。</em></p></blockquote><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="1cf1" class="kj kk ht kf b fv kl km l kn ko">Now, the only line that might seem strange is<strong class="kf hu">.muln(110).divn(100)</strong><strong class="kf hu"> </strong>where we seem to multiply our final value by <strong class="kf hu">110</strong> and divide by <strong class="kf hu">100</strong>, which is effectively multiplying it with <strong class="kf hu">1.1</strong>. This was taken directly from the Polkadot.js source code, which is an excellent resource that we’ll be exploring for using the API.</span></pre><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/3199d70b7809b9c32666e938d361ca89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*exDW1Yh9q2rIkg5x"/></div></div></figure><ul class=""><li id="1b23" class="ls lt ht jd b je jf ji jj jm lu jq lv ju lw jy lx ly lz ma dt translated">在Westend Explorer上检查交易详细信息。在其中粘贴交易id</li></ul><p id="b13e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">探险家:<a class="ae jz" href="https://westend.subscan.io/" rel="noopener ugc nofollow" target="_blank">https://westend.subscan.io/</a></p><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/e450162e168389cc4d4e3b3885f99061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VQOw9TkMxATr_E1p"/></div></div></figure><p id="cc96" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Github链接:<a class="ae jz" href="https://github.com/Achinta123/polkadot_backend.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Achinta123/polkadot_backend.git</a></p><p id="c34a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">联系人:achintad171@gmail.com</p></div></div>    
</body>
</html>