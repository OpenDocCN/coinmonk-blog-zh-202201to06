<html>
<head>
<title>CSC Web Wallet Using Web3.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Web3.js的CSC网络钱包</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/csc-web-wallet-using-web3-js-571260baadf0?source=collection_archive---------39-----------------------#2022-05-27">https://medium.com/coinmonks/csc-web-wallet-using-web3-js-571260baadf0?source=collection_archive---------39-----------------------#2022-05-27</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="e4c5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">嘿嘿嘿！</p><p id="2ac0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">0xlive在这里😃</p><p id="988e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本教程中，我们将使用web3.js开发简单的网络钱包</p><p id="dc81" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> web3.js </strong></p><p id="70c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">web3.js是一组用javascript实现的加密和网络工具</p><p id="9fae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">安装</strong></p><p id="3fa5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要在终端类型中安装web3.js:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="cf79" class="jx jy ht jt b fv jz ka l kb kc">npm install web3</span></pre><p id="a7e1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以使用yarn安装web3.js:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="7d27" class="jx jy ht jt b fv jz ka l kb kc">yarn add web3</span></pre><p id="3228" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以将web3.js导入html:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="0493" class="jx jy ht jt b fv jz ka l kb kc">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.3/web3.min.js"&gt;&lt;/script&gt;</span></pre><p id="e107" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">设置项目</strong></p><p id="5b2b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">创建index.html，把这个放进去:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="0944" class="jx jy ht jt b fv jz ka l kb kc">&lt;!DOCTYPE html&gt;<br/>&lt;head&gt;<br/>&lt;meta charset="utf-8"&gt;<br/>&lt;title&gt;CSC Web Wallet&lt;/title&gt;<br/>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.3/web3.min.js"&gt;&lt;/script&gt;<br/>&lt;/head&gt;<br/><br/>&lt;body&gt;<br/><br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6a42" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们已经创建了一个html文件并导入了pure web3.js。</p><p id="1af8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">钱包制作</strong></p><p id="951a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先我们需要设置提供者:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="621a" class="jx jy ht jt b fv jz ka l kb kc">const w3 = new Web3("https://testnet-rpc.coinex.net");</span></pre><p id="0034" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后创建一个钱包:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="f078" class="jx jy ht jt b fv jz ka l kb kc">const account = w3.eth.accounts.create();</span></pre><p id="6c92" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它将为我们生成一个随机钱包，其中包含钱包地址和私钥。您可以在浏览器控制台中检查它们:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="fe83" class="jx jy ht jt b fv jz ka l kb kc">console.log(account)</span></pre><p id="8c4a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意:当你刷新页面时，web3.js会生成新的随机钱包。因此，如果我们希望存储钱包以备将来使用，我们需要将其存储在浏览器本地存储中:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="7a76" class="jx jy ht jt b fv jz ka l kb kc">localStorage.setItem("address", account.address);<br/>localStorage.setItem("privateKey", account.privateKey);</span></pre><p id="0bdc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们在页面中显示钱包地址:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="dcea" class="jx jy ht jt b fv jz ka l kb kc">&lt;p&gt;Your Address  is:&lt;/p&gt;<br/>&lt;p id="address"&gt;&lt;/p&gt;<br/><br/>//js <br/>document.getElementById("address").innerHTML = localStorage.getItem("address");</span></pre><p id="9ed6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一切都好！让我们做个交易</p><p id="f151" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">进行交易</strong></p><p id="5860" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们需要以标准格式进行交易。</p><p id="3e12" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一笔正常的交易有以下内容:</p><p id="8982" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">1-收件人地址</p><p id="907c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2-随机数</p><p id="07e7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">3-金额</p><p id="f3c0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">4-气体</p><p id="3fb4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">5-私钥(它不是交易的一部分，但我们需要它来签署交易)</p><p id="da67" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们开始吧:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="0bcc" class="jx jy ht jt b fv jz ka l kb kc">const transaction = {<br/>     'to': 'recipient address', // recipient's address<br/>     'value': 1,<br/>     'gas': 30000,<br/>     'maxPriorityFeePerGas': 1000000108,<br/>     'nonce': nonce,<br/>     // optional data field to send message or execute smart contract<br/>    };</span></pre><p id="0c06" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要获得nonce，我们可以这样做:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="30f9" class="jx jy ht jt b fv jz ka l kb kc">const nonce = await w3.eth.getTransactionCount(localStorage.getItem("address"), 'latest');</span></pre><p id="6889" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在是签署交易的时候了:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="50b0" class="jx jy ht jt b fv jz ka l kb kc">const signedTx = await w3.eth.accounts.signTransaction(transaction, localStorage.setItem("privateKey", account.privateKey));<br/>    <br/>    w3.eth.sendSignedTransaction(signedTx.rawTransaction, function(error, hash) {<br/>    if (!error) {<br/>      console.log("TX Hash is ", hash);<br/>    } else {<br/>      console.log("a mistake was made", error)<br/>    }<br/>   });</span></pre><p id="b634" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">耶！我们做到了。我们需要在交易后使用getBalance检查余额:</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="64f1" class="jx jy ht jt b fv jz ka l kb kc">w3.eth.getBalance(localStorage.getItem("address"), function(err, result) {<br/>  if (err) {<br/>    console.log(err)<br/>  } else {<br/>    console.log(web3.utils.fromWei(result, "ether") + " CSC")<br/>  }<br/>})</span></pre><p id="a50c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">祝贺🥳</p><p id="265f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们使用web3.js创建了一个非托管的</p><p id="22c1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意:出于安全原因，我们必须加密私钥。我们可以使用AES-256加密来做到这一点。但是怎么做呢？这是你探索更多的责任😉</p><blockquote class="kd"><p id="960f" class="ke kf ht bd kg kh ki kj kk kl km jn ek translated">加入Coinmonks <a class="ae kn" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kn" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="7c83" class="ko jy ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">另外，阅读</h1><ul class=""><li id="dc76" class="ll lm ht is b it ln ix lo jb lp jf lq jj lr jn ls lt lu lv dt translated"><a class="ae kn" href="https://coincodecap.com/swap-crypto-on-uniswap" rel="noopener ugc nofollow" target="_blank">如何在Uniswap上交换加密？</a> | <a class="ae kn" href="https://coincodecap.com/a-ads-review" rel="noopener ugc nofollow" target="_blank"> A-Ads审查</a></li><li id="7fb3" class="ll lm ht is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv dt translated"><a class="ae kn" rel="noopener" href="/coinmonks/wazirx-vs-coindcx-vs-bitbns-149f4f19a2f1">WazirX vs coin dcx vs bit bns</a>|<a class="ae kn" rel="noopener" href="/coinmonks/blockfi-vs-coinloan-vs-nexo-cb624635230d">block fi vs coin loan vs Nexo</a></li><li id="033c" class="ll lm ht is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv dt translated"><a class="ae kn" rel="noopener" href="/coinmonks/localbitcoins-review-6cc001c6ed56">本地比特币评论</a> | <a class="ae kn" href="https://coincodecap.com/cryptocurrency-savings-accounts" rel="noopener ugc nofollow" target="_blank">加密货币储蓄账户</a></li><li id="f7dc" class="ll lm ht is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv dt translated"><a class="ae kn" href="https://coincodecap.com/margin-trading" rel="noopener ugc nofollow" target="_blank">什么是融资融券交易</a> | <a class="ae kn" href="https://coincodecap.com/dca" rel="noopener ugc nofollow" target="_blank">美元成本平均法</a></li><li id="a518" class="ll lm ht is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv dt translated"><a class="ae kn" href="https://coincodecap.com/uphold-card-review" rel="noopener ugc nofollow" target="_blank">拥护卡审核</a> | <a class="ae kn" href="https://coincodecap.com/trust-wallet-vs-metamask" rel="noopener ugc nofollow" target="_blank">信任钱包vs MetaMask </a></li><li id="86db" class="ll lm ht is b it lw ix lx jb ly jf lz jj ma jn ls lt lu lv dt translated"><a class="ae kn" href="https://coincodecap.com/exness-review" rel="noopener ugc nofollow" target="_blank"> Exness评测</a>|<a class="ae kn" href="https://coincodecap.com/bingbon-vs-bitget-vs-moonxbt" rel="noopener ugc nofollow" target="_blank">moon xbt Vs bit get Vs Bingbon</a></li></ul></div></div>    
</body>
</html>