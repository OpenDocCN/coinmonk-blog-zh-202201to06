# 生产合同安全性—第 1 部分

> 原文：<https://medium.com/coinmonks/production-contract-security-part-1-81583b7bde75?source=collection_archive---------24----------------------->

![](img/531e497a0a384d272fc4ea8ee352aa57.png)

恭喜你！您刚刚在 mainnet 上部署了您的第一个智能合同，您的平台即将推出。当你在发布会后解开你的飞人乔丹鞋时，你的脑海中有一个挥之不去的想法。

mordor is out to get your keys

# 问题是

智能合约安全性有两个主要方面。第一个也可能是最重要的是**代码**本身及其对安全编码标准的坚持，这些标准是通过多年来的许多攻击痛苦地学习来的。另一个关键方面是智能合约**所有权**，这将是本文的重点。

由于我一直在这个领域工作，我注意到许多项目在如何处理合同的所有权和事务管理方面存在一个问题。这是关于使用行业最佳实践保护您的智能合约部署的系列文章的第一部分。本文将集中讨论 multisigs 的使用，以及为什么它们对项目的安全性和可信度很重要。

像一个优秀的长老会教徒一样，我将提交 multisig 有助于解决的 3 个关键风险

*   **所有权风险** —您的组织将失去合同使用权的风险。
*   **资产风险** —你的合同没有保障，合同所拥有的资产可以被拿走的风险。
*   **声誉风险** —您的项目被负面看待的风险

> *交易新手？试试* [*密码交易机器人*](/coinmonks/crypto-trading-bot-c2ffce8acb2a) *或者* [*复制交易*](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c)

# 什么是多重信号

A `multisig`是部署到区块链的智能合约钱包，它可以拥有其他合约，并以其所有者的身份以提升的访问权限执行功能。顾名思义，在执行给定的交易之前，它需要其他账户开绿灯或`signing`的协调。multisig 已经使用了一段时间，他们自己也成为了攻击的目标——特别是奇偶校验 multi SIG——已经被黑客攻击了数百万次。如今市场上有几款 multisigs，但最突出的是`Gnosis Safe`。

在以后的文章中，我们将探索 Gnosis Safe 产品，但是现在我们只讨论概念。

# 所有权风险

假设你正在开发一个 NFT 项目，你已经写好了所有的测试，并且觉得代码是安全的，可以发布了。你通过你最喜欢的方式(安全帽、松露等)部署代码，现在你已经为你的薄荷准备好了。

*   如果您或其他人不小心将部署私钥提交/推送到您的 repo，会发生什么情况？这种情况已经发生了很多——比你想象的还要多。
*   您使用部署帐户部署合同，并将所有权转移到公司拥有的分类帐。如果那个人离开了，丢失了他们的账本，或者更糟——它的种子阶段——该怎么办？

multisig 允许可信的签名者联盟与 NFT 上的敏感功能进行交互，比如更改 baseURI 或其他细节。这里的基本思想是将 NFT 契约的所有权交给 multisig，并为其他签名者创建可以加密签名的`proposals`。multisig 将有一个可配置的最低签名人数，一旦达到该人数，拟议的交易将由 multisig 自己执行。这意味着没有一个人拥有 NFT 的所有权，它与治理配合得很好，因为提案是公开的，全世界都可以看到。

# 资金风险

世界上最好的程序员也会犯错。最重要的是，所有的契约都是公开的，所以有很多人关注它们的代码。有些观众是好奇，想投资，或者是恶意的。在恶意浏览者的情况下，他们会利用你的合同来获取价值，或者干脆破坏你的项目。如果你的合同收到了资金，就像大多数 NFT 或 defi 项目的情况一样，你将向潜在的攻击者展示一个蜜罐。无论是对 oracle 和 flash loan 攻击的精心策划的攻击，还是简单的可重入黑客攻击，将大量资金留在一份有很大攻击面的合同上是没有意义的。

multisig 可以为您的 onchain 资金提供一个安全的避风港，因为它是在这一点上建立的。我们编写的许多自定义智能合约都是为了支持某个应用程序或功能而构建的，并没有考虑安全性。这没有错，但是智能合约越复杂，它的攻击面就越大。作为应用程序或 NFT 合同的所有者，multisig 可以提取多余的资金并保持其安全，直到需要部署为止。

# 声誉风险

并不是每个人都关注底层的契约代码，但是有相当多的伪安全社会影响者可以在你的项目开始之前就毁掉它。如果这些`experts`中的一个看了你的合同，注意到它不是由一个 multisig 拥有的，而是一个有柴犬购买和随机 tx 历史的地址，他们会欺骗你。这不是个人问题，这是他们如何参与的问题。老实说，你应该更清楚。

security influencers

以下是其他一些帮助你降低公共合同声誉风险的建议

*   使用多重信号
*   使用 ENS 将 multisig 映射到您的组织，即。 *coolnfts.eth*
*   向您的 multisig 中添加至少 3 个签名者，提案需要获得多数支持才能通过
*   为您组织的签名者使用 ENS 子域名。 *bill.coolnfts.eth*
*   让可信的第三方签名者参与进来——有些人不信任只有公司内部签名者的多重签名

请注意，我们将在以后的文章中探讨 ENS(以太坊名称服务)以及如何使用它们。

# **收尾**

我希望这篇文章很好地总结了 multisigs 可以为您减少项目风险做些什么。在接下来的文章中，我们将探索一个示例项目，一步一步地完成所有的事情，并介绍一些工具来简化事情。如果你理解了这篇文章中的概念，没有什么可以阻止你在 Rinkeby 上试验并证明这些概念。愉快的旅程！