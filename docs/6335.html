<html>
<head>
<title>Diving deeper into Cellframe: Python SDK &amp; Plugins pt. 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入Cellframe: Python SDK &amp; Plugins pt。3</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/diving-deeper-into-cellframe-python-sdk-plugins-pt-3-857fda7f8e7e?source=collection_archive---------10-----------------------#2022-05-07">https://medium.com/coinmonks/diving-deeper-into-cellframe-python-sdk-plugins-pt-3-857fda7f8e7e?source=collection_archive---------10-----------------------#2022-05-07</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div class="fe ff iq"><img src="../Images/b7eea25afdf360a364da80c620ba05cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5rNIDfw_Xbvrd4-G.png"/></div></figure><p id="2950" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">好了，伙计们，又到了“让我们在Cellframe Python SDK上做一些实验测试”的时候了。</p><p id="0b7a" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">你可能看过我的关于t-dApps for Cellframe生态系统的文章，所以在这篇文章中，我们将看看Cellframe节点的服务器端和客户端插件。</p><p id="4cfb" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">客户端和服务器插件可以以多种不同的方式使用。例如，您可以根据不同的条件从服务器端向用户提供一些数据(例如，钱包中的令牌数量、付费订阅等。)</p><p id="3984" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">顺便说一下，在<a class="ae jv" href="https://gitlab.demlabs.net/cellframe/python-cellframe/-/tree/master/dists/examples/plugins" rel="noopener ugc nofollow" target="_blank"> Cellframe Gitlab </a>有一些关于客户端和服务器插件的例子，所以我们将把它们作为我们测试的基础。</p><p id="aaa2" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我们走吧！</p></div><div class="ab cl jw jx hb jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hm hn ho hp hq"><h2 id="763d" class="kd ke ht bd kf kg kh ki kj kk kl km kn ji ko kp kq jm kr ks kt jq ku kv kw kx dt translated">关于单元格框架</h2><p id="7232" class="pw-post-body-paragraph ix iy ht iz b ja ky jc jd je kz jg jh ji la jk jl jm lb jo jp jq lc js jt ju hm dt translated">Cellframe是一个雄心勃勃的第三代区块链项目，很少有人(包括我)已经开始谈论它是下一个波尔卡多特或草间弥生。</p><p id="a031" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">然而，这个项目更加面向服务，并且与Polkadot/Kusama相比具有一些优势(例如，后量子加密、2级分片、P2P跨链操作)。</p><p id="2c8e" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">Cellframe是用C写的(这将使它快速和可移植)，目前它有一个C和Python的SDK。将来会有更多受支持的语言出现。</p><p id="cde6" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我真的推荐访问他们的网站(<a class="ae jv" href="https://cellframe.net/" rel="noopener ugc nofollow" target="_blank">https://cellframe.net</a>)并阅读他们的白皮书！</p></div><div class="ab cl jw jx hb jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hm hn ho hp hq"><h2 id="f05c" class="kd ke ht bd kf kg kh ki kj kk kl km kn ji ko kp kq jm kr ks kt jq ku kv kw kx dt translated">客户端到服务器的连接</h2><p id="fb36" class="pw-post-body-paragraph ix iy ht iz b ja ky jc jd je kz jg jh ji la jk jl jm lb jo jp jq lc js jt ju hm dt translated">所以我们先来看看客户端插件。客户端插件可以以多种不同的方式用于建立到服务器端插件的连接，但是在这个例子中，我在本地Cellframe节点安装上运行所有的东西。</p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff ld"><img src="../Images/10281dccc4a8ab46d1a5b3edd846fd2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvrtPTldYtoUt3sAmihHSw.png"/></div></div></figure><p id="a68e" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我添加了一些基本的日志来查看当这个客户端插件连接到服务器插件时在幕后发生了什么。如果我们查看Cellframe节点的日志文件，应该会看到类似这样的内容:</p><pre class="le lf lg lh fq lm ln lo lp aw lq dt"><span id="b46c" class="kd ke ht ln b fv lr ls l lt lu">[05/07/22-07:35:45] [ * ] [libdap-python] [CLIENT PLUGIN] Client connected...<br/>[05/07/22-07:35:45] [ * ] [libdap-python] [CLIENT PLUGIN] sent data: Hello server!</span></pre><p id="7349" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">现在，让我们看看服务器插件部分:</p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff lv"><img src="../Images/035758a0f374e2abe4ff5ae25bf7e09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2fBhfMAG6D64vDQ2kqPaQ.png"/></div></div></figure><p id="f3dd" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我目前只修改了这个插件文件中的<code class="eh lw lx ly ln b">custom_data()</code>函数部分。当我们从客户端插件接收到一些数据时，就会调用<code class="eh lw lx ly ln b">custom_data()</code>。</p><p id="0a84" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">因此，在这两个插件运行后查看日志，我们会看到这样的内容:</p><pre class="le lf lg lh fq lm ln lo lp aw lq dt"><span id="bed4" class="kd ke ht ln b fv lr ls l lt lu">[05/07/22-07:36:58] [ * ] [libdap-python] [CLIENT PLUGIN] Client connected...<br/>[05/07/22-07:36:58] [ * ] [libdap-python] [CLIENT PLUGIN] sent data: Hello server!<br/>[05/07/22-07:36:58] [ * ] [libdap-python] [SERVER PLUGIN] Received data: Hello server!<br/>[05/07/22-07:36:58] [ * ] [libdap-python] [CLIENT PLUGIN] Received from server plugin: Hello server!</span></pre><p id="8984" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">因此，这些插件之间的基本数据流正常工作。</p><h2 id="bcf1" class="kd ke ht bd kf kg kh ki kj kk kl km kn ji ko kp kq jm kr ks kt jq ku kv kw kx dt translated">添加更多功能</h2><p id="4d33" class="pw-post-body-paragraph ix iy ht iz b ja ky jc jd je kz jg jh ji la jk jl jm lb jo jp jq lc js jt ju hm dt translated">好了，现在当<code class="eh lw lx ly ln b">init()</code>函数被调用时，连接正在工作，我们可以稍微修改一下插件，添加一个命令，允许我们用<code class="eh lw lx ly ln b">cellframe-node-cli</code>命令行工具连接到服务器插件。</p><p id="c069" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我们将简单地使用方法<code class="eh lw lx ly ln b">AppCliServer.cmdItemCreate()</code>，就像我在我的<a class="ae jv" rel="noopener" href="/coinmonks/diving-deeper-into-cellframe-python-sdk-plugins-pt-1-12eb7715d94b">早期教程</a>中对简单插件所做的那样:</p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff lz"><img src="../Images/71ae917c7f318381101d0deff55224f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pKYhXF7ZNr6oiZ9sNLRDuA.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">Command clientplugin calls function clientConnect().</figcaption></figure><p id="e3d9" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">之后，我们将<code class="eh lw lx ly ln b">ServiceClient</code>的初始化转移到我们已经创建的<code class="eh lw lx ly ln b">clientConnect()</code>函数中:</p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff me"><img src="../Images/f2b32bc82acb2a8243445005f34ca5bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zeZhjKE1WPH_D-sW63Etig.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">Function which is called when cellframe-node-cli is used.</figcaption></figure><p id="ec3e" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">现在我们可以用<code class="eh lw lx ly ln b">cellframe-node-cli clientplugin</code>测试客户端连接。在终端中使用该命令后，我们的日志应该会打印出与之前客户端连接到服务器时日志中打印的内容完全相同的内容。</p><p id="f44e" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">使用这样的命令太简单了。让我们给<code class="eh lw lx ly ln b">clientConnect()</code>函数添加几个检查来检查这个命令实际上是否有效:</p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff mf"><img src="../Images/413dbbda9c1337ec381fbcb5cc4b4f15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eAT6kTWAHUCFYFOcjDdzkQ.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">Checks for command validity.</figcaption></figure><p id="b7f3" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">现在，当您使用命令<code class="eh lw lx ly ln b">cellframe-node-cli clientplugin connect</code>时，它会创建一个<code class="eh lw lx ly ln b">ServiceClient</code>实例并连接到服务器插件。</p><p id="9e34" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我还修改了<code class="eh lw lx ly ln b">callback_connected()</code>日志记录，以通知用户该命令已被使用:</p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff mg"><img src="../Images/ec6ae334ff33915e557b10f00bd7936c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1qhrnmSeRxwSjKTMermvcw.png"/></div></div></figure><p id="bc91" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">现在在日志上我们可以看到:</p><pre class="le lf lg lh fq lm ln lo lp aw lq dt"><span id="3e9e" class="kd ke ht ln b fv lr ls l lt lu">[05/07/22-10:36:04] [ * ] [libdap-python] [CLIENT PLUGIN] Client connected...<br/>[05/07/22-10:36:04] [ * ] [libdap-python] [CLIENT PLUGIN] sent data: This function is now called with command!<br/>[05/07/22-10:36:04] [ * ] [libdap-python] [SERVER PLUGIN] Received data: This function is now called with command!<br/>[05/07/22-10:36:04] [ * ] [libdap-python] [CLIENT PLUGIN] Received from server plugin: This function is now called with command!</span></pre><p id="59b3" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">而当我们使用命令<code class="eh lw lx ly ln b">cellframe-node-cli clientplugin connect</code>时:</p><pre class="le lf lg lh fq lm ln lo lp aw lq dt"><span id="6b2b" class="kd ke ht ln b fv lr ls l lt lu">mika@cellframe:~$ cellframe-node-cli clientplugin connect<br/>Client connected to the server!</span></pre><p id="7459" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">正如我们所看到的，它应该是有效的。</p><p id="3d24" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">经过一点清理后，这是两者的最终代码:</p><p id="726b" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated"><strong class="iz hu">客户端部分:</strong></p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff mf"><img src="../Images/0ef06237baa0ecda4f3ad16e8bcd7803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sqZXAPDyH_hgIH2V9KLfdA.png"/></div></div></figure><p id="0908" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated"><strong class="iz hu">服务器部分:</strong></p><figure class="le lf lg lh fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff lv"><img src="../Images/69468f26790bee0dad59c6cc2707c061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XYIeN_ig-yEXymgCbzPRQw.png"/></div></div></figure><h2 id="4b80" class="kd ke ht bd kf kg kh ki kj kk kl km kn ji ko kp kq jm kr ks kt jq ku kv kw kx dt translated">结论</h2><p id="e441" class="pw-post-body-paragraph ix iy ht iz b ja ky jc jd je kz jg jh ji la jk jl jm lb jo jp jq lc js jt ju hm dt translated">在这一点上，我所能说的是，这篇文章只是皮毛。</p><p id="849c" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">借助Cellframe生态系统内置的强大SDK，您可以做数百万件事情。你可以编写完整的程序来做在常规智能合同上不可能做的事情。</p><p id="2655" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">一旦我更好地理解了事情实际上是如何工作的，我将在这个平台上越来越深入。</p><p id="b21a" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">顺便说一下，我希望我们很快也能看到一些Cellframe仪表板扩展的文档:Cellframe生态系统的超级应用程序。</p><p id="0717" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated"><strong class="iz hu">既然这将是一个完全不同的系列文章，那么……</strong></p><h2 id="aa40" class="kd ke ht bd kf kg kh ki kj kk kl km kn ji ko kp kq jm kr ks kt jq ku kv kw kx dt translated">有问题吗？推荐？</h2><p id="3aee" class="pw-post-body-paragraph ix iy ht iz b ja ky jc jd je kz jg jh ji la jk jl jm lb jo jp jq lc js jt ju hm dt translated">如果你想在区块链的未来上有所建树，加入他们的发展<a class="ae jv" href="https://t.me/cellframe_dev_en" rel="noopener ugc nofollow" target="_blank">电报频道</a>！</p><p id="7f5d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">你也可以通过推特<a class="ae jv" href="https://twitter.com/CellGainz" rel="noopener ugc nofollow" target="_blank">或</a><a class="ae jv" href="https://t.me/CELLgainz" rel="noopener ugc nofollow" target="_blank">电报</a>联系我。我的github上也有这个教程的资源。</p><p id="150e" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">感谢您的阅读！</p><p id="5526" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">非常感谢我所有的推特粉丝鼓励我写更多的文章！</p><blockquote class="mh"><p id="4e8b" class="mi mj ht bd mk ml mm mn mo mp mq ju ek translated">加入Coinmonks <a class="ae jv" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jv" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="0d3a" class="mr ke ht bd kf ms mt mu kj mv mw mx kn my mz na kq nb nc nd kt ne nf ng kw nh dt translated">另外，阅读</h1><ul class=""><li id="53a7" class="ni nj ht iz b ja ky je kz ji nk jm nl jq nm ju nn no np nq dt translated"><a class="ae jv" href="https://coincodecap.com/ftx-futures-trading" rel="noopener ugc nofollow" target="_blank">如何在FTX交易所交易期货</a> | <a class="ae jv" href="https://coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li><li id="0c8d" class="ni nj ht iz b ja nr je ns ji nt jm nu jq nv ju nn no np nq dt translated"><a class="ae jv" href="https://coincodecap.com/okex-kucoin" rel="noopener ugc nofollow" target="_blank"> OKEx vs KuCoin </a> | <a class="ae jv" href="https://coincodecap.com/celsius-alternatives" rel="noopener ugc nofollow" target="_blank">摄氏替代品</a> | <a class="ae jv" href="https://coincodecap.com/buy-vechain" rel="noopener ugc nofollow" target="_blank">如何购买VeChain </a></li><li id="ff32" class="ni nj ht iz b ja nr je ns ji nt jm nu jq nv ju nn no np nq dt translated"><a class="ae jv" href="https://coincodecap.com/profitfarmers-review" rel="noopener ugc nofollow" target="_blank"> ProfitFarmers点评</a> | <a class="ae jv" href="https://coincodecap.com/cornix-trading-bot" rel="noopener ugc nofollow" target="_blank">如何使用Cornix Trading Bot </a></li><li id="af77" class="ni nj ht iz b ja nr je ns ji nt jm nu jq nv ju nn no np nq dt translated"><a class="ae jv" href="https://coincodecap.com/buy-bitcoin-anonymously" rel="noopener ugc nofollow" target="_blank">如何匿名购买比特币</a> | <a class="ae jv" href="https://coincodecap.com/bitcoin-cash-wallets" rel="noopener ugc nofollow" target="_blank">比特币现金钱包</a></li><li id="0ca9" class="ni nj ht iz b ja nr je ns ji nt jm nu jq nv ju nn no np nq dt translated"><a class="ae jv" href="https://coincodecap.com/wazirx-nft-review" rel="noopener ugc nofollow" target="_blank">瓦济里克斯NFT评论</a>|<a class="ae jv" href="https://coincodecap.com/bitsgap-vs-pionex" rel="noopener ugc nofollow" target="_blank">Bitsgap vs Pionex</a>|<a class="ae jv" href="https://coincodecap.com/tangem-wallet-review" rel="noopener ugc nofollow" target="_blank">Tangem评论</a></li></ul></div></div>    
</body>
</html>