<html>
<head>
<title>ZK-Rollups on Bitcoin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ZK-比特币的累积</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/zk-rollups-on-bitcoin-ce35869b940d?source=collection_archive---------0-----------------------#2022-06-27">https://medium.com/coinmonks/zk-rollups-on-bitcoin-ce35869b940d?source=collection_archive---------0-----------------------#2022-06-27</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="dabd" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">比以太坊更具可扩展性</h2></div><p id="6501" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">ZK-Rollup被认为是以太坊第二层扩展解决方案的圣杯。</p><blockquote class="ke kf kg"><p id="4e27" class="ji jj kh jk b jl jm iu jn jo jp ix jq ki js jt ju kj jw jx jy kk ka kb kc kd hm dt translated">总的来说，我自己的观点是，在短期内，乐观的汇总可能会在通用EVM计算中胜出，ZK汇总可能会在简单的支付、交换和其他特定于应用程序的用例中胜出，但在中长期内，随着ZK-斯纳克技术的改进，ZK汇总将在所有用例中胜出。— <a class="ae kl" href="https://vitalik.ca/general/2021/01/05/rollup.html" rel="noopener ugc nofollow" target="_blank">维塔利克</a></p></blockquote><p id="96ca" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们已经直接在比特币上实现了有史以来第一个ZK累积(ZKR)。此外，我们展示了为什么ZKR在比特币上比在以太坊上工作得更好。</p><h1 id="50a4" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">ZKR如何在以太坊工作</h1><p id="d079" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">其核心是，ZKR利用了ZK- <strong class="jk hu"> <em class="kh"> S </em> </strong> NARK证明的简洁:验证某些计算是否正确完成比重新执行它要高效得多。不是处理链上的每个事务，而是首先将一个契约的多个事务发送给一个协调器(也称为定序器/继电器)，而不是矿工。协调器"<strong class="jk hu"> <em class="kh">滚动</em></strong>"/将它们捆绑成单个事务。该事务包含一个简洁的证明，证明所有这些批处理事务都被忠实地处理，将合同从<em class="kh">状态1 </em>更改为<em class="kh">状态2 </em>，并发送给矿工。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><a href="https://github.com/barryWhiteHat/roll_up_token"><div class="fe ff lj"><img src="../Images/77952df3bb3f975e7d976e8a46033a89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GLestmOeXl1vS8EY"/></div></a><figcaption class="lr ls fg fe ff lt lu bd b be z ek"><a class="ae kl" href="https://github.com/barryWhiteHat/roll_up_token" rel="noopener ugc nofollow" target="_blank">ZK Rollup</a></figcaption></figure><p id="2d48" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">由于所有繁重的事务处理都外包给了外部链，因此区块链可以在给定的时间间隔内处理更多的事务，从而进行扩展。zkSNARK证明确保了链外状态转换的正确性，使得协调者不可能提交无效的状态转换。这使得ZKR成为一个有吸引力的L2可伸缩性解决方案，因为它允许在不牺牲L1安全性的情况下进行扩展，不像许多其他L2解决方案，如<a class="ae kl" href="https://www.preethikasireddy.com/post/a-normies-guide-to-rollups" rel="noopener ugc nofollow" target="_blank"> Plasma和乐观汇总</a>。</p><h2 id="81c0" class="lv kn ht bd ko lw lx ly ks lz ma mb kw jr mc md ky jv me mf la jz mg mh lc mi dt translated">ZKR代币</h2><p id="3b45" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">我们以令牌为例来演示如何使用ZKR。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff mj"><img src="../Images/f123db3bfb0be80c873870580b721a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NayAmiN22MtW7O0-.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek"><a class="ae kl" href="https://www.preethikasireddy.com/post/a-normies-guide-to-rollups" rel="noopener ugc nofollow" target="_blank">Rollup on Ethereum</a></figcaption></figure><p id="9068" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">主链上有一个Rollup契约，跟踪一个状态根。“州根”是Merkle树的根。树的每一片叶子都是一个帐户，由它的所有者的公钥或地址及其属性(如balance)组成。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><a href="https://github.com/barryWhiteHat/roll_up_token"><div class="fe ff mo"><img src="../Images/d7d7fb29581dcbcbb787947f46d48343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lFjQ3LM31kCuxOzo"/></div></a><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Accounts form a Merkle tree</figcaption></figure><p id="5d84" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在以下示例中，两笔存款被批量处理为一笔交易。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff mp"><img src="../Images/cad6c30ef96de5ff814b4547bb724d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9ybzhvWorQ9yMRi0"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek"><a class="ae kl" href="https://github.com/barryWhiteHat/roll_up_token" rel="noopener ugc nofollow" target="_blank">State transition</a></figcaption></figure><h2 id="02b1" class="lv kn ht bd ko lw lx ly ks lz ma mb kw jr mc md ky jv me mf la jz mg mh lc mi dt translated">比特币上的ZKR</h2><p id="8541" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">我们已经在比特币上实现了rollup契约。它确保在处理完一批事务后，当前状态根被更新为正确的新根。</p><figure class="lk ll lm ln fq lo"><div class="bz el l di"><div class="mq mr l"/></div></figure><p id="71fc" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">它跟踪的唯一状态是第8行中帐户树的根。在第14行验证有效性证明，使用我们之前的<a class="ae kl" href="https://xiaohuiliu.medium.com/zk-snarks-on-bitcoin-239d96d182bd" rel="noopener"> zk-SNARK库</a>。Root在第17行被更新。第5行的验证密钥来自zk-SNARK的设置阶段。</p><h2 id="a9cb" class="lv kn ht bd ko lw lx ly ks lz ma mb kw jr mc md ky jv me mf la jz mg mh lc mi dt translated">生成ZKR证明</h2><p id="b14e" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">我们需要以zk-SNARK友好的方式编码我们的事务处理逻辑。一种流行的语言是Circom。由于篇幅限制，我们在这里不涉及Circom语法，而是让读者去<a class="ae kl" href="https://docs.circom.io/" rel="noopener ugc nofollow" target="_blank">Circom官方网站</a>了解更多。</p><p id="d02e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">处理单笔交易包括:</p><ol class=""><li id="bda1" class="ms mt ht jk b jl jm jo jp jr mu jv mv jz mw kd mx my mz na dt translated">检查发件人帐户是否在merkle proof树中</li><li id="0c56" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd mx my mz na dt translated">验证发送者的签名</li><li id="3feb" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd mx my mz na dt translated">更新发送方的余额并验证中间merkle根</li><li id="2cd6" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd mx my mz na dt translated">更新接收者的余额</li><li id="c3ca" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd mx my mz na dt translated">更新merkle根</li></ol><p id="3343" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以重用现有的rollup Circom代码，如<a class="ae kl" href="https://github.com/rollupnc/RollupNC_tutorial" rel="noopener ugc nofollow" target="_blank"> this </a>。</p><figure class="lk ll lm ln fq lo"><div class="bz el l di"><div class="mq mr l"/></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek"><a class="ae kl" href="https://github.com/rollupnc/RollupNC_tutorial/blob/master/4_single_tx/sample_circuit.circom" rel="noopener ugc nofollow" target="_blank">rollup.circom</a></figcaption></figure><p id="8adb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><a class="ae kl" rel="noopener" href="/coinmonks/hands-on-your-first-zk-application-70fe3a0c0d82">这里</a>是上面代码的详细解释。</p><h2 id="883f" class="lv kn ht bd ko lw lx ly ks lz ma mb kw jr mc md ky jv me mf la jz mg mh lc mi dt translated">多重交易</h2><p id="da6b" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">rollup的好处只有在多个事务一起进行批处理时才能体现出来。我们可以简单地在上面的代码上添加一个循环。只有当批中的所有交易都有效时，生成的凭证才有效。</p><figure class="lk ll lm ln fq lo"><div class="bz el l di"><div class="mq mr l"/></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek"><a class="ae kl" href="https://github.com/therealyingtong/RollupNC/blob/cb706028bdd97cf454cb79e7725facf2499ee199/snark_circuit/multiple_tokens_transfer_and_withdraw.circom#L83" rel="noopener ugc nofollow" target="_blank">Process Multiple Transactions</a></figcaption></figure><h1 id="9657" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">摘要</h1><p id="ca77" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">ZKR将交易数据存储在第1层(L1)的链上，以实现<a class="ae kl" href="https://blog.polygon.technology/the-data-availability-problem-6b74b619ffcc/" rel="noopener ugc nofollow" target="_blank">数据可用性</a>。L1的存储成本限制了ZKR的可扩展性。因此，ZKR在比特币上比在以太坊上工作得更好，因为前者的存储成本比后者便宜<a class="ae kl" href="https://xiaohuiliu.medium.com/bitcoin-vs-ethereum-smart-contracts-921e0a12b043" rel="noopener">个数量级。</a></p><p id="6c2e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">另外，由于zk-SNARK是通用的，一旦在比特币上部署了rollup智能合约，那么很多现有的在其他区块链上设计的ZKR工具(比如Circom和<a class="ae kl" href="https://zokrates.github.io/" rel="noopener ugc nofollow" target="_blank"> ZoKrates </a>)都可以直接在比特币上重用。这意味着ZKR今天可以用来扩展比特币上的应用。</p><h1 id="1956" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">参考</h1><p id="c571" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hm dt translated">[1]<a class="ae kl" href="https://blog.matter-labs.io/optimistic-vs-zk-rollup-deep-dive-ea141e71e075" rel="noopener ugc nofollow" target="_blank">https://blog . matter-labs . io/optimistic-vs-ZK-roll up-deep-dive-ea 141 e 71 e 075</a></p><p id="1f5a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">[2]<a class="ae kl" href="https://www.preethikasireddy.com/post/a-normies-guide-to-rollups" rel="noopener ugc nofollow" target="_blank">https://www . preethikasireddy . com/post/a-nor mies-guide-to-roll ups</a></p><p id="15e3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">【3】<a class="ae kl" href="https://github.com/barryWhiteHat/roll_up_token" rel="noopener ugc nofollow" target="_blank">https://github.com/barryWhiteHat/roll_up_token</a></p><p id="02f5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">[4]<a class="ae kl" href="https://blog.matter-labs.io/optimistic-vs-zk-rollup-deep-dive-ea141e71e075" rel="noopener ugc nofollow" target="_blank">https://blog . matt-labs . io/opportunity-vs-ZK-roll-deep-dive-ea 141 e 71e 075</a></p><blockquote class="ng"><p id="9c61" class="nh ni ht bd nj nk nl nm nn no np kd ek translated">加入Coinmonks <a class="ae kl" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kl" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解密码交易和投资</p></blockquote><h1 id="8967" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz nq ja ky jc nr jd la jf ns jg lc ld dt translated">此外，请阅读</h1><ul class=""><li id="509d" class="ms mt ht jk b jl le jo lf jr nt jv nu jz nv kd nw my mz na dt translated"><a class="ae kl" href="https://coincodecap.com/best-crypto-exchanges-in-uae" rel="noopener ugc nofollow" target="_blank">阿联酋5家最佳加密交易所</a> | <a class="ae kl" href="https://coincodecap.com/simpleswap-review" rel="noopener ugc nofollow" target="_blank">简单互换回顾</a></li><li id="b40a" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd nw my mz na dt translated"><a class="ae kl" href="https://coincodecap.com/ways-to-buy-dogecoin" rel="noopener ugc nofollow" target="_blank"> 7种购买Dogecoin的最佳方式</a>|<a class="ae kl" href="https://coincodecap.com/zebpay-review" rel="noopener ugc nofollow" target="_blank">zepay Review</a></li><li id="6c46" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd nw my mz na dt translated"><a class="ae kl" href="https://coincodecap.com/futures-trading-signals" rel="noopener ugc nofollow" target="_blank">最佳期货交易信号</a> | <a class="ae kl" href="https://coincodecap.com/liquid-exchange-review" rel="noopener ugc nofollow" target="_blank">流动性交易回顾</a></li><li id="d0e0" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd nw my mz na dt translated"><a class="ae kl" href="https://coincodecap.com/huobi-crypto-trading-signals" rel="noopener ugc nofollow" target="_blank">霍比密码交易信号</a> | <a class="ae kl" rel="noopener" href="/coinmonks/swapzone-review-crypto-exchange-data-aggregator-e0ad78e55ed7"> Swapzone Review </a></li><li id="5d0f" class="ms mt ht jk b jl nb jo nc jr nd jv ne jz nf kd nw my mz na dt translated"><a class="ae kl" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">最佳密码交易机器人</a> | <a class="ae kl" href="https://coincodecap.com/buy-solana" rel="noopener ugc nofollow" target="_blank">购买索拉纳</a> | <a class="ae kl" href="https://coincodecap.com/matrixport-review" rel="noopener ugc nofollow" target="_blank">出口审核</a></li></ul></div></div>    
</body>
</html>