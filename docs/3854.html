<html>
<head>
<title>WalletConnect v1.0 Overview</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">WalletConnect v1.0版概述</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/walletconnect-v1-0-overview-cb0c6ac75124?source=collection_archive---------10-----------------------#2022-03-31">https://medium.com/coinmonks/walletconnect-v1-0-overview-cb0c6ac75124?source=collection_archive---------10-----------------------#2022-03-31</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="3f5c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本文概述了WalletConnect，这是一种将移动钱包连接到dApps的协议。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/2c921536a5d43abb23965900c5543ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4cuNIb_7zCqMe_z5W60S_w.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Source:<a class="ae ke" href="https://raw.githubusercontent.com/WalletConnect/walletconnect-assets/master/png/original/walletconnect-banner.png" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/WalletConnect/walletconnect-assets/master/png/original/walletconnect-banner.png</a></figcaption></figure><h2 id="123d" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated"><strong class="ak">简介</strong></h2><p id="c303" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">WalletConnect是一种通过安全连接促进dApps和钱包之间通信的协议。WalletConnect允许加密钱包与桌面dApps连接，只需扫描二维码即可建立安全连接，并发送端到端的加密消息，允许用户在不离开移动钱包的情况下签署这些消息。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff lf"><img src="../Images/2e7130e80ce237cab1f311558819ecf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFJSB3nzO6TqZ5rVMuBUBw.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Image: Web 2.0 &amp; Web 3.0 architecture</figcaption></figure><p id="0871" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如上所示，在web2.0中，认证由中央服务器使用用户名/密码进行处理，从而提供对数据库的访问，将这些映射到web3.0将意味着此认证通过钱包(例如元掩码)完成，dApp和区块链作为web3空间中的其他组件，允许dApp和钱包之间的此认证/连接的协议是WalletConnect。</p><h2 id="54e7" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated"><strong class="ak">我们为什么需要WalletConnect？</strong></h2><p id="da92" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">在WalletConnect推出之前或目前作为其替代产品，将任何钱包连接到dApp的唯一方法是使用浏览器扩展或在移动钱包中使用dApp浏览器。浏览器扩展最常见的例子是metamask扩展，它支持Chrome、Edge等流行的浏览器。第二种选择是嵌入钱包的dApp浏览器，常见的例子是Trust Wallet在android Trust Wallet应用程序中提供dApp浏览器。</p><p id="087a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这些选项似乎适用于各种使用情形，但仍有缺点，其中一些列举如下:</p><ul class=""><li id="32d5" class="lg lh ht is b it iu ix iy jb li jf lj jj lk jn ll lm ln lo dt translated">浏览器钱包本身不会收集任何个人信息。安装它的浏览器可以收集有关您如何使用已安装的钱包扩展的信息，即暴露浏览的数据泄漏，并进一步使用这些数据来赚钱。</li><li id="6cd6" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">易受攻击的浏览器或钱包将影响您的浏览器钱包扩展，导致钱包中存储的资金丢失。因此，使用浏览器钱包存储私钥和大额令牌余额是不安全的。</li><li id="ef3b" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">基于浏览器的钱包也容易受到网络钓鱼攻击。</li><li id="c393" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">这些浏览器扩展依赖于浏览器，也就是说，如果浏览器取消了对这些扩展的支持，用户将很难用他们的钱包访问dApps。</li><li id="3bf7" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">在钱包移动应用中使用dApp浏览器打破了UX。因为dApp不会提供与其桌面版本相同的UX。</li><li id="9052" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">使用dApp浏览器将意味着钱包开发者需要付出额外的努力来构建这些浏览器，而不是专注于实际的钱包功能和安全性，从而产生开销。</li><li id="5568" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">dApp浏览器不能添加到iOS钱包。在基于iOS的钱包中，dApp浏览器支持被移除，以响应iOS提供的应用指南，从而获得AppStore上列出的任何应用。最近的例子是Trust Wallet，它从钱包的iOS应用程序中删除了dApp浏览器功能，以遵守AppStore指南。</li></ul><p id="3505" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了克服所有这些缺点并提供流畅的用户体验，WalletConnect提出了一个开放协议，通过简单的QR码将任何移动钱包连接到基于桌面的dApp，或者通过深度链接将任何dApp从移动浏览器连接到移动钱包。</p><h2 id="defc" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated">【WalletConnect如何工作？</h2><p id="418a" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">简而言之，WalletConnect协议使用桥接服务器在两个应用程序之间建立连接，桥接服务器将在连接的设备之间中继对称加密的有效载荷。协议依赖于其中一个对等方(dApp)通过显示QR码或深度链接来启动连接，只有当用户批准钱包上的连接请求时，才会建立连接。</p><p id="ac44" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="lu">建筑</em></p><p id="a299" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">WalletConnect协议架构有3个主要组件:</p><ol class=""><li id="9c28" class="lg lh ht is b it iu ix iy jb li jf lj jj lk jn lv lm ln lo dt translated">dApp:在区块链上提供服务的web3应用程序，使用客户端连接到钱包。</li><li id="42f9" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">钱包:存储私钥并负责签署有效载荷的应用程序。</li><li id="88a7" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">桥服务器:一个网络套接字服务器，负责在dApp和wallet之间转发消息。</li></ol><p id="4216" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="lu">工作</em></p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff lw"><img src="../Images/2b1ea1b0ca448e92be9acb0fd9cca870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7t4JUiM912GFs9qaYYJ95Q.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Image: Establishing a connection , Source:<a class="ae ke" href="https://docs.walletconnect.com/tech-spec" rel="noopener ugc nofollow" target="_blank">https://docs.walletconnect.com/tech-spec</a></figcaption></figure><ol class=""><li id="1f0c" class="lg lh ht is b it iu ix iy jb li jf lj jj lk jn lv lm ln lo dt translated">dApp发布一个加密数据，包含peerID(dApp的客户端ID)和peer meta(dApp的元数据包括dApp名称、徽标和描述)。在后台，dApp发送“pub”请求，主题= &gt;握手主题，peerID =&gt;dapp客户端ID。另外，dApp发送主题为=&gt;dapp客户端ID的“sub”请求</li><li id="7912" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">dApp使用标准的<a class="ae ke" href="https://eips.ethereum.org/EIPS/eip-1328" rel="noopener ugc nofollow" target="_blank"> walletconnect URI格式</a>来显示QR码，其中包括walletconnect协议、握手主题、版本、桥服务器URL、对称密钥十六进制字符串。</li><li id="3179" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">钱包将使用二维码或深层链接读取URI。在读取URI之后，对等体将接收并解密连接请求有效载荷。在后台，wallet发送主题为= &gt;握手主题的“sub”请求，以获得加密的连接请求。钱包还向主题发送“sub”请求= &gt;钱包客户端ID。</li><li id="493e" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">然后，钱包将显示一个包含dApp提供的连接请求详细信息的弹出窗口。然后，用户将批准或拒绝该连接。</li><li id="e0f8" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">如果用户批准了连接请求，wallet将共享帐户地址和链id，如果拒绝，wallet将发送适当的响应。为此，wallet发送“pub”请求，主题=&gt; dApp客户端ID，peerID=&gt;wallet客户端ID和连接响应。</li><li id="a7f5" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">因此，dApp将从桥服务器获取该数据。</li></ol><blockquote class="lx ly lz"><p id="1ce4" class="iq ir lu is b it iu iv iw ix iy iz ja ma jc jd je mb jg jh ji mc jk jl jm jn hm dt translated">交易新手？尝试<a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae ke" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><p id="4aa9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦握手完成，双方都将这些客户端ID(接收消息的主题)和对等体ID(发送消息的主题)主题添加到它们的持久本地存储中。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff md"><img src="../Images/aa42eb3a0e74fe3e3c53302f7367963b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ucK7fSqfQgJC7By1A-TmmQ.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Image: Call request , Source:<a class="ae ke" href="https://docs.walletconnect.com/tech-spec" rel="noopener ugc nofollow" target="_blank">https://docs.walletconnect.com/tech-spec</a></figcaption></figure><ol class=""><li id="87ad" class="lg lh ht is b it iu ix iy jb li jf lj jj lk jn lv lm ln lo dt translated">一旦连接建立，dApp将发送一个加密的JSON-RPC调用请求到桥服务器，这将触发一个推送通知。</li><li id="7104" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">一旦wallet收到通知，它将从桥服务器获取有效负载。</li><li id="0ce9" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">当用户批准请求时，wallet将签署有效负载，并将加密的有效负载发送到桥服务器。</li><li id="00f5" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn lv lm ln lo dt translated">因此，dApp接收到来自桥服务器的响应。</li></ol><h2 id="59c9" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated"><strong class="ak"> WalletConnect在行动… </strong></h2><p id="fb4a" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hm dt translated">集成WalletConnect的dApp示例可在此处找到:</p><ul class=""><li id="1799" class="lg lh ht is b it iu ix iy jb li jf lj jj lk jn ll lm ln lo dt translated">react js:<a class="ae ke" href="https://github.com/vineetaparodkar/wallet_connect_sample.git" rel="noopener ugc nofollow" target="_blank">https://github . com/vineetaparodkar/wallet _ connect _ sample . git</a></li><li id="2aa0" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">react Native CLI:<a class="ae ke" href="https://github.com/vineetaparodkar/wallet_connect_react_native_cli.git" rel="noopener ugc nofollow" target="_blank">https://github . com/vineetaprodkar/wallet _ connect _ react _ Native _ CLI . git</a></li><li id="f272" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">反应本土博览会:<a class="ae ke" href="https://github.com/vineetaparodkar/wallet_connect_expo.git" rel="noopener ugc nofollow" target="_blank">https://github.com/vineetaparodkar/wallet_connect_expo.git</a></li></ul><h2 id="dfac" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated"><strong class="ak">对WalletConnect v1.0版的改进</strong></h2><ul class=""><li id="abe3" class="lg lh ht is b it la ix lb jb me jf mf jj mg jn ll lm ln lo dt translated">WalletConnect v1.0使用直接通过QR码共享的对称密钥，因此不安全，因为该密钥容易受到浏览器攻击。—在2.0版中，通过使用X25519共享密钥派生的非对称密钥，此问题已得到修复。</li><li id="59a6" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">WalletConnect v1.0需要链切换才能连接到不同的链。— v2.0提供了一项功能，其中dApp必须提前请求链，用户将能够从dApp进行控制，从而避免链切换。</li><li id="88a5" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">在WalletConnect v1.0版中，会话生存期是无限的(直到其中一个对等体发出断开事件)，因此会导致会话停滞。— v2.0管理这些会话，默认会话时间为7天，配对的默认时间线为30天。</li></ul><p id="b95d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在WalletConnect v2.0 beta中添加的其他改进和附加功能可以在<a class="ae ke" href="https://docs.walletconnect.com/2.0/" rel="noopener ugc nofollow" target="_blank"> v2.0 beta文档</a>中找到。</p><h2 id="ae23" class="kf kg ht bd kh ki kj kk kl km kn ko kp jb kq kr ks jf kt ku kv jj kw kx ky kz dt translated"><strong class="ak">参考文献:</strong></h2><ul class=""><li id="989b" class="lg lh ht is b it la ix lb jb me jf mf jj mg jn ll lm ln lo dt translated">WalletConnect v1.0版—<a class="ae ke" href="https://docs.walletconnect.com/" rel="noopener ugc nofollow" target="_blank">https://docs.walletconnect.com/</a></li><li id="b2ea" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">WalletConnect v2.0测试版—<a class="ae ke" href="https://docs.walletconnect.com/2.0/" rel="noopener ugc nofollow" target="_blank">https://docs.walletconnect.com/2.0/</a></li></ul><blockquote class="mh"><p id="91ca" class="mi mj ht bd mk ml mm mn mo mp mq jn ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="47c3" class="mr kg ht bd kh ms mt mu kl mv mw mx kp my mz na ks nb nc nd kv ne nf ng ky nh dt translated">另外，阅读</h1><ul class=""><li id="8e7c" class="lg lh ht is b it la ix lb jb me jf mf jj mg jn ll lm ln lo dt translated">购买Dogecoin的7种最佳方式 | <a class="ae ke" href="https://coincodecap.com/zebpay-review" rel="noopener ugc nofollow" target="_blank"> ZebPay评论</a></li><li id="cd36" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae ke" href="https://coincodecap.com/futures-trading-signals" rel="noopener ugc nofollow" target="_blank">最佳期货交易信号</a> | <a class="ae ke" href="https://coincodecap.com/liquid-exchange-review" rel="noopener ugc nofollow" target="_blank">流动性交易回顾</a></li><li id="e4a9" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated">【Huobi的加密交易信号 | <a class="ae ke" rel="noopener" href="/coinmonks/swapzone-review-crypto-exchange-data-aggregator-e0ad78e55ed7"> Swapzone审查</a></li><li id="b5f2" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">最佳加密交易机器人</a> | <a class="ae ke" href="https://coincodecap.com/buy-solana" rel="noopener ugc nofollow" target="_blank">购买索拉纳</a> | <a class="ae ke" href="https://coincodecap.com/matrixport-review" rel="noopener ugc nofollow" target="_blank">矩阵导出评论</a></li><li id="3a9d" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae ke" href="https://coincodecap.com/coldcard-review" rel="noopener ugc nofollow" target="_blank"> Coldcard评论</a> | <a class="ae ke" href="https://coincodecap.com/boxtradex-review" rel="noopener ugc nofollow" target="_blank"> BOXtradEX评论</a>|<a class="ae ke" href="https://coincodecap.com/uniswap" rel="noopener ugc nofollow" target="_blank">uni swap指南</a></li><li id="6c88" class="lg lh ht is b it lp ix lq jb lr jf ls jj lt jn ll lm ln lo dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/coinbase-review-6ef4e0f56064">比特币基地评论</a> | <a class="ae ke" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2">德里比特评论</a> | <a class="ae ke" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX评论</a></li></ul></div></div>    
</body>
</html>