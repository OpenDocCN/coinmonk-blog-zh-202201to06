<html>
<head>
<title>Interacting with Deployed Smart Contract on Blockchain using Hardhat</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Hardhat与区块链上部署的智能合约进行交互</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/interacting-with-your-deployed-smart-contract-on-blockchain-using-hardhat-bf14767bc0a5?source=collection_archive---------9-----------------------#2022-06-13">https://medium.com/coinmonks/interacting-with-your-deployed-smart-contract-on-blockchain-using-hardhat-bf14767bc0a5?source=collection_archive---------9-----------------------#2022-06-13</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/></div><div class="ab cl iq ir hb is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hm hn ho hp hq"><p id="74b2" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我们将学习如何使用安全帽、炼金术和元面具与我们部署的solidity智能合同进行交互。</p><p id="fe7a" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">这是我们之前工作<a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065">的下一个阶段</a>，在这里我们学习了如何通过Solidity、MetaMask、Hardhat和Alchemy在区块链上创建和部署智能合约。</p><p id="4efa" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">如果你还没有浏览过<a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065">上一篇文章</a>，那么请参考以下内容</p><div class="jw jx fm fo jy jz"><a rel="noopener follow" target="_blank" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065"><div class="ka ab ej"><div class="kb ab kc cl cj kd"><h2 class="bd hu fv z el ke eo ep kf er et hs dt translated">在区块链上创建和部署智能合约</h2><div class="kg l"><h3 class="bd b fv z el ke eo ep kf er et ek translated">我将用一种简单的方式介绍什么是智能合约，以及如何创建一个智能合约，并使用…</h3></div><div class="kh l"><p class="bd b gc z el ke eo ep kf er et ek translated">medium.com</p></div></div><div class="ki l"><div class="kj l kk kl km ki kn ko jz"/></div></div></a></div><p id="2150" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">区块链中一个典型的智能合同流程可以描述为</p><figure class="kq kr ks kt fq ku fe ff paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="fe ff kp"><img src="../Images/603ed70bee75a71994d2901b192a80d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rgHt0UWXFF7c8QT8N-_mDg.png"/></div></div><figcaption class="la lb fg fe ff lc ld bd b be z ek">Smart Contract: A typical Smart Contract flow on Blockchain</figcaption></figure><h1 id="112c" class="le lf ht bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb dt translated">智能合同项目设置</h1><p id="5751" class="pw-post-body-paragraph ix iy ht iz b ja mc jc jd je md jg jh ji me jk jl jm mf jo jp jq mg js jt ju hm dt translated">如果您之前没有进行项目设置，请参考<a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#112c">智能合约项目设置</a>部分，因为我们将浏览项目文件以与我们部署的智能合约进行交互。</p><p id="306c" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">作为快速复习，我们的项目有以下结构，其中<code class="eh mh mi mj mk b">GreetingMessages.sol</code>是我们的可靠性代码，有我们的智能合同逻辑，<code class="eh mh mi mj mk b">scripts</code>文件夹有<code class="eh mh mi mj mk b">deploy.js</code>文件，通过它我们在<code class="eh mh mi mj mk b">Goreli Test Network</code>上部署我们的合同</p><figure class="kq kr ks kt fq ku fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/dbe21b6c936e26ec9d351e42783d115d.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*fd-yrTxgg1lsiBmvfpcpQA.png"/></div><figcaption class="la lb fg fe ff lc ld bd b be z ek">Smart Contract: <a class="ae jv" href="https://github.com/hemantjuyal/smart-contract" rel="noopener ugc nofollow" target="_blank">Github</a> project set-up</figcaption></figure><p id="c16b" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated"><strong class="iz hu">更新中。环境配置</strong> <strong class="iz hu"> <br/> </strong>我们在合同部署过程中创建了<code class="eh mh mi mj mk b"><a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#d848">.env</a></code> <a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#d848">文件</a>，并且拥有部署智能合同所需的项目配置。</p><p id="0828" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">现在，为了与我们的智能合同进行交互，智能合同将通过添加我们在<a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#3327">之前的文章部分</a>中获得的<code class="eh mh mi mj mk b">CONTRACT_ADDRESS</code>配置来更新我们的<code class="eh mh mi mj mk b"><a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#d848">.env</a></code> <a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#d848">文件</a>。</p><pre class="kq kr ks kt fq mm mk mn mo aw mp dt"><span id="da3b" class="mq lf ht mk b fv mr ms l mt mu">#.env file configuration for interacting our Smart Contract</span><span id="1e01" class="mq lf ht mk b fv mv ms l mt mu">API_URL = Copy HTTP value from your Alchemy app key details section<br/>API_KEY = Copy API_KEY value from your Alchemy app key details section<br/>PRIVATE_KEY = Your MetaMask wallet private key<br/>CONTRACT_ADDRESS = We got this address at the time our Smart Contract was deployed in previous step</span></pre><blockquote class="mw mx my"><p id="2bff" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">注意:如果您忘记了我们将从哪里获得环境配置#1、#2和#3，那么请参考<a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#d848">之前的步骤</a>作为快速复习</p></blockquote><p id="5bfe" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">完全配置和更新。env文件看起来会像这样</p><figure class="kq kr ks kt fq ku"><div class="bz el l di"><div class="nd ne l"/></div><figcaption class="la lb fg fe ff lc ld bd b be z ek">Smart Contract: .env file configuration</figcaption></figure><h1 id="1e1d" class="le lf ht bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb dt translated">与您的智能合同互动</h1><p id="abe6" class="pw-post-body-paragraph ix iy ht iz b ja mc jc jd je md jg jh ji me jk jl jm mf jo jp jq mg js jt ju hm dt translated">让我们进入下一步，看看如何与我们部署的合同进行交互。导航到<code class="eh mh mi mj mk b">scripts\interact.js</code>文件，您会发现代码如下</p><figure class="kq kr ks kt fq ku"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="cf60" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">您可以看到，我们正在使用在<a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#d848">之前的步骤</a>中已经完成的<code class="eh mh mi mj mk b">.env</code>配置来分配局部变量。我们的交互机制非常简单，我们获取在契约部署时提供的问候消息，然后通过传递新值来更新问候消息，并显示我们的契约返回的更新消息。</p><p id="444d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">运行命令与您的合同进行交互</p><pre class="kq kr ks kt fq mm mk mn mo aw mp dt"><span id="b5ba" class="mq lf ht mk b fv mr ms l mt mu">npx hardhat run scripts/interact.js</span></pre><p id="23dc" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">成功执行后，您将得到如下输出</p><pre class="kq kr ks kt fq mm mk mn mo aw mp dt"><span id="649c" class="mq lf ht mk b fv mr ms l mt mu">The message is: Hello and Welcome<br/>Updating the message…<br/>The new message is: Hola y bienvenido</span></pre><p id="4006" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">恭喜你！！！我们已经成功地交互了我们的智能合同。现在是大声呼喊和真正庆祝的时候了；-)</p><figure class="kq kr ks kt fq ku fe ff paragraph-image"><div class="fe ff nf"><img src="../Images/08371c7ec7ef1cecf909f2da6e24dbb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/1*BtrITzId8yojqZwpM49vug.gif"/></div><figcaption class="la lb fg fe ff lc ld bd b be z ek">Smart Contract: Interaction successful and now it’s time for big celebration</figcaption></figure><h1 id="d7fc" class="le lf ht bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb dt translated">使用炼金术获得洞察力</h1><p id="9a72" class="pw-post-body-paragraph ix iy ht iz b ja mc jc jd je md jg jh ji me jk jl jm mf jo jp jq mg js jt ju hm dt translated">Alchemy提供了一个非常好的分析仪表板，它以交易的形式覆盖了所有与智能合同相关的部署和交互细节。您可以查看计算单位、响应时间、所有请求级别的详细信息，以便获得非常好的洞察力。</p><p id="7c3f" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">这是我们在之前的<a class="ae jv" rel="noopener" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065#bd47">帖子</a>中创建的<code class="eh mh mi mj mk b">SmartContract-GreetingMessages</code>应用仪表板</p><figure class="kq kr ks kt fq ku fe ff paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="fe ff ng"><img src="../Images/d9137354197c801854b115b49a18606d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*70fcZux3Ohf1kH2X14Frdw.png"/></div></div><figcaption class="la lb fg fe ff lc ld bd b be z ek">Smart Contract: App Insights through Alchemy Dashboard</figcaption></figure><figure class="kq kr ks kt fq ku fe ff paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="fe ff nh"><img src="../Images/84df17ac3a80bb4b9639d659d8766f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujkRgLUaXrZyG4eHKrzLtw.png"/></div></div><figcaption class="la lb fg fe ff lc ld bd b be z ek">Smart Contract: App Requests Insights through Alchemy Dashboard</figcaption></figure><p id="a0ed" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">我将在其他博客文章中介绍Alchemy平台的细节，包括智能合同应用insights dashboard，因为这本身是一个非常大的主题，值得详细介绍。</p><blockquote class="mw mx my"><p id="9ef1" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">图片来源:派拉蒙电影公司和莱昂纳多迪卡普里奥。</p></blockquote></div><div class="ab cl iq ir hb is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hm hn ho hp hq"><blockquote class="mw mx my"><p id="a4bb" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated"><strong class="iz hu">词汇:</strong></p><p id="9172" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">区块链:区块链是一种分布式账本(形式),具有不断增长的以加密方式链接在一起的区块(或记录)列表。来自<a class="ae jv" href="https://en.wikipedia.org/wiki/Blockchain" rel="noopener ugc nofollow" target="_blank">维基百科</a></p><p id="95e2" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">天然气:天然气是EVM内用于计算交易费的记账单位，交易费是指交易发送方必须向在区块链中包含交易的矿商支付的ETH金额。来自<a class="ae jv" href="https://en.wikipedia.org/wiki/Ethereum#:~:text=Gas%20is%20a%20unit%20of,the%20transaction%20in%20the%20blockchain." rel="noopener ugc nofollow" target="_blank">维基百科</a></p><p id="7274" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">Solidity: Solidity是一种面向对象的编程语言，用于在区块链平台上实现智能合约。受C++、JavaScript、Python的影响。</p><p id="6a64" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">Hardhat: Hardhat是一个开发环境，用于编译、部署、测试和调试基于以太坊的软件。</p><p id="6fc7" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">Alchemy: Alchemy为区块链公司开发和销售工具和基础设施服务。Alchemy拥有广泛的产品，提供了一个强大的区块链开发平台，提供了一套开发工具。</p><p id="fe55" class="ix iy mz iz b ja jb jc jd je jf jg jh na jj jk jl nb jn jo jp nc jr js jt ju hm dt translated">元掩码:元掩码是一个加密钱包，允许用户存储和交换以太和其他以太相关的令牌。</p></blockquote></div><div class="ab cl iq ir hb is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hm hn ho hp hq"><h1 id="4258" class="le lf ht bd lg lh ni lj lk ll nj ln lo lp nk lr ls lt nl lv lw lx nm lz ma mb dt translated">其他推荐文章</h1><div class="jw jx fm fo jy jz"><a rel="noopener follow" target="_blank" href="/@hemantjuyal/how-to-create-and-sell-your-nft-on-opensea-in-real-without-gas-fee-in-10-mins-801d7e40ab17"><div class="ka ab ej"><div class="kb ab kc cl cj kd"><h2 class="bd hu fv z el ke eo ep kf er et hs dt translated">如何在10分钟内在OpenSea上创建和销售你的NFT而不用付汽油费</h2><div class="kg l"><h3 class="bd b fv z el ke eo ep kf er et ek translated">相信我…我会让它变得简单明了…创建您的NFT并在现实中销售它非常容易…</h3></div><div class="kh l"><p class="bd b gc z el ke eo ep kf er et ek translated">medium.com/@hemantjuyal</p></div></div><div class="ki l"><div class="nn l kk kl km ki kn ko jz"/></div></div></a></div><div class="jw jx fm fo jy jz"><a rel="noopener follow" target="_blank" href="/@hemantjuyal/how-i-did-my-first-crypto-mining-successfully-d3d041dc6117"><div class="ka ab ej"><div class="kb ab kc cl cj kd"><h2 class="bd hu fv z el ke eo ep kf er et hs dt translated">我是如何成功完成第一次加密挖掘的</h2><div class="kg l"><h3 class="bd b fv z el ke eo ep kf er et ek translated">要成功挖掘加密货币，请遵循以下步骤。第一步是安装Monero钱包。第二步是安装XMRig…</h3></div><div class="kh l"><p class="bd b gc z el ke eo ep kf er et ek translated">medium.com/@hemantjuyal</p></div></div><div class="ki l"><div class="no l kk kl km ki kn ko jz"/></div></div></a></div><div class="jw jx fm fo jy jz"><a rel="noopener follow" target="_blank" href="/@hemantjuyal/creating-and-deploying-a-smart-contract-on-a-blockchain-c97e9edcc065"><div class="ka ab ej"><div class="kb ab kc cl cj kd"><h2 class="bd hu fv z el ke eo ep kf er et hs dt translated">在区块链上创建和部署智能合约</h2><div class="kg l"><h3 class="bd b fv z el ke eo ep kf er et ek translated">我将用一种简单的方式介绍什么是智能合约，以及如何创建一个智能合约，并使用…</h3></div><div class="kh l"><p class="bd b gc z el ke eo ep kf er et ek translated">medium.com/@hemantjuyal</p></div></div><div class="ki l"><div class="kj l kk kl km ki kn ko jz"/></div></div></a></div><div class="jw jx fm fo jy jz"><a rel="noopener follow" target="_blank" href="/@hemantjuyal/publish-and-verify-your-smart-contract-for-its-authenticity-on-etherscan-758cf8304793"><div class="ka ab ej"><div class="kb ab kc cl cj kd"><h2 class="bd hu fv z el ke eo ep kf er et hs dt translated">在Etherscan上发布并验证您的智能合同的真实性</h2><div class="kg l"><h3 class="bd b fv z el ke eo ep kf er et ek translated">我们将学习如何在Etherscan上验证我们部署的solidity智能合同的真实性。</h3></div><div class="kh l"><p class="bd b gc z el ke eo ep kf er et ek translated">medium.com/@hemantjuyal</p></div></div><div class="ki l"><div class="np l kk kl km ki kn ko jz"/></div></div></a></div></div><div class="ab cl iq ir hb is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hm hn ho hp hq"><blockquote class="nq"><p id="1a02" class="nr ns ht bd nt nu nv nw nx ny nz ju ek translated">加入Coinmonks <a class="ae jv" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jv" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="fca6" class="le lf ht bd lg lh li lj lk ll lm ln lo lp oa lr ls lt ob lv lw lx oc lz ma mb dt translated">另外，阅读</h1><ul class=""><li id="ab8e" class="od oe ht iz b ja mc je md ji of jm og jq oh ju oi oj ok ol dt translated"><a class="ae jv" href="https://coincodecap.com/buy-bitcoin-anonymously" rel="noopener ugc nofollow" target="_blank">如何匿名购买比特币</a> | <a class="ae jv" href="https://coincodecap.com/bitcoin-cash-wallets" rel="noopener ugc nofollow" target="_blank">比特币现金钱包</a></li><li id="db33" class="od oe ht iz b ja om je on ji oo jm op jq oq ju oi oj ok ol dt translated"><a class="ae jv" href="https://coincodecap.com/binance-vs-ftx" rel="noopener ugc nofollow" target="_blank">币安vs FTX </a> | <a class="ae jv" href="https://coincodecap.com/solana-wallets" rel="noopener ugc nofollow" target="_blank">最佳(SOL)索拉纳钱包</a></li><li id="406e" class="od oe ht iz b ja om je on ji oo jm op jq oq ju oi oj ok ol dt translated"><a class="ae jv" href="https://coincodecap.com/binomo-review" rel="noopener ugc nofollow" target="_blank">比诺莫评论</a> | <a class="ae jv" href="https://coincodecap.com/stoic-vs-3commas-vs-tradesanta" rel="noopener ugc nofollow" target="_blank">斯多葛派vs 3Commas vs TradeSanta </a></li><li id="6955" class="od oe ht iz b ja om je on ji oo jm op jq oq ju oi oj ok ol dt translated"><a class="ae jv" href="https://coincodecap.com/capital-com-review" rel="noopener ugc nofollow" target="_blank">Capital.com评论</a> | <a class="ae jv" href="https://coincodecap.com/crypto-lending-hong-kong" rel="noopener ugc nofollow" target="_blank">香港的加密借贷平台</a></li><li id="775c" class="od oe ht iz b ja om je on ji oo jm op jq oq ju oi oj ok ol dt translated">如何在Uniswap上交换加密？ | <a class="ae jv" href="https://coincodecap.com/a-ads-review" rel="noopener ugc nofollow" target="_blank"> A-Ads审查</a></li></ul></div></div>    
</body>
</html>