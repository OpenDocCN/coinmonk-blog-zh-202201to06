<html>
<head>
<title>Build, Deploy and Interact with a Simple Web3 Smart Contract using a Web2 design thinking.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Web2设计思想构建、部署简单的Web3智能合约并与之交互。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/building-deploy-and-interact-with-a-simple-web3-smart-contract-using-a-web2-design-thinking-9638a8cda9e3?source=collection_archive---------0-----------------------#2022-01-14">https://medium.com/coinmonks/building-deploy-and-interact-with-a-simple-web3-smart-contract-using-a-web2-design-thinking-9638a8cda9e3?source=collection_archive---------0-----------------------#2022-01-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div class="fe ff iq"><img src="../Images/a8512fba0dcb5c1c2aa4da48a266dfb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*rJVSCaT5rALq4n1CpGUudw.jpeg"/></div></figure><h1 id="7a42" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">介绍</h1><p id="009e" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">网络3。分散式应用。智能合同。这些术语你可能听说过。好吧，如果你没有，那么你真的需要做一些挖掘，然后继续本教程。你可以从这篇中等文章开始<a class="ae kt" href="https://woonkly.medium.com/what-are-dapps-and-how-can-they-improve-services-e99046ff5cb" rel="noopener">。但是，如果你想直接把脚伸进水里，欢迎你！</a></p><p id="c412" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">在本教程中，我们将构建一个简单的书店Solidity智能契约，它等同于构建web 2应用程序的后端部分。</p><blockquote class="kz"><p id="0f84" class="la lb ht bd lc ld le lf lg lh li ks ek translated">一个简单的书店Solidity智能合同，用户可以将书籍添加到商店[一个列表]中，并获得商店中的书籍列表。</p></blockquote><p id="8603" class="pw-post-body-paragraph jv jw ht jx b jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ln kq kr ks hm dt translated">帮助我们理解智能合约的组成部分。正在编译。在部署it的同时，使用一些业内最好的工具。</p><p id="c542" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">这里是GitHub 上代码的<a class="ae kt" href="https://github.com/mrsimi/hardhat_intro" rel="noopener ugc nofollow" target="_blank">链接。</a></p><h2 id="d7de" class="lo iy ht bd iz lp lq lr jd ls lt lu jh kg lv lw jl kk lx ly jp ko lz ma jt mb dt translated">先决条件:</h2><ul class=""><li id="79bd" class="mc md ht jx b jy jz kc kd kg me kk mf ko mg ks mh mi mj mk dt translated">熟悉Web2开发(后端、API知识或其交互、如何构建Web2应用)</li><li id="a2d0" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">熟悉区块链、智能合约、Web3和以太坊的概念。</li><li id="19a3" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">熟悉JavaScript或Solidity。</li><li id="b040" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">安装了节点的Visual Studio代码，版本12.0或更高。</li></ul><h1 id="e49a" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">项目设计</h1><blockquote class="kz"><p id="279d" class="la lb ht bd lc ld le lf lg lh li ks ek translated">成长意味着改变，而改变包含风险，从已知走向未知。(乔治·希恩)</p></blockquote><h2 id="5739" class="lo iy ht bd iz lp mq lr jd ls mr lu jh kg ms lw jl kk mt ly jp ko mu ma jt mb dt translated">我们知道些什么？</h2><p id="9907" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">如果您通过了先决条件中列出的所有标准，那么您已经了解了Web2开发。但是重复一下，在web2中，我们主要处理前端和后端。</p><p id="2b37" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">后端是容纳我们的主要逻辑，并对数据库、文件托管平台、支付平台等进行修补的地方。然后后端将其公开为一个<strong class="jx hu">应用程序编程接口(API)。</strong></p><p id="f4a0" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">前端是web2架构的第二部分。它(前端)获取API，构建应用程序的面向web部分，即你看到的漂亮的Airbnb网站。这就是你谈论HTML，CSS和JavaScript的地方。</p><h2 id="f30c" class="lo iy ht bd iz lp lq lr jd ls lt lu jh kg lv lw jl kk lx ly jp ko lz ma jt mb dt translated"><strong class="ak">未知。</strong></h2><p id="2fac" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">构建Web3应用是未知的。但是如果我们从Web2的角度来考虑这个问题会怎么样呢？事实证明我们可以。</p><p id="9282" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">所以同样的，我们将Web2的架构分为前端和后端。为了传递知识，我们可以将Web3应用程序分成智能合同(后端)和Web3客户端(前端)。</p><p id="dc27" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">现在在这种情况下，后端[智能合约]正在向前端公开<strong class="jx hu">应用程序二进制接口(ABI) </strong>。</p><p id="8fac" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">智能合约位于区块链上，是我们应用程序的Web3动力库，而前端可以是任何客户端，从移动应用程序到浏览器，再到区块链钱包。</p><blockquote class="kz"><p id="a0b1" class="la lb ht bd lc ld le lf lg lh li ks ek translated">在web2中，我们认为后端(对于我们的逻辑)和前端都使用API进行通信。对于Web3，我们认为智能合约(作为我们的后端，容纳我们的逻辑)和Web3客户端是我们的前端。</p></blockquote><figure class="mw mx my mz na iu fe ff paragraph-image"><div class="fe ff mv"><img src="../Images/ca0d43e7c98fb077895147beb4bca230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*MVHLecXhoseOHbigPVbLVQ.png"/></div><figcaption class="nb nc fg fe ff nd ne bd b be z ek">Web2 vs Web3</figcaption></figure><p id="7a83" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">因此，我们构建简单智能契约的项目就像构建Web2应用程序的后端。</p><h2 id="5403" class="lo iy ht bd iz lp lq lr jd ls lt lu jh kg lv lw jl kk lx ly jp ko lz ma jt mb dt translated">设计。</h2><p id="74c7" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">因为我们的智能合同能够做两件事:</p><ul class=""><li id="1e4a" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks mh mi mj mk dt translated">向书店列表中添加一本书</li><li id="2ef2" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">把书店里所有的书都拿来</li></ul><p id="85c0" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">写完我们的智能合同后。我们部署到一个本地以太网，并使用web3控制台客户端消费它。</p><figure class="nj nk nl nm fq iu fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/c5f29a33a9ea2104ebca0d440a56b5a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*82t-dkHBNOsBPjeg1xkZYw.png"/></div><figcaption class="nb nc fg fe ff nd ne bd b be z ek">APP PARTS</figcaption></figure><h2 id="c46a" class="lo iy ht bd iz lp lq lr jd ls lt lu jh kg lv lw jl kk lx ly jp ko lz ma jt mb dt translated">工具</h2><p id="01ee" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">要编写智能合约，我们必须用我们所构建的区块链能够理解的编程语言来编写。所以聪明的合同语言必须是它下面的区块链人的语言。对于我们的情况，我们正在以太坊区块链上构建，它理解Solidity和Vyper(在您阅读本文时可能有更多选项)。</p><p id="8b60" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">但是为了这个教程，我们将使用坚固性。结帐这里的编程语言语法</strong><a class="ae kt" href="https://docs.soliditylang.org/en/latest/" rel="noopener ugc nofollow" target="_blank"><strong class="jx hu"/></a>。</p><p id="72a6" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">我们将使用的开发框架是<strong class="jx hu"> hardhat </strong>框架。把框架想象成一个拥有所有工具和一切(调试工具、错误处理、插件集成等)的工作室。)您智能合约开发所需的。</p><p id="d8cb" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">总之，我们的:</p><ul class=""><li id="5538" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks mh mi mj mk dt translated">编程语言:可靠性(有JavaScript或OOP语言背景会有帮助)。</li><li id="21f9" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">开发环境:Hardhat(其他包括Remix和Truffle)。</li></ul><p id="59f4" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">接下来，我们设置我们的开发环境。</p><h1 id="de34" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">设置</h1><h2 id="698a" class="lo iy ht bd iz lp lq lr jd ls lt lu jh kg lv lw jl kk lx ly jp ko lz ma jt mb dt translated">使用hardhat框架设置项目</h2><p id="71b0" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated"><strong class="jx hu"> 1 —初始化您的项目并安装hardhat </strong></p><p id="4611" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">为您的项目创建一个新文件夹，并在该目录下打开您的终端。然后运行:</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="c448" class="lo iy ht no b fv ns nt l nu nv">npm init --yes<br/>npm install --save-dev hardhat</span></pre><p id="d6ba" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">这将创建package.json文件和node_modules</p><p id="f132" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu"> 2 —创建您的hardhat配置并安装其他必要的库</strong></p><p id="17b5" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">还在你终端的同一个目录里。奔跑</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="4480" class="lo iy ht no b fv ns nt l nu nv">npx hardhat</span></pre><p id="cd67" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">你会被问到一个问题:<strong class="jx hu">你想做什么？</strong></p><p id="b31b" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">选择<strong class="jx hu">创建一个空的hardhat.config.js </strong>选项，因为我们计划从零开始做一些东西，这不是很酷吗？</p><p id="879f" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">最后，让我们安装一些插件，以帮助我们与我们的合同互动。运行:</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="4271" class="lo iy ht no b fv ns nt l nu nv">npm install --save-dev @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai</span></pre><p id="013d" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu"> 3 —更新hardhat.config.js </strong></p><p id="45ea" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">最后，对于我们的设置，让我们更新hardhat.config.js，为我们安装的库提供指导。从hardhat文档中，我们只需要在配置文件的顶部添加这一行:</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="ed32" class="lo iy ht no b fv ns nt l nu nv">require("@nomiclabs/hardhat-waffle");</span></pre><p id="4e7c" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">所以我们的配置文件现在应该看起来像这样</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="5039" class="lo iy ht no b fv ns nt l nu nv">require("@nomiclabs/hardhat-waffle");</span><span id="9799" class="lo iy ht no b fv nw nt l nu nv">/**</span><span id="b561" class="lo iy ht no b fv nw nt l nu nv">* @type import('hardhat/config').HardhatUserConfig</span><span id="ae99" class="lo iy ht no b fv nw nt l nu nv">*/</span><span id="f8a4" class="lo iy ht no b fv nw nt l nu nv">module.exports = {</span><span id="9941" class="lo iy ht no b fv nw nt l nu nv">solidity: "0.7.3",</span><span id="e198" class="lo iy ht no b fv nw nt l nu nv">};</span></pre><h1 id="e3ea" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">发展</h1><p id="d3ee" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated"><strong class="jx hu">步骤1文件夹设置</strong></p><ol class=""><li id="aebb" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks nx mi mj mk dt translated">在Vs代码中打开你的项目(这里你可以安装一些solidity扩展(不需要))。</li><li id="6638" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks nx mi mj mk dt translated">创建一个名为<strong class="jx hu"> contracts </strong>的文件夹:这是您所有合同的存放位置</li><li id="e563" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks nx mi mj mk dt translated">在contracts文件夹下创建一个文件(使用任何名称，我的名称是BookStore.sol):这是我们将要编写智能合同代码的地方。</li></ol><p id="3d12" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">步骤2编写智能合约代码</strong></p><p id="8ede" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">把智能契约(从现在开始的契约)想象成OOP中的类。类有属性、方法、字段等。</p><p id="2c7d" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">因此，我们的合同有:</p><ul class=""><li id="0a80" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks mh mi mj mk dt translated">保存图书详细信息(标题和年份)的属性。我们将在solidity中使用Struct。结构可以保存许多不同的数据类型。</li><li id="471d" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">另一个属性是一组书籍。结构数组</li><li id="1348" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">两个方法:AddBook()接受一个图书类型，将其添加到数组中并返回图书，GetBooks()返回数组中所有图书的列表。</li></ul><p id="1b72" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">这是代码:</p><figure class="nj nk nl nm fq iu"><div class="bz el l di"><div class="ny nz l"/></div></figure><p id="01af" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">你应该检查合同页面的坚固性<a class="ae kt" href="https://docs.soliditylang.org/en/latest/structure-of-a-contract.html" rel="noopener ugc nofollow" target="_blank">结构来理解顶层(第1 -3行)。虽然基本上在第2行，我们只是告诉哪个版本的可靠性工作，在这种情况下，任何版本等于或大于7都可以。</a></p><p id="af79" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">第3行是我们告诉solidity使用实验特性，因为我们在第19行接受一个Struct作为参数。删除第3行并查看错误(奇怪的错误)。</p><p id="b509" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">第1行是关于许可的，solidity文档的这一部分可以解释这一点</p><blockquote class="oa ob oc"><p id="25ed" class="jv jw od jx b jy ku ka kb kc kv ke kf oe kw ki kj of kx km kn og ky kq kr ks hm dt translated">如果智能合约的源代码可用，则可以更好地建立对智能合约的信任。因为提供源代码总是会涉及到版权方面的法律问题，所以Solidity编译器鼓励使用机器可读的SPDX许可证标识符。每个源文件都应该以注释开头，说明其许可证:</p></blockquote><p id="db21" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">如果你在这里，到目前为止，你明白所做的一切。您已经成功地编写了一份智能合同。耶！</p><p id="4024" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">我们来编译一下。</p><p id="b9b3" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">第3步:编制我们的合同。</strong></p><p id="6d52" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">转到您的终端，运行这行代码</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="cfda" class="lo iy ht no b fv ns nt l nu nv">npx hardhat compile</span></pre><p id="f7b7" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">如果一切按计划进行，您的终端中应该会有这样的消息。</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="0e64" class="lo iy ht no b fv ns nt l nu nv">Compiling 2 files with 0.7.3<br/>Compilation finished successfully</span></pre><p id="bb39" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">也检查你的文件夹，有些东西应该已经改变了。是的，添加了<strong class="jx hu">工件</strong>和<strong class="jx hu">缓存</strong>文件夹。</p><p id="3617" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">工件文件夹是你编译实体代码的地方。检查工件文件夹中的合同文件夹(工件&gt;合同)。您应该看到两个带有您的合同名称的json文件。在我们的例子中，如果你使用了BookStore.sol，你将会得到<strong class="jx hu"> BookStore.dbg.json </strong>和<strong class="jx hu"> BookStore.json. </strong></p><ul class=""><li id="03d7" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks mh mi mj mk dt translated">书店. json是你的ABI。记得吗？我们在开头提到的应用程序二进制接口。</li><li id="7f9a" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated">第二个文件BookStore.dbg.json用于调试。你知道我们为什么要使用像hardhat这样的框架，我们在开始时也提到过。</li></ul><p id="564c" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">通读ABI [BookStore.json]，感受一下它的样子。查看Solidity文档，深入了解ABI。这是客户在您部署合同后希望从您那里得到的。</p><blockquote class="kz"><p id="6d93" class="la lb ht bd lc ld le lf lg lh li ks ek translated">您的ABI是在您将智能合约部署到区块链网络(如以太坊)后，Web3客户端希望从您那里获得的。</p></blockquote><h1 id="5378" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji oh jk jl jm oi jo jp jq oj js jt ju dt translated">部署</h1><p id="8377" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">接下来，我们将部署智能合同。</p><p id="b570" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">hardhat框架为我们提供了多种选择，从部署到本地以太网、测试网到实时部署。所有这些的区别在于证书，这些证书在hardhat文档中是不言自明的。</p><p id="feab" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">为了我们的教程，我们将部署到一个由hardhat提供的本地网络。</p><p id="fdbb" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">步骤— 1创建文件夹，添加部署文件</strong></p><ol class=""><li id="a263" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks nx mi mj mk dt translated">首先，创建一个名为<strong class="jx hu"> scripts: </strong>的文件夹，这是我们的部署脚本所在的位置——我们稍后会指向它。</li><li id="5e3e" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks nx mi mj mk dt translated">将deploy.js文件添加到scripts文件夹:这是我们的部署代码所在的位置。</li></ol><p id="f7e5" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">步骤2添加部署代码</strong></p><p id="0807" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">对于部署，我们需要一个以太坊帐户，其中有以太，因为部署成本以太。在我们的例子中，我们已经从ether . js[我们之前安装的库]中测试了以太坊帐户。如果我们要使用一个测试网络或一个真实的帐户，我们必须在部署代码中连接我们的以太坊帐户。</p><p id="c91e" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">然后，我们获得合同并将其部署到网络中。</p><p id="14af" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">在部署时，我们获得了我们在网络上部署的合同的地址。</p><figure class="nj nk nl nm fq iu"><div class="bz el l di"><div class="ny nz l"/></div></figure><p id="41de" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">步骤3部署到本地网络。</strong></p><ol class=""><li id="4557" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks nx mi mj mk dt translated">在同一个目录中打开一个新的终端，运行下面的代码来启动本地hardhat节点并保持其打开状态:</li></ol><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="c763" class="lo iy ht no b fv ns nt l nu nv">npx hardhat node</span></pre><p id="e693" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">2.在同一目录中打开另一个终端。这是我们运行其他部署命令的地方。</p><p id="2149" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu"> <em class="od">请记住保持[1]中的节点打开，因为这将保持由hardhat提供给我们的本地以太坊节点打开，同时请记住，此节点不管理状态，即每次运行本地节点时，您都必须重新部署您的合同并重新与之交互。</em>T11】</strong></p><p id="7441" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">在您的新终端中运行下面的代码，以部署在本地主机网络上(请记下[1]中的终端，以查看代码是否已更新到本地以太坊区块链)</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="9bd0" class="lo iy ht no b fv ns nt l nu nv">npx hardhat run --network localhost scripts/deploy.js</span></pre><p id="092f" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">你的回答应该是这样的:</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="b19b" class="lo iy ht no b fv ns nt l nu nv">Deploying contracts with the account:  0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266<br/>Account balance:  10000000000000000000000<br/>BookStore address:  0x5FbDB2315678afecb367f032d93F642f64180aa3</span></pre><p id="1150" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">回想一下书店地址，因为我们将使用它与部署的智能契约进行交互。</p><p id="5a4a" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">保持这两个终端打开，然后我们进入与智能合约交互的最后步骤。</strong></p><h1 id="f167" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">与我们的智能合同互动</h1><p id="b6ef" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">此时，我们将使用命令行来消费我们的智能契约。在以后的教程中，我们将使用其他客户端，如web应用程序、移动应用程序，您可以在我的空间上保持关注。</p><p id="3a41" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">我假设从<strong class="jx hu">部署到本地网络</strong>部分的两个终端仍然是活动的。</p><p id="82fc" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">步骤1设置智能合同交互环境。</strong></p><ol class=""><li id="5027" class="mc md ht jx b jy ku kc kv kg nf kk ng ko nh ks nx mi mj mk dt translated">通过运行以下代码连接到本地主机网络:</li></ol><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="1195" class="lo iy ht no b fv ns nt l nu nv">npx hardhat console --network localhost</span></pre><p id="6735" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">我们签订合同的网络。<strong class="jx hu"> localhost </strong>是我们给网络起的名字。去检查<strong class="jx hu">部署到本地网络</strong>部分以确认。</p><p id="0deb" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">您现在应该有一个交互式终端。</p><p id="429b" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">2.通过运行以下代码连接到协定:</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="41e3" class="lo iy ht no b fv ns nt l nu nv">const BookStore = await ethers.getContractFactory("BookStore")</span></pre><p id="52c1" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">书店明明是我们合同的名字，说你用了别的名字，那就用那个。它返回一个未定义的。</p><p id="5b61" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">3.将智能合同地址附加到合同。回忆部署到本地网络中的地址，步骤2。在我们的例子中，地址是<strong class="jx hu">0x 5 fbdb 2315678 afec b 367 f 032d 93 f 642 f 64180 aa 3。</strong></p><p id="b5c4" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">运行下面的代码来完成任务</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="dc85" class="lo iy ht no b fv ns nt l nu nv">const bookStore = await BookStore.attach("0x5FbDB2315678afecb367f032d93F642f64180aa3")</span></pre><p id="fefa" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">步骤2调用智能合约函数</strong></p><p id="51ab" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">我们必须在智能合同中发挥作用。AddBook()和GetBooks()。目前我们没有书籍，AddBooks()方法接受Book类型的结构参数。所以我们会这么做。</p><p id="04ce" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">让我们补充一下。在终端中运行下面的代码</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="37ad" class="lo iy ht no b fv ns nt l nu nv">var newBook = {title: 'Becoming', year: 2009}</span></pre><p id="f277" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">然后</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="3e47" class="lo iy ht no b fv ns nt l nu nv">(await bookStore.addBook(newBook)).toString()</span></pre><p id="8852" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">最后，让我们通过跑步拿到所有的书</p><pre class="nj nk nl nm fq nn no np nq aw nr dt"><span id="8ec7" class="lo iy ht no b fv ns nt l nu nv">await bookStore.getBooks()</span></pre><p id="7b28" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">这将显示您添加的图书。瞧啊。！！！</p><p id="1ace" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">只要您的两个终端在运行，您就可以继续向智能合同添加图书并获取图书列表。</p><p id="fda9" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><em class="od"> PS:如果关闭了你的hardhat节点，就得重启会话；部署和互动会议。</em></p><p id="e2a5" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><a class="ae kt" href="https://github.com/mrsimi/hardhat_intro.git" rel="noopener ugc nofollow" target="_blank">这里是GitHub上代码的链接</a></p><h1 id="cc1f" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">进步和补充</h1><p id="b17e" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">我们有一个很好的起点，这里有一些你可以进一步了解的东西。</p><p id="3499" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">CRUD的剩余UD: </strong>目前为止我们可以创建和读取(CR或CRUD)。您可以继续实现[书店中图书的更新和删除]的UD。</p><p id="e5c0" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated"><strong class="jx hu">获取单本书</strong>:另一个可以探索的功能是如何获取单本书。这可能很棘手，因为solidity数组数据类型不像大多数OOP那样丰富，所以也许有库可以使用，或者你可以写一个。</p><p id="3653" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">编写一个简单的HTML/CSS和普通的JavaScript客户端(不使用JS框架):这是另一个问题，你可以把这个项目做得更深入一些。UI比主机好玩。</p><h1 id="fc5f" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">结论</h1><p id="cdb4" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">在本教程中，我们已经能够从web2的角度理解智能合约。创建一个简单的智能合约，我们可以在其中添加和获取记录，将它部署到本地网络，并使用web3客户端与之交互。</p><p id="7742" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">因此，我们掌握了基础知识，可以单独解决每个问题——编写智能合同、部署和消费。希望你能在你的web3项目中运用这些经验和想法。</p><p id="966d" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">和往常一样，我希望这是一个有见地的阅读。</p><p id="a89f" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">再一次，<a class="ae kt" href="https://github.com/mrsimi/hardhat_intro.git" rel="noopener ugc nofollow" target="_blank">这里是GitHub上代码的链接</a></p><blockquote class="kz"><p id="6512" class="la lb ht bd lc ld le lf lg lh li ks ek translated">加入Coinmonks <a class="ae kt" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kt" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="d197" class="lo iy ht bd iz lp mq lr jd ls mr lu jh kg ms lw jl kk mt ly jp ko mu ma jt mb dt translated">另外，阅读</h2><ul class=""><li id="c272" class="mc md ht jx b jy jz kc kd kg me kk mf ko mg ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/use-bitmex-in-usa" rel="noopener ugc nofollow" target="_blank">在美国如何使用BitMEX？</a> | <a class="ae kt" href="https://blog.coincodecap.com/bitmex-review" rel="noopener ugc nofollow" target="_blank"> BitMEX评论</a></li><li id="9bb8" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/futures-trading-signals" rel="noopener ugc nofollow" target="_blank">最佳期货交易信号</a> | <a class="ae kt" href="https://blog.coincodecap.com/liquid-exchange-review" rel="noopener ugc nofollow" target="_blank">流动性交易所评论</a></li><li id="28c4" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/crypto-exchanges-in-south-africa" rel="noopener ugc nofollow" target="_blank">南非的加密交易所</a> | <a class="ae kt" href="https://blog.coincodecap.com/bitmex-crypto-signals" rel="noopener ugc nofollow" target="_blank"> BitMEX加密信号</a></li><li id="4c4b" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/moonxbt-copy-trading" rel="noopener ugc nofollow" target="_blank"> MoonXBT副本交易</a> | <a class="ae kt" href="https://blog.coincodecap.com/crypto-wallets-in-uae" rel="noopener ugc nofollow" target="_blank">阿联酋</a>的加密钱包</li><li id="5380" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/remitano-review" rel="noopener ugc nofollow" target="_blank">雷米塔诺评论</a>|<a class="ae kt" href="https://blog.coincodecap.com/1inch" rel="noopener ugc nofollow" target="_blank">1英寸协议指南</a> | <a class="ae kt" href="https://blog.coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">购买Floki </a></li><li id="6fd4" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/best-social-trading-platforms" rel="noopener ugc nofollow" target="_blank"> 5大最佳社交交易平台</a> | <a class="ae kt" href="https://blog.coincodecap.com/wazirx-nft-india" rel="noopener ugc nofollow" target="_blank">瓦济克斯NFT印度</a></li><li id="dcb0" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/best-crypto-books" rel="noopener ugc nofollow" target="_blank"> 10本关于加密的最佳书籍</a> | <a class="ae kt" href="https://blog.coincodecap.com/uk-trading-bots" rel="noopener ugc nofollow" target="_blank">英国5个最佳加密机器人</a></li><li id="a235" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/koinly-review" rel="noopener ugc nofollow" target="_blank"> Koinly回顾</a> | <a class="ae kt" href="https://blog.coincodecap.com/binaryx-review" rel="noopener ugc nofollow" target="_blank"> Binaryx回顾</a> | <a class="ae kt" href="https://blog.coincodecap.com/hodlnaut-vs-cakedefi-vs-celsius" rel="noopener ugc nofollow" target="_blank"> Hodlnaut vs CakeDefi </a></li><li id="648c" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/bitsler-review" rel="noopener ugc nofollow" target="_blank">比斯勒评论</a>|<a class="ae kt" href="https://blog.coincodecap.com/wazirx-vs-coinswitch-vs-coindcx" rel="noopener ugc nofollow" target="_blank">WazirX vs coin switch vs coin dcx</a></li><li id="a304" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/earn-sign-up-bonus" rel="noopener ugc nofollow" target="_blank">赢取注册奖金——10大最佳加密平台</a></li><li id="5743" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" rel="noopener" href="/coinmonks/best-crypto-signals-telegram-5785cdbc4b2b">最佳加密交易信号电报</a> | <a class="ae kt" rel="noopener" href="/coinmonks/moonxbt-review-6e4ab26d037"> MoonXBT评论</a></li><li id="54ae" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" rel="noopener" href="/coinmonks/coinswitch-kuber-review-1a8dc5c7a739"> Coinswitch俱吠罗评论</a> | <a class="ae kt" href="https://blog.coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">电网交易机器人</a> | <a class="ae kt" rel="noopener" href="/coinmonks/coinbase-fees-831e77d4f2c5">比特币基地费用</a></li><li id="44b1" class="mc md ht jx b jy ml kc mm kg mn kk mo ko mp ks mh mi mj mk dt translated"><a class="ae kt" href="https://blog.coincodecap.com/bitget-review" rel="noopener ugc nofollow" target="_blank"> Bitget回顾</a>|<a class="ae kt" href="https://blog.coincodecap.com/gemini-vs-blockfi" rel="noopener ugc nofollow" target="_blank">Gemini vs block fi</a>|<a class="ae kt" href="https://blog.coincodecap.com/okex-futures-trading" rel="noopener ugc nofollow" target="_blank">OKEx期货交易</a></li></ul></div></div>    
</body>
</html>