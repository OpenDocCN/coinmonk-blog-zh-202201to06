<html>
<head>
<title>Mint an NFT in a decentralized manner — using Moralis &amp; Web3js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以分散的方式打造NFT——使用Moralis和Web3js</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/mint-an-nft-in-a-decentralized-manner-using-moralis-web3js-9e9c12abda05?source=collection_archive---------6-----------------------#2022-04-19">https://medium.com/coinmonks/mint-an-nft-in-a-decentralized-manner-using-moralis-web3js-9e9c12abda05?source=collection_archive---------6-----------------------#2022-04-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><h2 id="af2e" class="hr hs ht bd b gc hu hv hw hx hy hz ek ia translated" aria-label="kicker paragraph">NFT系列</h2><div class=""/><div class=""><h2 id="784c" class="pw-subtitle-paragraph iz ic ht bd b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ek translated">如何在moralis和web3js的帮助下以分散的方式铸造NFT的指南</h2></div><p id="af24" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">作为本教程的一部分，我们正试图在Polygon Mumbai Testnet上使用Moralis和Web3js创建一个NFT。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff ko"><img src="../Images/65d7b6a296276f39284df5bfd2abffc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*24b85KUffJ-9ziMX-uFGlw.png"/></div></div></figure><p id="44c8" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">铸造一个NFT就像把我们的数字资产放到区块链上，这样它们就可以在NFT市场上交易。</p><p id="0883" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">按照区块链的说法，NFT就像是元数据的交易。显然，铸造NFT就是在区块链执行交易的过程。</p><h2 id="631d" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated">道德</h2><p id="042f" class="pw-post-body-paragraph jr js ht jt b ju lu jd jw jx lv jg jz ka lw kc kd ke lx kg kh ki ly kk kl km hm dt translated">一个人可以通过许多方式向区块链提出要求。但是Moralis提供了连接到交叉链的最容易和最简单的方法。<a class="ae lz" href="https://docs.moralis.io/introduction/readme" rel="noopener ugc nofollow" target="_blank"> Moralis </a>是一个帮助我们快速构建跨链dapps的软件或中间件。使用moralis，我们可以在以太坊、多边形、Solana、BSC和Avalanche等任何区块链上构建和部署dapps。作为开发人员，我们不需要为每个区块链定制我们的dapp，因为moralis会做必要的工作。通过使用Moralis，创建NFT的整个过程可以变得尽可能简单。</p><p id="c5ab" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><strong class="jt id">T5【道德家账号和服务器设置】T6</strong></p><ol class=""><li id="2b38" class="ma mb ht jt b ju jv jx jy ka mc ke md ki me km mf mg mh mi dt translated">创建一个免费的道德账户:<a class="ae lz" href="https://admin.moralis.io/login" rel="noopener ugc nofollow" target="_blank">https://admin.moralis.io/login</a></li></ol><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/fc97d32e6083adae842555b4f8ee7fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*xVvFe_u7xlM061C2pmxX8A.png"/></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Moralis Sign Up or Sign In</figcaption></figure><p id="9c47" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">2.创建新的服务器取决于处理testnet或mainnet的要求。首先，在进入mainnet之前探索一下testnet。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/7493419ba88644213baf4cb41303eccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*GJRgjunmDp14nXQrfQhD1w.png"/></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Moralis Server</figcaption></figure><p id="56fe" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">3.通过给testnet服务器命名并选择要使用的地区和区块链，创建一个Moralis实例。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/58837ccd146b386cf8700382a5fa8dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*aXHL6_doBAuc_G_gSKwDBQ.png"/></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Moralis Instance</figcaption></figure><p id="93fe" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">4.复制服务器URL、应用程序ID和主密钥，因为我们需要这些服务器详细信息来连接Moralis。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/de3a80a121b7e80b687e2366a54c7c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*tMJkf8EplvEpYgkXk9VtQA.png"/></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Moralis Server Details</figcaption></figure><p id="622a" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><em class="kn">现在，我们的Moralis服务器启动了，接下来呢？—我们需要将Polygon Mumbai testnet添加到您的metamask帐户。</em></p><p id="f0fb" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">Moralis提供了快速节点来快速连接到相应的区块链。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff mo"><img src="../Images/4affaaf1ec4c6d4d179116551c0acc8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZ6aIM48BEpBmlUn9Y--Sg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Moralis Speedy Nodes Endpoints</figcaption></figure><p id="4a95" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">使用多边形孟买快速节点端点作为RPC URL。多边形孟买测试网的链ID是80001。您可以在<a class="ae lz" href="https://chainlist.org/" rel="noopener ugc nofollow" target="_blank">https://chainlist.org/</a>中验证链条ID。MATIC是多边形区块链中处理的令牌。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/6732e2242f12440fc2866d3ee75b3951.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*-Qm7JTYemNjq3f0LECwSzw.png"/></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Mumbai Testnet in Metamask</figcaption></figure><h2 id="696d" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated">Web3js</h2><p id="2edf" class="pw-post-body-paragraph jr js ht jt b ju lu jd jw jx lv jg jz ka lw kc kd ke lx kg kh ki ly kk kl km hm dt translated">Web3js是一个允许我们与以太坊区块链互动的库。</p><p id="d095" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">按如下方式安装web3:</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="1c90" class="la lb ht mr b fv mv mw l mx my">npm install web3</span></pre><p id="99c0" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><em class="kn">如何分散铸造NFT？—使用IPFS分散存储解决方案。向Moralis致敬，因为它为IPFS提供了本地支持，这样我们就不需要单独处理IPFS了。</em></p><h2 id="9c2b" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated">IPFS</h2><p id="e757" class="pw-post-body-paragraph jr js ht jt b ju lu jd jw jx lv jg jz ka lw kc kd ke lx kg kh ki ly kk kl km hm dt translated"><a class="ae lz" href="https://docs.ipfs.io/concepts/what-is-ipfs/" rel="noopener ugc nofollow" target="_blank"> IPFS </a>(星际文件系统)是一种类似torrent的点对点协议。<br/>它分散了整个文件托管过程。当我们上传一个文件到IPFS时，它会分布在每个节点上，成为一个服务器，这样就没有人能下载文件。我们在IPFS托管我们的NFT元数据。</p><p id="2547" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated"><em class="kn">现在让我们进入铸造NFT的过程。</em></p><h2 id="7281" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated">步骤1:在nodejs项目中安装Moralis包</h2><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="dae6" class="la lb ht mr b fv mv mw l mx my">npm install moralis/node</span></pre><h2 id="695f" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated">步骤2:初始化您的Moralis服务器</h2><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="e55e" class="la lb ht mr b fv mv mw l mx my">require("dotenv").config();<br/>const express = require("express");<br/>const Moralis = require(“moralis/node”);<br/>const app = express();</span><span id="916d" class="la lb ht mr b fv mz mw l mx my">const {</span><span id="869c" class="la lb ht mr b fv mz mw l mx my">  PORT,</span><span id="25a2" class="la lb ht mr b fv mz mw l mx my">  MORALIS_SERVER_URL,</span><span id="cb1f" class="la lb ht mr b fv mz mw l mx my">  MORALIS_APP_ID,</span><span id="8c90" class="la lb ht mr b fv mz mw l mx my">  MORALIS_MASTER_KEY,</span><span id="febf" class="la lb ht mr b fv mz mw l mx my">} = process.env;</span><span id="d629" class="la lb ht mr b fv mz mw l mx my">app.listen(port, async () =&gt; {</span><span id="8190" class="la lb ht mr b fv mz mw l mx my">   await Moralis.start({</span><span id="53b6" class="la lb ht mr b fv mz mw l mx my">      serverUrl: MORALIS_SERVER_URL,</span><span id="274f" class="la lb ht mr b fv mz mw l mx my">      appId: MORALIS_APP_ID,</span><span id="42a0" class="la lb ht mr b fv mz mw l mx my">      masterKey: MORALIS_MASTER_KEY,</span><span id="a50e" class="la lb ht mr b fv mz mw l mx my">   });</span><span id="a1cc" class="la lb ht mr b fv mz mw l mx my">});</span></pre><h2 id="1829" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated">第三步:创建。环境文件</h2><p id="08d8" class="pw-post-body-paragraph jr js ht jt b ju lu jd jw jx lv jg jz ka lw kc kd ke lx kg kh ki ly kk kl km hm dt translated">你的。env文件应该如下所示:</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="4881" class="la lb ht mr b fv mv mw l mx my">MORALIS_SERVER_URL = "moralis server URL"</span><span id="6f7d" class="la lb ht mr b fv mz mw l mx my">MORALIS_APP_ID = "moralis app Id"</span><span id="3b98" class="la lb ht mr b fv mz mw l mx my">MORALIS_MASTER_KEY = "moralis master key"</span><span id="5af8" class="la lb ht mr b fv mz mw l mx my">PORT = "port"</span><span id="c2b1" class="la lb ht mr b fv mz mw l mx my">PRIVATE_KEY = "metamask private key"</span><span id="fee8" class="la lb ht mr b fv mz mw l mx my">PUBLIC_KEY = "your metamask wallet address"</span><span id="0dad" class="la lb ht mr b fv mz mw l mx my">CONTRACT_ADDRESS = "deployed contract address"</span><span id="a2b9" class="la lb ht mr b fv mz mw l mx my">POLYGON_MUMBAI_RPC_PROVIDER = "moralis Mumbai Speedy Node RPC URL"</span></pre><h2 id="eb22" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated">步骤2:创建您的nft.js文件</h2><p id="2f9e" class="pw-post-body-paragraph jr js ht jt b ju lu jd jw jx lv jg jz ka lw kc kd ke lx kg kh ki ly kk kl km hm dt translated">将以下内容复制到文件中。</p><pre class="kp kq kr ks fq mq mr ms mt aw mu dt"><span id="b01d" class="la lb ht mr b fv mv mw l mx my">require("dotenv").config();</span><span id="19fb" class="la lb ht mr b fv mz mw l mx my">const Web3 = require("web3");</span><span id="20d8" class="la lb ht mr b fv mz mw l mx my">const request = require("request-promise");</span><span id="17e0" class="la lb ht mr b fv mz mw l mx my">const fs = require("fs");</span><span id="5f43" class="la lb ht mr b fv mz mw l mx my">const contract = require("../artifacts/contracts/ArGram.sol/ArGram.json");</span><span id="c069" class="la lb ht mr b fv mz mw l mx my">const provider = new Web3.providers.HttpProvider(POLYGON_MUMBAI_RPC_PROVIDER);</span><span id="6c97" class="la lb ht mr b fv mz mw l mx my">const web3 = new Web3(provider);</span><span id="e5aa" class="la lb ht mr b fv mz mw l mx my">web3.eth.accounts.wallet.add(PRIVATE_KEY);</span><span id="d837" class="la lb ht mr b fv mz mw l mx my">const nftContract = new web3.eth.Contract(contract.abi, CONTRACT_ADDRESS);</span><span id="df9d" class="la lb ht mr b fv mz mw l mx my">fs.readFile(req.file.path, async (err, buffer) =&gt; {</span><span id="aa57" class="la lb ht mr b fv mz mw l mx my">    const image = buffer.toString("base64");<br/>    const contentType = req.file.mimetype;</span><span id="9459" class="la lb ht mr b fv mz mw l mx my">    //Upload image file to IPFS<br/>    const file = new Moralis.File("file", image, contentType);<br/>    await file.saveIPFS({ useMasterKey: true });<br/>    const fileIPFS = file.ipfs();</span><span id="1e2d" class="la lb ht mr b fv mz mw l mx my">    //Create JSON metadata<br/>    const metadata = {<br/>       name: "MyNFT",<br/>       description: "MyNFT Description",<br/>       image: fileIPFS,<br/>    };</span><span id="4018" class="la lb ht mr b fv mz mw l mx my">    //Upload JSON metadata to IPFS<br/>    const toBtoa = Buffer.from(JSON.stringify(metadata)).toString("base64");<br/>    const json = new Moralis.File(`MyNFT-meta.json`, { base64: toBtoa });<br/>    await json.saveIPFS({ useMasterKey: true });<br/>    const tokenURI = json.ipfs();</span><span id="2376" class="la lb ht mr b fv mz mw l mx my">    //Mint NFT<br/>    const nonce = await web3.eth.getTransactionCount(PUBLIC_KEY, “latest”);<br/>    const transaction = {<br/>        from: PUBLIC_KEY,<br/>        to: CONTRACT_ADDRESS,<br/>        nonce: nonce,<br/>        gas: 500000,<br/>        data: nftContract.methods<br/>                     .mintNFT(PUBLIC_KEY, tokenURI)<br/>                     .encodeABI(),<br/>    };<br/>    const signPromise = await web3.eth.accounts.signTransaction(<br/>        transaction,<br/>        PRIVATE_KEY<br/>    );<br/>    const signedTransaction = await web3.eth.sendSignedTransaction(<br/>        signPromise[“rawTransaction”]<br/>    );<br/>    const hash = signedTransaction[“transactionHash”];<br/>    console.log('The transaction hash is:', hash);<br/>}</span></pre><p id="103d" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">您将得到一个事务哈希，如下所示:0x 9732 ca 53 CFB 6 b 8 e 29 e 13873 b 51407 f 431 BC 798 CBE 3 Abe 82 ea 110 c 0 e 5924506 c 8</p><p id="3935" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">你可以在mumbai <a class="ae lz" href="https://mumbai.polygonscan.com/" rel="noopener ugc nofollow" target="_blank"> polygonscan </a>上搜索这笔交易。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff na"><img src="../Images/99b0e742086d49409851f001a54dfb94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WW0DRUfWPQ-8pnhuqH2BCA.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Transaction on Mumbai Polygonscan</figcaption></figure><p id="2a1d" class="pw-post-body-paragraph jr js ht jt b ju jv jd jw jx jy jg jz ka kb kc kd ke kf kg kh ki kj kk kl km hm dt translated">太好了！您已经成功地铸造了您的第一个多边形孟买网络NFT。</p></div><div class="ab cl nb nc hb nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hm hn ho hp hq"><h2 id="03f0" class="la lb ht bd lc ld le lf lg lh li lj lk ka ll lm ln ke lo lp lq ki lr ls lt hz dt translated"><strong class="ak">造币快乐！</strong></h2><blockquote class="ni"><p id="e9c7" class="nj nk ht bd nl nm nn no np nq nr km ek translated">加入Coinmonks <a class="ae lz" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae lz" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="9b2d" class="ns lb ht bd lc nt nu nv lg nw nx ny lk ji nz jj ln jl oa jm lq jo ob jp lt oc dt translated">另外，阅读</h1><ul class=""><li id="7368" class="ma mb ht jt b ju lu jx lv ka od ke oe ki of km og mg mh mi dt translated"><a class="ae lz" href="https://coincodecap.com/ftx-futures-trading" rel="noopener ugc nofollow" target="_blank">如何在FTX交易所交易期货</a> | <a class="ae lz" href="https://coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li><li id="23a8" class="ma mb ht jt b ju oh jx oi ka oj ke ok ki ol km og mg mh mi dt translated"><a class="ae lz" href="https://coincodecap.com/coinloan-review" rel="noopener ugc nofollow" target="_blank"> CoinLoan评论</a> | <a class="ae lz" rel="noopener" href="/coinmonks/youhodler-4-easy-ways-to-make-money-98969b9689f2"> YouHodler评论</a> | <a class="ae lz" href="https://coincodecap.com/blockfi-review" rel="noopener ugc nofollow" target="_blank"> BlockFi评论</a></li><li id="4d80" class="ma mb ht jt b ju oh jx oi ka oj ke ok ki ol km og mg mh mi dt translated"><a class="ae lz" href="https://coincodecap.com/profittradingapp-for-binance" rel="noopener ugc nofollow" target="_blank">XT.COM评论</a>币安评论 | <a class="ae lz" href="https://coincodecap.com/xt-com-review" rel="noopener ugc nofollow" target="_blank"/></li><li id="4776" class="ma mb ht jt b ju oh jx oi ka oj ke ok ki ol km og mg mh mi dt translated"><a class="ae lz" href="https://coincodecap.com/smithbot-review" rel="noopener ugc nofollow" target="_blank"> SmithBot评论</a> | <a class="ae lz" href="https://coincodecap.com/free-open-source-trading-bots" rel="noopener ugc nofollow" target="_blank"> 4款最佳免费开源交易机器人</a></li><li id="fc0e" class="ma mb ht jt b ju oh jx oi ka oj ke ok ki ol km og mg mh mi dt translated"><a class="ae lz" rel="noopener" href="/coinmonks/coinbase-bots-ac6359e897f3">比特币基地僵尸程序</a> | <a class="ae lz" rel="noopener" href="/coinmonks/ascendex-review-53e829cf75fa"> AscendEX审查</a> | <a class="ae lz" rel="noopener" href="/coinmonks/okex-trading-bots-234920f61e60"> OKEx交易僵尸程序</a></li><li id="d94e" class="ma mb ht jt b ju oh jx oi ka oj ke ok ki ol km og mg mh mi dt translated"><a class="ae lz" rel="noopener" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94">如何在印度购买比特币？</a> | <a class="ae lz" rel="noopener" href="/coinmonks/wazirx-review-5c811b074f5b">瓦济克斯评论</a></li></ul></div></div>    
</body>
</html>