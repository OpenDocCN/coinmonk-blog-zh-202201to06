<html>
<head>
<title>Creating a private blockchain using Hyperledger Besu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Hyperledger Besu创建私人区块链</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/creating-a-private-blockchain-using-hyperledger-besu-96c7f281bab4?source=collection_archive---------3-----------------------#2022-03-02">https://medium.com/coinmonks/creating-a-private-blockchain-using-hyperledger-besu-96c7f281bab4?source=collection_archive---------3-----------------------#2022-03-02</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="9058" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">IBFT 2.0权威证明共识机制</h2></div><p id="2d7b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt ke translated"><span class="l kf kg kh bm ki kj kk kl km di"> T </span>区块链技术的快速进步没有放缓的迹象。它一个接一个地解决了现有数字生态系统的许多问题。区块链技术的主要特征是去中心化。组织可以利用这一特性，使其整个运营或服务系统成为一个更加可靠、分布式和自动化的环境。因此，将目前的集中机制转变为更加分散的机制，从而利用区块链技术的许多功能，同时保持对系统的适当控制，这就是我们今天正在建设的。</p></div><div class="ab cl kn ko hb kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hm hn ho hp hq"><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff ku"><img src="../Images/163d2b4bfc9e1ecfbf7ee028ae1edd46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pBexWTjNN6sRN9sok4uwAA.jpeg"/></div></div></figure><p id="e079" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们正在使用Hyperledger Besu创建区块链。</p><blockquote class="lg lh li"><p id="4e7e" class="ji jj lj jk b jl jm iu jn jo jp ix jq lk js jt ju ll jw jx jy lm ka kb kc kd hm dt translated"><a class="ae ln" href="https://www.hyperledger.org/use/besu" rel="noopener ugc nofollow" target="_blank"><em class="ht">Hyperledger Besu</em></a><em class="ht"/>是一款以太坊客户端，旨在为公共和私有许可的网络用例提供企业友好型服务。它也可以在Rinkeby、Ropsten和gorli等测试网络上运行。Hyperledger Besu包括多个共识算法，包括PoW和PoA (IBFT、IBFT 2.0、以太哈希和Clique)。它的综合许可方案是专门为在财团环境中使用而设计的。</p></blockquote><p id="625e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们正在创建一个具有4个节点的专用区块链(因为IBFT要求至少4个节点才能运行)。在这4个节点中，一个是启动节点，其他的是验证节点。为了简单起见，我们将从docker image运行besu。我们也可以使用源代码。在这种情况下，从<a class="ae ln" href="https://github.com/hyperledger/besu" rel="noopener ugc nofollow" target="_blank"><em class="lj">repo</em></a><em class="lj"/>中克隆源代码，并将<code class="eh lo lp lq lr b">/bin/besu</code>添加到路径中。</p><p id="6b81" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">首先，我们设置目录，如下所示:</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/dcaa6e1d56997187fbb93c0c77b07bbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:364/format:webp/1*4DM9Lkfc1BHYlsXklQgVAA.png"/></div></figure><p id="ed82" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">区块链的第一个街区叫做创世街区。因此，我们需要创建一个起源文件，并从那里我们将启动我们的网络。我们可以使用besu从配置文件中生成一个genesis文件。在<code class="eh lo lp lq lr b">IBFT-Network/</code>中创建一个名为<code class="eh lo lp lq lr b">ibftConfigFile.json</code>的文件，并添加以下代码:</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lt"><img src="../Images/7de49e17045aa0808928941a4e25cb41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7-kUMtzpFIGtizZL7xiBIw.png"/></div></div></figure><p id="8c79" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><code class="eh lo lp lq lr b">chainId</code>可以根据你的喜好。请创建一个您尚未在任何钱包中使用的chainId。因为如果你已经将你的钱包连接到一个有相同链id的网络，并且在其中进行了一些交易，那么你将在这个网络中得到不正确的nonce。这将导致问题和交易将不会得到确认。<code class="eh lo lp lq lr b">gasLimit</code>设置为较高的值，因为这将是一个自由气体网络。在<code class="eh lo lp lq lr b">alloc</code>中，你可以指定一些账户或智能合约(预先部署)，初始数量的原生硬币将被分配到这些账户或智能合约(基本上是ETH，因为我们是从以太坊分出来的，但你可以把它视为你自己的硬币，可以用不同的名字来称呼)。</p><p id="5b2b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">现在，如果您从源代码运行中使用besu:</p><pre class="kv kw kx ky fq lu lr lv lw aw lx dt"><span id="01a8" class="ly lz ht lr b fv ma mb l mc md">besu operator generate-blockchain-config --config-file=ibftConfigFile.json --to=networkFiles --private-key-file-name=key</span></pre><p id="8f41" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果你使用的是Besu的docker镜像，创建一个包含以下内容的<code class="eh lo lp lq lr b">docker-compose.yaml</code>文件，然后运行<code class="eh lo lp lq lr b">docker-compose up</code>。</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lt"><img src="../Images/b641eb7d9ddbecee54b16125158b2ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rvd_MAN0Qpov7922AiEldw.png"/></div></div></figure><p id="01f4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这将生成一个名为<code class="eh lo lp lq lr b">networkFiles</code>的文件夹。里面会有一个genesis文件和另一个名为<code class="eh lo lp lq lr b">keys</code>的目录，里面有4个目录。在所有这些目录中，将有两个文件<code class="eh lo lp lq lr b">key</code>和<code class="eh lo lp lq lr b">key.pub</code>。这些是我们4个节点的密钥对。</p><p id="6ed6" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">从<code class="eh lo lp lq lr b">networkFiles</code>将源文件复制到所有节点目录(节点1、节点2等)。然后复制一套<code class="eh lo lp lq lr b">key</code>和<code class="eh lo lp lq lr b">key.pub</code>到<code class="eh lo lp lq lr b">Node-1/data</code>。类似地，另一组<code class="eh lo lp lq lr b">key</code>和<code class="eh lo lp lq lr b">key.pub</code>用于所有其他节点。</p><p id="811a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">现在我们需要一个<code class="eh lo lp lq lr b">config.toml</code>来配置每个节点。将其放在每个<code class="eh lo lp lq lr b">Node-</code>目录中。</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lt"><img src="../Images/0cb04658fc8defbf77e5d350dc2b2cb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xLa23yn06DdX7YjymKNemA.png"/></div></div></figure><p id="adfd" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">您可以添加更多选项。我只是想保持简单。请记住，如果您在同一台主机上设置网络，请为每个节点更改不同的端口。目前，每个节点都保持相同的配置，只有端口不同。现在我们有了启动网络的一切。因此，在每个节点内创建一个<code class="eh lo lp lq lr b">docker-compose.yaml</code>，这样我们也可以单独启动节点。</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lt"><img src="../Images/e6aa4270e43202d17158654f5494fa8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KsgMw9wmzyyM2fO6p-U9ig.png"/></div></div></figure><p id="1030" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">因为我要在一台机器上运行所有4个节点，所以我需要在一个命令中启动所有节点。因此，我将通过另一个docker-compose来组合所有节点。</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lt"><img src="../Images/8d16626130711821e0bed2f31b36d7e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*weJrZCF8Dq8ltWe_uHXvZg.png"/></div></div></figure><p id="c80b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我正在使用网络模式作为主机，这样每个节点都可以建立p2p连接而不会复杂化。如果你愿意，你可以创建自定义的网络，并将所有的节点都连接到这个网络上。</p><p id="78aa" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们还没完呢！我们正处于最后阶段。目前，节点对其他节点一无所知。所以我们要做的是启动bootnode，复制它的enode url，并在其他节点的配置文件中提供它。您还可以单独启动bootnode来复制enode url。但是我将它们一起启动，稍后再重新启动。</p><p id="4f42" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们已经将组合的<code class="eh lo lp lq lr b">docker-compose.yaml</code>包含在<code class="eh lo lp lq lr b">IBFT-Network/</code>中。在这个目录中，我运行<code class="eh lo lp lq lr b">docker-compose up -d</code>。现在，所有4个节点都将启动并运行。现在，每个节点将控制其公钥、地址、enode url、不同服务的打开的url等等。我们单独复制bootnode的enodeUrl，并像这样在其他节点<code class="eh lo lp lq lr b">config.toml</code>中指定。</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lt"><img src="../Images/4b41d9c765936faceb778aa1f5d9c1ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6_jNoM-bvSJemAbtVTLnpA.png"/></div></div></figure><p id="3b19" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果您没有使用network_mode作为主机，请将enode url的最后一部分(127.0.0.1:30303)更改为bootnode的分配IP。</p><p id="2cdb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">最终的文件夹结构将是这样的(复制后删除了<code class="eh lo lp lq lr b">networkFiles</code>):</p><figure class="kv kw kx ky fq kz fe ff paragraph-image"><div class="fe ff me"><img src="../Images/d868bd7acd2f9737ab0d06de0d486af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*YB0CA2-3QuMN1ogGqLOspw.png"/></div></figure><p id="43e9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">现在我们都准备好了。只需重新启动所有容器，您将从日志中看到，节点将与bootnode通信。在几个时间内，网络将准备好并开始开采区块。欲了解更多信息，请查阅<a class="ae ln" href="https://besu.hyperledger.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> Besu </a>的官方文档</p><p id="4d51" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">感谢您的阅读…！！</p><p id="ca5f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">参考:<a class="ae ln" href="https://www.hyperledger.org/use/besu" rel="noopener ugc nofollow" target="_blank">https://www.hyperledger.org/use/besu</a>T11】Github回购:<a class="ae ln" href="https://github.com/prasanth0105/besu-ibft2-private-blockchain" rel="noopener ugc nofollow" target="_blank">https://github.com/prasanth0105/besu-ibft2-network</a></p><blockquote class="mf"><p id="a9c8" class="mg mh ht bd mi mj mk ml mm mn mo kd ek translated">加入Coinmonks <a class="ae ln" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ln" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="2b0f" class="mp lz ht bd mq mr ms mt mu mv mw mx my iz mz ja na jc nb jd nc jf nd jg ne nf dt translated">另外，阅读</h1><ul class=""><li id="00e4" class="ng nh ht jk b jl ni jo nj jr nk jv nl jz nm kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/okex-kucoin" rel="noopener ugc nofollow" target="_blank"> OKEx vs KuCoin </a> | <a class="ae ln" href="https://coincodecap.com/celsius-alternatives" rel="noopener ugc nofollow" target="_blank">摄氏替代品</a> | <a class="ae ln" href="https://coincodecap.com/buy-vechain" rel="noopener ugc nofollow" target="_blank">如何购买VeChain </a></li><li id="3a58" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/binance-futures-trading" rel="noopener ugc nofollow" target="_blank">币安期货交易</a>|<a class="ae ln" href="https://coincodecap.com/mudrex-3commas-etoro" rel="noopener ugc nofollow" target="_blank">3 commas vs Mudrex vs eToro</a></li><li id="2d9a" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/buy-monero" rel="noopener ugc nofollow" target="_blank">如何购买Monero </a> | <a class="ae ln" href="https://coincodecap.com/idex-review" rel="noopener ugc nofollow" target="_blank"> IDEX评论</a> | <a class="ae ln" href="https://coincodecap.com/bitkan-trading-bot" rel="noopener ugc nofollow" target="_blank"> BitKan交易机器人</a></li><li id="68cc" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" rel="noopener" href="/coinmonks/coindcx-review-8444db3621a2"> CoinDCX评论</a> | <a class="ae ln" href="https://coincodecap.com/crypto-margin-trading-exchanges" rel="noopener ugc nofollow" target="_blank">加密保证金交易交易所</a></li><li id="a8ab" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/red-dog-casino-review" rel="noopener ugc nofollow" target="_blank">红狗赌场评论</a> | <a class="ae ln" href="https://coincodecap.com/swyftx-review" rel="noopener ugc nofollow" target="_blank"> Swyftx评论</a> | <a class="ae ln" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank"> CoinGate评论</a></li><li id="d223" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae ln" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li><li id="e151" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/ftx-futures-trading" rel="noopener ugc nofollow" target="_blank">如何在FTX交易所交易期货</a> | <a class="ae ln" href="https://coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li><li id="b079" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/coinloan-review" rel="noopener ugc nofollow" target="_blank"> CoinLoan评论</a> | <a class="ae ln" rel="noopener" href="/coinmonks/youhodler-4-easy-ways-to-make-money-98969b9689f2"> YouHodler评论</a> | <a class="ae ln" href="https://coincodecap.com/blockfi-review" rel="noopener ugc nofollow" target="_blank"> BlockFi评论</a></li><li id="1c9e" class="ng nh ht jk b jl nr jo ns jr nt jv nu jz nv kd nn no np nq dt translated"><a class="ae ln" href="https://coincodecap.com/profittradingapp-for-binance" rel="noopener ugc nofollow" target="_blank">XT.COM评论</a> | <a class="ae ln" href="https://coincodecap.com/xt-com-review" rel="noopener ugc nofollow" target="_blank">币安评论</a></li></ul></div></div>    
</body>
</html>