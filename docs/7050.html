<html>
<head>
<title>BOLT 11 Invoicing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">螺栓11开票</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/bolt-11-invoicing-cfe178abb17c?source=collection_archive---------11-----------------------#2022-05-19">https://medium.com/coinmonks/bolt-11-invoicing-cfe178abb17c?source=collection_archive---------11-----------------------#2022-05-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><blockquote class="iq ir is"><p id="5dd5" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated"><em class="ht">闪电支付的发票协议</em></p></blockquote><h2 id="126b" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">什么是螺栓？</h2><p id="da64" class="pw-post-body-paragraph it iu ht iw b ix kq iz ja jb kr jd je kd ks jh ji kh kt jl jm kl ku jp jq jr hm dt translated">对于不同的闪电网络实现，如核心闪电(以前的c-lightning)、艾克蕾尔、LND和其他实现，它们需要就规范达成一致。<a class="ae kv" href="https://github.com/lightning/bolts" rel="noopener ugc nofollow" target="_blank">螺栓</a>(Lightning技术基础)是定义所有Lightning实现通信和交互的协议规范的文档。</p><h2 id="8a08" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">什么是BOLT 11发票？</h2><p id="adea" class="pw-post-body-paragraph it iu ht iw b ix kq iz ja jb kr jd je kd ks jh ji kh kt jl jm kl ku jp jq jr hm dt translated">与比特币网络不同，在比特币网络中，你生成一个地址，并与付款人共享该地址以发送资金，闪电网络使用一种不同的方法，付款人通过这种方法向收款人请求特定金额的发票(也称为付款请求)。由于闪电发票过期，付款需要在规定的时间内支付，并且同一张发票不应支付超过一次，因为第一次支付将已经向支付路线中的参与者泄露了秘密(前像)。<a class="ae kv" href="https://github.com/lightning/bolts/blob/master/11-payment-encoding.md" rel="noopener ugc nofollow" target="_blank"> BOLT 11 </a>发票规定了在闪电网络上完成支付所需的内容。发票使用bech32编码进行编码，这是一种能够检测错误的校验和算法。这并不是比特币领域首次使用这种算法。比特币改进协议(<a class="ae kv" href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki" rel="noopener ugc nofollow" target="_blank"> BIP 173 </a>)也使用相同的算法来编码高效的比特币地址格式。</p><h2 id="2f41" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">我对BOLT 11发票的体验</h2><p id="57c7" class="pw-post-body-paragraph it iu ht iw b ix kq iz ja jb kr jd je kd ks jh ji kh kt jl jm kl ku jp jq jr hm dt translated">我第一次为发票实现BOLT 11是在“<a class="ae kv" href="https://bolt.fun/hackathons/shock-the-web" rel="noopener ugc nofollow" target="_blank">Shock the Web</a>”BOLT黑客马拉松期间，当时我和我的团队成员需要在Lightning Network上构建一个工资系统。该系统应该能够支付基于时间表(每小时，每天，每周等)的员工的节点。)为员工配置。我们的解决方案<a class="ae kv" href="https://github.com/Jeezman/LitBit" rel="noopener ugc nofollow" target="_blank"> LitBit </a>在入职阶段请求员工的invoice.macaroon文件和节点ID，然后使用macaroon文件代表员工生成发票，并自动结算生成的发票。这种方法是可行的，但是它要求雇主节点存储雇员的节点详细信息和凭证，这成为了一个隐私问题。更好的方法是使用Keysend，这是有限制的，因为没有付款证明。</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff kw"><img src="../Images/d6b852cef6fcda92c123856e1aadce81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QrpT54neETaTVvLZuG7Fzg.png"/></div></div></figure><h2 id="2c4e" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">深入了解BOLT 11发票</h2><p id="5501" class="pw-post-body-paragraph it iu ht iw b ix kq iz ja jb kr jd je kd ks jh ji kh kt jl jm kl ku jp jq jr hm dt translated">检查发票时，您会注意到它由不同的部分组成，包括人类可读的前缀(即人类可以浏览并提取信息的部分)和用于编码完成支付所需信息的数据部分。下面是摘自<a class="ae kv" href="https://github.com/lnbook/lnbook" rel="noopener ugc nofollow" target="_blank">掌握闪电网</a>的真实发票</p><p id="d80d" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kd jg jh ji kh jk jl jm kl jo jp jq jr hm dt translated">lnbc 2500 u 1 pvjlue zpp 5 qqqsyqcyq 5 rqwzqfqyqcyq 5 rqwzqfqqyqcyq 5 rqwzqfqypqdq 5 xysxatsyp 7 en XV 4 jsxqzpuzptrnwng Zn 3 kdz w5 hyd lzf 03 qdg m2 hdq 27 CQ v3 agm 2 awz 5s e 903 vruatfhq 77 w3l S4 EVS 3 ch 9 zw 97j 25 emudup</p><p id="ee09" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kd jg jh ji kh jk jl jm kl jo jp jq jr hm dt translated">前四个字符(lnbc)表示闪电网络(mainnet、testnet等。)，后面是金额，2500，那么“u”代表微比特币单位，乘数为0.000001。数据段的下一部分有3个部分，即:时间戳、标记的键-值对和使用bech32编码的整个发票的签名，用于良好的纠错。</p><h2 id="5bec" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">螺栓11发票缺点</h2><p id="02a4" class="pw-post-body-paragraph it iu ht iw b ix kq iz ja jb kr jd je kd ks jh ji kh kt jl jm kl ku jp jq jr hm dt translated">发票方法的一个显著缺点是，对于每笔发票付款，收款人总是需要一个媒介或渠道来与付款人沟通。在某些情况下，这可能是困难的或者不可能的，例如当接收者不知道发送者是谁或者甚至不知道是否有发送者时的在线捐赠。此外，支付发票包含关于收款人节点的信息，这对其隐私有负面影响。</p><h2 id="db31" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">螺栓11得到了改进</h2><p id="26b2" class="pw-post-body-paragraph it iu ht iw b ix kq iz ja jb kr jd je kd ks jh ji kh kt jl jm kl ku jp jq jr hm dt translated">尽管BOLT 11规定了如何使用支付发票进行支付，但它有一些限制，这导致了已经在Core Lightning中实现的<a class="ae kv" href="https://bolt12.org/" rel="noopener ugc nofollow" target="_blank"> BOLT 12 </a>。BOLT 12使用的是“offer”，可以是静态的，也可以是可重用的。BOLT 11的另一个增强是<a class="ae kv" href="https://github.com/fiatjaf/lnurl-rfc" rel="noopener ugc nofollow" target="_blank"> LNURL </a>，这是一套标准，将这些带外交互进行了编码和标准化，以便钱包和其他应用程序可以实现它们并实现互操作(根据<a class="ae kv" href="https://www.advancingbitcoin.com/blog/lnurl/#:: text=is%20a%20set%20of 20them%20so%20that%20wallets%20and%20other%20apps%20can%20implement%20them%20and%20be%20interoperable" rel="noopener ugc nofollow" target="_blank">advancingbitcoin.com博客</a>)。</p><h2 id="6638" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">结论</h2><p id="3115" class="pw-post-body-paragraph it iu ht iw b ix kq iz ja jb kr jd je kd ks jh ji kh kt jl jm kl ku jp jq jr hm dt translated">BOLT 11发票指定了在闪电网络上完成支付所需的内容。该发票由接收方构建，包含金额、付款单位、接收方节点等信息。其中一些数据是人类可读的，而其他字段则用bech32编码。发送者和接收者之间需要存在通信信道的事实对于BOLT 11发票来说是一个主要的挑战。BOLT11发票还有其他选择，如BOLT12报价、LNURL和Keysend。</p><p id="8605" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je kd jg jh ji kh jk jl jm kl jo jp jq jr hm dt translated">希望这有助于理解BOLT 11发票。如果你觉得这篇文章有用，请分享给你在脸书和推特上的朋友！</p><h1 id="d9d7" class="li jt ht bd ju lj lk ll jy lm ln lo kc lp lq lr kg ls lt lu kk lv lw lx ko ly dt translated">另外，阅读</h1><ul class=""><li id="6132" class="lz ma ht iw b ix kq jb kr kd mb kh mc kl md jr me mf mg mh dt translated"><a class="ae kv" rel="noopener" href="/coinmonks/coindcx-review-8444db3621a2"> CoinDCX评论</a> | <a class="ae kv" href="https://coincodecap.com/crypto-margin-trading-exchanges" rel="noopener ugc nofollow" target="_blank">加密保证金交易交易所</a></li><li id="7a07" class="lz ma ht iw b ix mi jb mj kd mk kh ml kl mm jr me mf mg mh dt translated"><a class="ae kv" href="https://coincodecap.com/red-dog-casino-review" rel="noopener ugc nofollow" target="_blank">红狗赌场评论</a> | <a class="ae kv" href="https://coincodecap.com/swyftx-review" rel="noopener ugc nofollow" target="_blank"> Swyftx评论</a> | <a class="ae kv" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank"> CoinGate评论</a></li><li id="49ec" class="lz ma ht iw b ix mi jb mj kd mk kh ml kl mm jr me mf mg mh dt translated"><a class="ae kv" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae kv" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li><li id="9968" class="lz ma ht iw b ix mi jb mj kd mk kh ml kl mm jr me mf mg mh dt translated"><a class="ae kv" href="https://coincodecap.com/ftx-futures-trading" rel="noopener ugc nofollow" target="_blank">如何在FTX交易所交易期货</a> | <a class="ae kv" href="https://coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li><li id="1309" class="lz ma ht iw b ix mi jb mj kd mk kh ml kl mm jr me mf mg mh dt translated"><a class="ae kv" href="https://coincodecap.com/coinloan-review" rel="noopener ugc nofollow" target="_blank"> CoinLoan评论</a> | <a class="ae kv" rel="noopener" href="/coinmonks/youhodler-4-easy-ways-to-make-money-98969b9689f2"> YouHodler评论</a> | <a class="ae kv" href="https://coincodecap.com/blockfi-review" rel="noopener ugc nofollow" target="_blank"> BlockFi评论</a></li><li id="5851" class="lz ma ht iw b ix mi jb mj kd mk kh ml kl mm jr me mf mg mh dt translated"><a class="ae kv" href="https://coincodecap.com/profittradingapp-for-binance" rel="noopener ugc nofollow" target="_blank">XT.COM评论</a>币安评论 | <a class="ae kv" href="https://coincodecap.com/xt-com-review" rel="noopener ugc nofollow" target="_blank"/></li></ul></div></div>    
</body>
</html>