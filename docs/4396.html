<html>
<head>
<title>Explore NFT Rarity by Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Python探索NFT的稀有性</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/explore-nft-rarity-by-python-58b8502ceb9a?source=collection_archive---------7-----------------------#2022-04-08">https://medium.com/coinmonks/explore-nft-rarity-by-python-58b8502ceb9a?source=collection_archive---------7-----------------------#2022-04-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="8e99" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一个NFT的稀有性是由组成它的特征和特性在给定的收藏中出现的频率决定的</p><p id="ea09" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我们的示例中，我们在VOX行尸走肉集合中检索NFTs列表。</p><p id="09ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击所选藏品<a class="ae jo" href="https://opensea.io/collection/collectvoxthewalkingdead" rel="noopener ugc nofollow" target="_blank"> Opensea.io </a>中的以太扫描链接，即可找到藏品的合约地址。您将被重定向到etherscan.io 上的<a class="ae jo" href="https://etherscan.io/token/0x338be3d8d0209815601e72f7a04ac7f37d61564b" rel="noopener ugc nofollow" target="_blank">智能合约页面。</a></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/ab60f130628e118ca86e7af2f3ea1dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P80tBwI-g2fs2Hi2olB8gg.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">NFTs collection page on Opensea.io</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff kf"><img src="../Images/2f33da90b87295a1011b78bde26b600f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9J8j9bhiVgmufEb8xQVBQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Smart Contract detail on etherscan.io</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff kg"><img src="../Images/8cbdbfa8b7336deead8f8d73b5fa4a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c72JMUiD9hlBu895-1oxXw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Read Contract Section in etherscan.io</figcaption></figure><p id="2ac6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从合同页，你必须去阅读合同部分，并找到令牌URI找出每个令牌的URI。对于这种情况，我们可以知道，每个令牌的URI将是https://www.collectvox.com/metadata/twd/的<a class="ae jo" href="https://www.collectvox.com/metadata/twd/8610" rel="noopener ugc nofollow" target="_blank"/>，后面跟随着令牌号，当我们打开URI时，我们将找到ERC-721标准中的元数据文件。</p><pre class="jq jr js jt fq kh ki kj kk aw kl dt"><span id="4435" class="km kn ht ki b fv ko kp l kq kr">{<br/>  "name": "Michonne #0",<br/>  "description": "VOX are unique collectibles, with provably randomized traits. Own, trade, play and earn with your unique NFT character.",<br/>  "external_url": "<a class="ae jo" href="https://www.collectvox.com/series/twd/0" rel="noopener ugc nofollow" target="_blank">https://www.collectvox.com/series/twd/0</a>",<br/>  "image": "ipfs://QmPCuiXr5fAb5Lfh6DBEw56sKrozz3nbgrNtdKPzx3brri/image.png",<br/>  "model": "ipfs://QmPCuiXr5fAb5Lfh6DBEw56sKrozz3nbgrNtdKPzx3brri/model.fbx",<br/>  "hash": "acdf90addff5ee65dd153a394d764411385295416cae4a40f31bdbfe7a2d17919960445b37776551bcdbd3cbd82eb1b07ff990fa9577d93797241e6a6609ad78",<br/>  "attributes": [<br/>    {<br/>      "trait_type": "Hair",<br/>      "value": "Michonne's Seasmichonne's Braids With Beadson Eight Dreads"<br/>    },<br/>    .........<br/>    {<br/>      "trait_type": "Belt Color",<br/>      "value": "Orka Black",<br/>      "colors": [<br/>        {<br/>          "name": "color",<br/>          "value": "#272220"<br/>        },<br/>        {<br/>          "name": "color",<br/>          "value": "#888888"<br/>        }<br/>      ]<br/>    }<br/>  ]<br/>}</span></pre><p id="5cd4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">每只NFT的稀有程度将由每只NFT本身的特征决定。如果它具有独特或罕见的特征，稀有性可能很高。</p><p id="5a3d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们已经拥有了所有需要的信息，那么我们可以开始研究我们的Python代码来探索我们的NFT的稀有性。</p><p id="c03f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这个例子中，我用Anaconda编写了一个Python笔记本，但是请随意使用您熟悉的其他工具。</p><pre class="jq jr js jt fq kh ki kj kk aw kl dt"><span id="fc61" class="km kn ht ki b fv ko kp l kq kr"># importing lib , please install pandas if you have not installed yet.<br/>import os, glob, json, requests<br/>import pandas as pd</span><span id="c8b5" class="km kn ht ki b fv ks kp l kq kr">#<a class="ae jo" href="https://www.collectvox.com/metadata/twd/8610" rel="noopener ugc nofollow" target="_blank">https://www.collectvox.com/metadata/twd/8610</a><br/>url = '<a class="ae jo" href="https://www.collectvox.com/metadata/twd/'" rel="noopener ugc nofollow" target="_blank">https://www.collectvox.com/metadata/twd/'</a><br/># base on <a class="ae jo" href="https://blog.gala.games/introducing-amcs-the-walking-dead-vox-49df7fd7e836" rel="noopener ugc nofollow" target="_blank">https://blog.gala.games/introducing-amcs-the-walking-dead-vox-49df7fd7e836</a>, it indicate that VOX has 8,888 items in total<br/># then we create a loop to gathering the metadata file for all NFTs in this collection.<br/>for i in range(0,8888) : <br/>    r = requests.get(url + str(i), allow_redirects=True)<br/>    open('./vox/vox' + str(i) + ".txt", 'wb').write(r.content)</span></pre><p id="1c80" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们已经获得了用于数据探索的离线数据。为了使数据操作过程的代码简单，我们将使用pandas lib，它是数据工程师/数据科学任务的标准库。</p><p id="024e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将遍历文件夹中的所有文件，将它们读取到pandas数据框中，并将所有数据框连接成一个数据框。</p><p id="a3ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在读取文件的过程中，从上面的元数据文件中，我们会看到它是JSON格式的，所以我们可以使用json.loads以字典类型加载它，我们发现traits以列表的形式存储在“attributes”中，然后我们必须在进一步处理之前先将其规范化。</p><pre class="jq jr js jt fq kh ki kj kk aw kl dt"><span id="0700" class="km kn ht ki b fv ko kp l kq kr"># Define relative path to folder containing the text files<br/>files_folder = "./vox/"<br/>data_list = []</span><span id="7a74" class="km kn ht ki b fv ks kp l kq kr"># Create a dataframe list from loaded file<br/>for file_name in glob.glob(os.path.join(files_folder ,"*.txt")) :<br/>    with open(file_name,'r', encoding="utf8") as f:<br/>            data = json.loads(f.read())<br/>            df_nested_list = pd.json_normalize(data, record_path =['attributes'],meta=['name', 'image'])<br/>            data_list.append(df_nested_list)<br/>concat_df = pd.concat(data_list)</span><span id="ed37" class="km kn ht ki b fv ks kp l kq kr"># Drop unused column<br/>new_df = concat_df.drop(['colors','image'],axis=1)<br/>display(new_df)</span></pre><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff kt"><img src="../Images/044e6881b19c7ae86572b431f2d57ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*5jL6UIVPS8H0t1AUu8Y6pg.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Sample data from downloading to Pandas data frame with normalize attributes data</figcaption></figure><p id="9b7c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">但是如果数据是规范化的格式，就很难使用，那么我们必须使用数据透视表将属性转换成列。</p><pre class="jq jr js jt fq kh ki kj kk aw kl dt"><span id="7a57" class="km kn ht ki b fv ko kp l kq kr"># Find the unique trait list in this collection<br/>trait_list = new_df.trait_type.unique()<br/>nft_list = new_df.pivot_table(values='value', index=['name'],columns= 'trait_type', aggfunc=lambda x: ' '.join(x))</span></pre><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ku"><img src="../Images/1762f1dd4354ea8cc0fd33ff9d7e3801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gvi6X5nNxaMJcjckN6bgzQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Result from Pivot Table</figcaption></figure><p id="3ca7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将有一个表格来显示NFT和列中每个可能的特征之间的关系，以及每个单元格中的特征名称。然而，我们仍然不知道它有多罕见，然后我们必须总结每个特征的重复数量，然后将该数量映射回我们的数据框架。</p><pre class="jq jr js jt fq kh ki kj kk aw kl dt"><span id="2f73" class="km kn ht ki b fv ko kp l kq kr"># count the number of duplicate traits<br/>trait_count_series = new_df.groupby(['trait_type','value']).size()</span><span id="79f7" class="km kn ht ki b fv ks kp l kq kr"># mapping the number of duplicate with trait name in in dataframe<br/>for index in trait_count_series.index :<br/>    nft_list.loc[nft_list[index[0]] == index[1],  index[0]] = trait_count_series.loc[index]<br/>nft_list = nft_list.fillna(0)</span></pre><p id="9368" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最后，将我们的结果导出为CSV文件，便于离线跟踪或发送到我们的NFT朋友社区。</p><pre class="jq jr js jt fq kh ki kj kk aw kl dt"><span id="0ffc" class="km kn ht ki b fv ko kp l kq kr">nft_list.to_csv('vox_stat_count.csv')</span></pre><p id="51c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">万岁，我们现在有CSV文件来跟踪我们的NFT稀有度，单元格中的每个数字将显示NFT上有多少重复性状，数字越少，NFT上就越稀有。</p><p id="5d21" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">希望你喜欢用NFT市场的信息进行交易。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff kv"><img src="../Images/6c2aff26e017c20dc53903b431024c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgMcOW6DuPEYZYTXbKzKsw.png"/></div></div></figure><p id="0a25" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以从<a class="ae jo" href="https://github.com/anekpattanakij/nft-rarity-finding-python" rel="noopener ugc nofollow" target="_blank">https://github.com/anekpattanakij/nft-rarity-finding-python</a>下载这篇文章的笔记本</p><blockquote class="kw"><p id="9c2c" class="kx ky ht bd kz la lb lc ld le lf jn ek translated">加入Coinmonks <a class="ae jo" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jo" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="f476" class="lg kn ht bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc dt translated">另外，阅读</h1><ul class=""><li id="2b08" class="md me ht is b it mf ix mg jb mh jf mi jj mj jn mk ml mm mn dt translated"><a class="ae jo" href="https://coincodecap.com/crypto-trading-terminals" rel="noopener ugc nofollow" target="_blank"> 5款最佳加密交易终端</a> | <a class="ae jo" href="https://coincodecap.com/best-defi-apps" rel="noopener ugc nofollow" target="_blank">最佳DeFi应用</a></li><li id="961e" class="md me ht is b it mo ix mp jb mq jf mr jj ms jn mk ml mm mn dt translated"><a class="ae jo" href="https://coincodecap.com/coinbase-vs-wazirx" rel="noopener ugc nofollow" target="_blank">比特币基地vs瓦济克斯</a> | <a class="ae jo" href="https://coincodecap.com/bitrue-review" rel="noopener ugc nofollow" target="_blank">比特鲁点评</a> | <a class="ae jo" href="https://coincodecap.com/poloniex-vs-bittrex" rel="noopener ugc nofollow" target="_blank">波洛涅克斯vs比特鲁</a></li><li id="a478" class="md me ht is b it mo ix mp jb mq jf mr jj ms jn mk ml mm mn dt translated"><a class="ae jo" href="https://coincodecap.com/crypto-exchanges-in-germany" rel="noopener ugc nofollow" target="_blank">德国最佳加密交易所</a> | <a class="ae jo" href="https://coincodecap.com/arbitrum" rel="noopener ugc nofollow" target="_blank"> Arbitrum:第二层解决方案</a></li><li id="47a7" class="md me ht is b it mo ix mp jb mq jf mr jj ms jn mk ml mm mn dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/binance-trading-bots-d0d57bb62c4c">币安交易机器人</a> | <a class="ae jo" rel="noopener" href="/coinmonks/okex-review-6b369304110f"> OKEx评论</a> | <a class="ae jo" href="https://coincodecap.com/atani-review" rel="noopener ugc nofollow" target="_blank">阿塔尼评论</a></li><li id="8938" class="md me ht is b it mo ix mp jb mq jf mr jj ms jn mk ml mm mn dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/best-crypto-signals-telegram-5785cdbc4b2b">最佳加密交易信号电报</a> | <a class="ae jo" rel="noopener" href="/coinmonks/moonxbt-review-6e4ab26d037"> MoonXBT评论</a></li><li id="8f39" class="md me ht is b it mo ix mp jb mq jf mr jj ms jn mk ml mm mn dt translated">如何在Bitbns上购买柴犬(SHIB)币？ | <a class="ae jo" href="https://coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">买弗洛基</a></li></ul></div></div>    
</body>
</html>