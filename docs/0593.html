<html>
<head>
<title>Solidity Functions Part-1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实度函数第一部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/solidity-functions-part-1-c613f8186322?source=collection_archive---------26-----------------------#2022-02-11">https://medium.com/coinmonks/solidity-functions-part-1-c613f8186322?source=collection_archive---------26-----------------------#2022-02-11</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="46e6" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">vi̇ew</h1><p id="643d" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">函数可以被声明为<code class="eh km kn ko kp b"><strong class="jq hu">view</strong></code>，在这种情况下它们承诺不修改状态。</p><p id="524e" class="pw-post-body-paragraph jo jp ht jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hm dt translated">例如:</p><pre class="kv kw kx ky fq kz kp la lb aw lc dt"><span id="9800" class="ld ir ht kp b fv le lf l lg lh">function random() public view returns (uint8) {</span><span id="27b3" class="ld ir ht kp b fv li lf l lg lh">   return uint8(uint256(keccak256(block.timestamp, block.difficulty))%20);</span><span id="b36b" class="ld ir ht kp b fv li lf l lg lh">}</span><span id="d661" class="ld ir ht kp b fv li lf l lg lh">// it generates a number that is between 1 and 20 //</span></pre><h2 id="7d46" class="ld ir ht bd is lj lk ll iw lm ln lo ja jz lp lq je kd lr ls ji kh lt lu jm lv dt translated">注意</h2><p id="6e9f" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">以下语句被视为修改状态:</p><ol class=""><li id="e27a" class="lw lx ht jq b jr kq jv kr jz ly kd lz kh ma kl mb mc md me dt translated">写入状态变量。</li><li id="6df0" class="lw lx ht jq b jr mf jv mg jz mh kd mi kh mj kl mb mc md me dt translated"><a class="ae mk" href="https://docs.soliditylang.org/en/v0.8.11/contracts.html?highlight=view#events" rel="noopener ugc nofollow" target="_blank">发射事件</a>。</li><li id="626e" class="lw lx ht jq b jr mf jv mg jz mh kd mi kh mj kl mb mc md me dt translated"><a class="ae mk" href="https://docs.soliditylang.org/en/v0.8.11/control-structures.html#creating-contracts" rel="noopener ugc nofollow" target="_blank">创建其他合同</a>。</li><li id="38cd" class="lw lx ht jq b jr mf jv mg jz mh kd mi kh mj kl mb mc md me dt translated">使用<code class="eh km kn ko kp b">selfdestruct</code>。</li><li id="7b0d" class="lw lx ht jq b jr mf jv mg jz mh kd mi kh mj kl mb mc md me dt translated">通过电话发送以太网。</li><li id="27ec" class="lw lx ht jq b jr mf jv mg jz mh kd mi kh mj kl mb mc md me dt translated">调用任何未标记为<code class="eh km kn ko kp b"><strong class="jq hu">view</strong></code>或<code class="eh km kn ko kp b">pure</code>的函数。</li><li id="93f9" class="lw lx ht jq b jr mf jv mg jz mh kd mi kh mj kl mb mc md me dt translated">使用低级调用。</li><li id="836d" class="lw lx ht jq b jr mf jv mg jz mh kd mi kh mj kl mb mc md me dt translated">使用包含某些操作码的内联程序集。</li></ol><h1 id="dbaf" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">纯的</h1><p id="93db" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">函数可以被声明为<code class="eh km kn ko kp b">pure</code>，在这种情况下，它们保证不读取或修改状态。</p><pre class="kv kw kx ky fq kz kp la lb aw lc dt"><span id="cf1b" class="ld ir ht kp b fv le lf l lg lh">pragma solidity ^0.5.0;<br/><br/>contract Test {<br/>   function getResult() public pure returns(uint product, uint sum){<br/>      uint a = 1; <br/>      uint b = 2;<br/>      product = a * b;<br/>      sum = a + b; <br/>   }<br/>}</span></pre><h1 id="3b8d" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">输出</h1><pre class="kv kw kx ky fq kz kp la lb aw lc dt"><span id="91cb" class="ld ir ht kp b fv le lf l lg lh">0: uint256: product 2<br/>1: uint256: sum 3</span></pre><h2 id="0d07" class="ld ir ht bd is lj lk ll iw lm ln lo ja jz lp lq je kd lr ls ji kh lt lu jm lv dt translated">注意</h2><p id="2c1d" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">以下语句如果出现在函数中，将被视为读取状态，在这种情况下编译器将抛出警告。</p><p id="aaae" class="pw-post-body-paragraph jo jp ht jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hm dt translated">1-读取状态变量。</p><p id="a516" class="pw-post-body-paragraph jo jp ht jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hm dt translated">2-访问地址(this)。平衡还是<address> .balance。</address></p><p id="a577" class="pw-post-body-paragraph jo jp ht jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hm dt translated">3-访问block、tx、msg的任何特殊变量(可以读取msg.sig和msg.data)。</p><p id="c1bc" class="pw-post-body-paragraph jo jp ht jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hm dt translated">4-调用任何未标记为纯函数的函数。</p><p id="c7d5" class="pw-post-body-paragraph jo jp ht jq b jr kq jt ju jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl hm dt translated">5-使用包含某些操作码的内联程序集。</p></div></div>    
</body>
</html>