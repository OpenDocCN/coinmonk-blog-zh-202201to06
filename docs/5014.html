<html>
<head>
<title>Smart Contract Code Coverage In Hardhat</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hardhat中的智能合同代码覆盖率</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/smart-contract-code-coverage-in-hardhat-d4a5ff6c9ba6?source=collection_archive---------2-----------------------#2022-04-17">https://medium.com/coinmonks/smart-contract-code-coverage-in-hardhat-d4a5ff6c9ba6?source=collection_archive---------2-----------------------#2022-04-17</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="b357" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">什么是代码覆盖率？</strong> <br/>代码覆盖率是一个可以帮助你了解你的源代码有多少被测试的度量标准。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/cc829d64c8d69dcab134b28558e220fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FO0pUQOH_w9hK4amfSAH2Q.jpeg"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">source: <a class="ae ke" href="https://www.pymnts.com/blockchain/2021/what-is-a-smart-contract/" rel="noopener ugc nofollow" target="_blank">https://www.pymnts.com/blockchain/2021/what-is-a-smart-contract/</a></figcaption></figure><p id="cdda" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">为什么要为你的智能合约运行代码覆盖率？</strong> <br/>智能合约被黑在今天的系统中并不是什么新闻，虽然代码覆盖率不会告诉你智能合约开发的最佳实践，但它保证你正在测试你的功能的所有可能结果。100%通过测试是很好的，但是如果测试只覆盖了你代码库的10%,你仍然不能在没有被覆盖的地方捕捉到回归。什么代码覆盖率来拯救。<br/>在本教程中，我们将使用<strong class="is hu"> solidity-coverage </strong>包，这是一个用于运行您的智能合约的代码覆盖的包，它为<a class="ae ke" href="https://github.com/sc-forks/solidity-coverage/blob/master/docs/advanced.md" rel="noopener ugc nofollow" target="_blank"> <em class="kf">跳过测试、webflow挂钩、gas cost e.t.c </em> </a> <em class="kf">提供了更多的功能和能力。好吧，让我们开始吧💌</em></p><ol class=""><li id="876b" class="kg kh ht is b it iu ix iy jb ki jf kj jj kk jn kl km kn ko dt translated"><strong class="is hu">安装包:</strong>我假设你已经安装了hardhat。我们将使用<strong class="is hu">可靠性覆盖</strong>和<strong class="is hu">加纳切-cli </strong>。ganache-cli是一个用于测试和开发的快速以太坊RPC客户端，solidity-coverage将使用它来运行其覆盖和测试。</li></ol><pre class="jp jq jr js fq kp kq kr ks aw kt dt"><span id="b822" class="ku kv ht kq b fv kw kx l ky kz"><em class="kf">npm i solidity-coverage ganache-cli</em></span></pre><p id="48a9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2.<strong class="is hu">写测试:</strong>一个新的安全帽项目，附带<a class="ae ke" href="https://gist.github.com/kingzamzon/1e3abb55590e0820934a022094873c38" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> Greeter.sol </strong> </a>我们要为它运行代码覆盖。它的测试写在<strong class="is hu"> simple-test.js </strong>里。您可以使用<code class="eh la lb lc kq b">npx hardhat test</code>进行简单的测试</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="ld le l"/></div></figure></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><p id="f8ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">3.<strong class="is hu">给hardhat配置添加solidity-coverage:</strong>打开你的<em class="kf">hard hat . config . js</em>；在您的安全帽配置中导入/需要。</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="ld le l"/></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">require / import solidity-coverage</figcaption></figure><p id="a03d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> 4。运行覆盖:</strong> <em class="kf">坚固性覆盖</em>利用<em class="kf"> ganache-cli </em>运行它本地节点，如果你使用<em class="kf"> npx hardhat node </em>运行你的本地节点，关闭它。现在快跑</p><pre class="jp jq jr js fq kp kq kr ks aw kt dt"><span id="7879" class="ku kv ht kq b fv kw kx l ky kz">npx hardhat coverage --network localhost</span></pre><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff lm"><img src="../Images/b4c16afefc8c60b63402952fe3535880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z8730OBYT49Dh2T25GfAIw.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">coverage test for Greeter.sol</figcaption></figure><p id="f597" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">恭喜🙌根据上面的截图，由于Emmanuel Enebeli和Pauline Banye，您已经成功地运行了<strong class="is hu"> Greeter.sol. </strong> <br/>的代码覆盖率</p><p id="ae12" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">资源</strong></p><div class="ln lo fm fo lp lq"><a href="https://blog.colony.io/code-coverage-for-solidity-eecfa88668c2/" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab ej"><div class="ls ab lt cl cj lu"><h2 class="bd hu fv z el lv eo ep lw er et hs dt translated">可靠性的代码覆盖率</h2><div class="lx l"><h3 class="bd b fv z el lv eo ep lw er et ek translated">确保已部署以太坊合约的安全性是以太坊开发者面临的最重要挑战之一…</h3></div><div class="ly l"><p class="bd b gc z el lv eo ep lw er et ek translated">blog.colony.io</p></div></div><div class="lz l"><div class="ma l mb mc md lz me jy lq"/></div></div></a></div><div class="ln lo fm fo lp lq"><a rel="noopener follow" target="_blank" href="/edgefund/testing-and-code-coverage-of-solidity-smart-contracts-660cb6291701"><div class="lr ab ej"><div class="ls ab lt cl cj lu"><h2 class="bd hu fv z el lv eo ep lw er et hs dt translated">Solidity智能合约的测试和代码覆盖</h2><div class="lx l"><h3 class="bd b fv z el lv eo ep lw er et ek translated">众所周知，持续集成和持续部署是应用程序的重要组成部分…</h3></div><div class="ly l"><p class="bd b gc z el lv eo ep lw er et ek translated">medium.com</p></div></div><div class="lz l"><div class="mf l mb mc md lz me jy lq"/></div></div></a></div><blockquote class="mg"><p id="ab5e" class="mh mi ht bd mj mk ml mm mn mo mp jn ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="ae72" class="mq kv ht bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm dt translated">另外，阅读</h1><ul class=""><li id="1b69" class="kg kh ht is b it nn ix no jb np jf nq jj nr jn ns km kn ko dt translated"><a class="ae ke" href="https://coincodecap.com/futures-trading-signals" rel="noopener ugc nofollow" target="_blank">最佳期货交易信号</a> | <a class="ae ke" href="https://coincodecap.com/liquid-exchange-review" rel="noopener ugc nofollow" target="_blank">流动性交易回顾</a></li><li id="7471" class="kg kh ht is b it nt ix nu jb nv jf nw jj nx jn ns km kn ko dt translated"><a class="ae ke" href="https://coincodecap.com/crypto-exchanges-in-south-africa" rel="noopener ugc nofollow" target="_blank">南非的加密交易所</a> | <a class="ae ke" href="https://coincodecap.com/bitmex-crypto-signals" rel="noopener ugc nofollow" target="_blank"> BitMEX加密信号</a></li><li id="9d92" class="kg kh ht is b it nt ix nu jb nv jf nw jj nx jn ns km kn ko dt translated"><a class="ae ke" href="https://coincodecap.com/moonxbt-copy-trading" rel="noopener ugc nofollow" target="_blank"> MoonXBT副本交易</a> | <a class="ae ke" href="https://coincodecap.com/crypto-wallets-in-uae" rel="noopener ugc nofollow" target="_blank">阿联酋的加密钱包</a></li><li id="2ff6" class="kg kh ht is b it nt ix nu jb nv jf nw jj nx jn ns km kn ko dt translated"><a class="ae ke" href="https://coincodecap.com/remitano-review" rel="noopener ugc nofollow" target="_blank">雷米塔诺评论</a>|<a class="ae ke" href="https://coincodecap.com/1inch" rel="noopener ugc nofollow" target="_blank">1英寸协议指南</a> | <a class="ae ke" href="https://coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">购买弗洛基</a></li><li id="19dd" class="kg kh ht is b it nt ix nu jb nv jf nw jj nx jn ns km kn ko dt translated"><a class="ae ke" href="https://coincodecap.com/bybit-binance-moonxbt" rel="noopener ugc nofollow" target="_blank"> MoonXBT vs Bybit vs币安</a> | <a class="ae ke" href="https://coincodecap.com/arbitrum" rel="noopener ugc nofollow" target="_blank"> Arbitrum:第二层解决方案</a></li></ul></div></div>    
</body>
</html>